{"ast":null,"code":"import _objectSpread from\"C:/bringo-edu/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{Plus,Trash2,Download,AlertCircle,Users,Home,ChevronDown,ChevronUp,ClipboardList,Calendar,Sparkles,User,LogOut,LogIn,TrendingUp,BarChart3,Target,Award,AlertTriangle,Search,Share,Eye,EyeOff}from'lucide-react';import{initializeApp}from'firebase/app';import{getAuth,createUserWithEmailAndPassword,signInWithEmailAndPassword,signOut,onAuthStateChanged}from'firebase/auth';import{getFirestore,collection,addDoc,getDocs,updateDoc,deleteDoc,doc,query,where}from'firebase/firestore';// Configuraci√≥n de Firebase\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const firebaseConfig={apiKey:\"AIzaSyCdRpj7y3L4PIwWiJgzYRHDU3XxcIVfmW4\",authDomain:\"bringoedu.firebaseapp.com\",projectId:\"bringoedu\",storageBucket:\"bringoedu.firebasestorage.app\",messagingSenderId:\"667720262345\",appId:\"1:667720262345:web:ad55dd71c19ffcb73fa318\"};// Inicializar Firebase\nconst app=initializeApp(firebaseConfig);const auth=getAuth(app);const db=getFirestore(app);// Componente para gr√°fico de distribuci√≥n\nconst DistribucionNotas=_ref=>{let{estudiantes,calcularPromedioFinal}=_ref;const calcularDistribucion=()=>{const distribucion={excelente:0,// 4.5 - 5.0\nbueno:0,// 3.5 - 4.4\nregular:0,// 3.0 - 3.4\nriesgo:0// 0 - 2.9\n};estudiantes.forEach(estudiante=>{const promedio=parseFloat(calcularPromedioFinal(estudiante));if(promedio>=4.5)distribucion.excelente++;else if(promedio>=3.5)distribucion.bueno++;else if(promedio>=3.0)distribucion.regular++;else if(promedio>0)distribucion.riesgo++;});return distribucion;};const distribucion=calcularDistribucion();const total=estudiantes.length;if(total===0){return/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-8 text-gray-500\",children:/*#__PURE__*/_jsx(\"p\",{children:\"No hay datos suficientes\"})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-semibold text-green-600\",children:\"Excelente (4.5-5.0)\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm font-bold\",children:[distribucion.excelente,\" (\",Math.round(distribucion.excelente/total*100),\"%)\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-full bg-gray-200 rounded-full h-3\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-green-500 h-3 rounded-full transition-all duration-500\",style:{width:\"\".concat(distribucion.excelente/total*100,\"%\")}})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-semibold text-blue-600\",children:\"Bueno (3.5-4.4)\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm font-bold\",children:[distribucion.bueno,\" (\",Math.round(distribucion.bueno/total*100),\"%)\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-full bg-gray-200 rounded-full h-3\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-blue-500 h-3 rounded-full transition-all duration-500\",style:{width:\"\".concat(distribucion.bueno/total*100,\"%\")}})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-semibold text-yellow-600\",children:\"Regular (3.0-3.4)\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm font-bold\",children:[distribucion.regular,\" (\",Math.round(distribucion.regular/total*100),\"%)\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-full bg-gray-200 rounded-full h-3\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-yellow-500 h-3 rounded-full transition-all duration-500\",style:{width:\"\".concat(distribucion.regular/total*100,\"%\")}})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-semibold text-red-600\",children:\"En Riesgo (0-2.9)\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm font-bold\",children:[distribucion.riesgo,\" (\",Math.round(distribucion.riesgo/total*100),\"%)\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-full bg-gray-200 rounded-full h-3\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-red-500 h-3 rounded-full transition-all duration-500\",style:{width:\"\".concat(distribucion.riesgo/total*100,\"%\")}})})]});};// Componente para Fila de Notas R√°pidas - CORREGIDO\nconst FilaNotasRapidas=_ref2=>{let{estudiante,onAgregarNota,calcularPromedioFinal,claseSeleccionada,usuario,actualizarNota}=_ref2;const[notaDiaria,setNotaDiaria]=useState('');const[notaApreciacion,setNotaApreciacion]=useState('');const[notaExamen,setNotaExamen]=useState('');const[fecha,setFecha]=useState(new Date().toISOString().split('T')[0]);const handleAgregarNota=async(tipo,valor)=>{if(valor&&parseFloat(valor)>=0&&parseFloat(valor)<=5){try{await onAgregarNota(estudiante.id,tipo,parseFloat(valor),fecha);// Limpiar el campo\nif(tipo==='notasDiarias')setNotaDiaria('');if(tipo==='apreciacion')setNotaApreciacion('');if(tipo==='examen')setNotaExamen('');}catch(error){console.error('Error agregando nota:',error);alert('Error al agregar la nota');}}else{alert('Por favor ingresa una nota v√°lida entre 0 y 5');}};const compartirPorWhatsApp=()=>{const formatoNotas=notas=>{return notas.filter(n=>n.valor&&parseFloat(n.valor)>0).map(n=>\"\\uD83D\\uDCC5 \".concat(n.fecha,\": \").concat(n.valor,\"/5.0\")).join('\\n')||'üì≠ Sin notas registradas';};const mensaje=\"\\uD83D\\uDCCA *REPORTE DE NOTAS - \".concat(claseSeleccionada===null||claseSeleccionada===void 0?void 0:claseSeleccionada.nombre,\"*\\n\\n*Estudiante:* \").concat(estudiante.nombre,\"\\n*Profesor:* \").concat(usuario===null||usuario===void 0?void 0:usuario.nombre,\"\\n*Instituci\\xF3n:* \").concat((claseSeleccionada===null||claseSeleccionada===void 0?void 0:claseSeleccionada.institucion)||'Bringo Edu',\"\\n*Fecha de reporte:* \").concat(new Date().toLocaleDateString('es-PA'),\"\\n\\n*\\uD83D\\uDCDD NOTAS DIARIAS:*\\n\").concat(formatoNotas(estudiante.notasDiarias),\"\\n\\n*\\u2B50 APRECIACI\\xD3N:*\\n\").concat(formatoNotas(estudiante.apreciacion),\"\\n\\n*\\uD83D\\uDCCB EXAMEN:*\\n\").concat(formatoNotas(estudiante.examen),\"\\n\\n*\\uD83C\\uDFC6 PROMEDIO FINAL:* \").concat(calcularPromedioFinal(estudiante),\"/5.0\\n\\n---\\nGenerado con Bringo Edu \\uD83D\\uDCDA | Transparente y Confiable\");const url=\"https://wa.me/?text=\".concat(encodeURIComponent(mensaje));window.open(url,'_blank');};return/*#__PURE__*/_jsxs(\"tr\",{className:\"border-b border-gray-200 hover:bg-gray-50\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-3 font-semibold\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-purple-600 text-white w-8 h-8 rounded-full flex items-center justify-center font-bold text-sm\",children:estudiante.nombre.charAt(0).toUpperCase()}),/*#__PURE__*/_jsx(\"span\",{children:estudiante.nombre})]})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.1\",min:\"0\",max:\"5\",placeholder:\"0-5\",value:notaDiaria,onChange:e=>setNotaDiaria(e.target.value),className:\"w-20 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500 text-center\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleAgregarNota('notasDiarias',notaDiaria),className:\"bg-blue-600 text-white px-3 py-2 rounded-lg hover:bg-blue-700 transition text-sm font-semibold\",children:\"+\"})]})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.1\",min:\"0\",max:\"5\",placeholder:\"0-5\",value:notaApreciacion,onChange:e=>setNotaApreciacion(e.target.value),className:\"w-20 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-green-500 text-center\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleAgregarNota('apreciacion',notaApreciacion),className:\"bg-green-600 text-white px-3 py-2 rounded-lg hover:bg-green-700 transition text-sm font-semibold\",children:\"+\"})]})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.1\",min:\"0\",max:\"5\",placeholder:\"0-5\",value:notaExamen,onChange:e=>setNotaExamen(e.target.value),className:\"w-20 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-purple-500 text-center\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleAgregarNota('examen',notaExamen),className:\"bg-purple-600 text-white px-3 py-2 rounded-lg hover:bg-purple-700 transition text-sm font-semibold\",children:\"+\"})]})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-3 text-center\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-xl font-bold \".concat(parseFloat(calcularPromedioFinal(estudiante))>=4.5?'text-green-600':parseFloat(calcularPromedioFinal(estudiante))>=3.5?'text-blue-600':parseFloat(calcularPromedioFinal(estudiante))>=3.0?'text-yellow-600':'text-red-600'),children:calcularPromedioFinal(estudiante)})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-3 text-center\",children:/*#__PURE__*/_jsxs(\"button\",{onClick:compartirPorWhatsApp,className:\"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition font-semibold flex items-center gap-2 text-sm\",children:[/*#__PURE__*/_jsx(Share,{className:\"w-4 h-4\"}),\"WhatsApp\"]})})]});};// Componente de Modal Login MEJORADO con toggle de contrase√±a\nconst ModalLogin=_ref3=>{let{mostrarLogin,setMostrarLogin,email,setEmail,password,setPassword,errorAuth,cargandoAuth,iniciarSesion,limpiarFormulariosAuth,setMostrarRegistro}=_ref3;const[mostrarPassword,setMostrarPassword]=useState(false);if(!mostrarLogin)return null;const handleSubmit=e=>{e.preventDefault();iniciarSesion();};return/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-gradient-to-br from-purple-900/95 via-blue-900/95 to-indigo-900/95 backdrop-blur-sm flex items-center justify-center z-50 p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-3xl shadow-2xl max-w-md w-full overflow-hidden transform transition-all\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-r from-purple-600 via-blue-600 to-indigo-600 p-8 text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"inline-block bg-white rounded-full p-4 mb-4 shadow-lg\",children:/*#__PURE__*/_jsx(LogIn,{className:\"w-8 h-8 text-purple-600\"})}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-3xl font-bold text-white mb-2\",children:\"\\xA1Bienvenido de nuevo!\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-purple-100 text-sm\",children:\"Ingresa a tu cuenta de Bringo Edu\"})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"p-8\",children:[errorAuth&&/*#__PURE__*/_jsx(\"div\",{className:\"bg-red-50 border-2 border-red-200 rounded-lg p-3 mb-4\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-red-800 text-sm font-semibold\",children:errorAuth})}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-5\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-center gap-2 text-sm font-bold text-gray-700 mb-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-purple-600\",children:\"\\uD83D\\uDCE7\"}),\" Email\"]}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",placeholder:\"profesor@ejemplo.com\",value:email,onChange:e=>setEmail(e.target.value),className:\"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:border-purple-500 focus:ring-2 focus:ring-purple-200 transition-all\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-center gap-2 text-sm font-bold text-gray-700 mb-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-purple-600\",children:\"\\uD83D\\uDD12\"}),\" Contrase\\xF1a\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"input\",{type:mostrarPassword?\"text\":\"password\",placeholder:\"\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\",value:password,onChange:e=>setPassword(e.target.value),className:\"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:border-purple-500 focus:ring-2 focus:ring-purple-200 transition-all pr-12\",required:true}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setMostrarPassword(!mostrarPassword),className:\"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700 transition\",children:mostrarPassword?/*#__PURE__*/_jsx(EyeOff,{className:\"w-5 h-5\"}):/*#__PURE__*/_jsx(Eye,{className:\"w-5 h-5\"})})]})]})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:cargandoAuth,className:\"w-full mt-8 py-4 rounded-xl font-bold text-lg shadow-lg transition-all \".concat(cargandoAuth?'bg-gray-400 cursor-not-allowed':'bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 hover:shadow-xl transform hover:scale-[1.02]',\" text-white\"),children:cargandoAuth?'Iniciando sesi√≥n...':'Iniciar Sesi√≥n'}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>{setMostrarLogin(false);limpiarFormulariosAuth();},className:\"w-full mt-3 bg-gray-100 text-gray-700 py-3 rounded-xl hover:bg-gray-200 transition font-semibold\",children:\"Cancelar\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6 text-center\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 text-sm mb-2\",children:\"\\xBFNo tienes cuenta?\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>{setMostrarLogin(false);setMostrarRegistro(true);},className:\"text-purple-600 hover:text-purple-800 font-bold text-lg hover:underline\",children:\"Reg\\xEDstrate aqu\\xED\"})]})]})]})});};// Componente de Modal Registro MEJORADO con toggle de contrase√±a\nconst ModalRegistro=_ref4=>{let{mostrarRegistro,setMostrarRegistro,email,setEmail,password,setPassword,nombreUsuario,setNombreUsuario,confirmarPassword,setConfirmarPassword,errorAuth,cargandoAuth,registrarUsuario,limpiarFormulariosAuth,setMostrarLogin}=_ref4;const[mostrarPassword,setMostrarPassword]=useState(false);const[mostrarConfirmarPassword,setMostrarConfirmarPassword]=useState(false);if(!mostrarRegistro)return null;const handleSubmit=e=>{e.preventDefault();registrarUsuario();};return/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-gradient-to-br from-green-900/95 via-teal-900/95 to-blue-900/95 backdrop-blur-sm flex items-center justify-center z-50 p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-3xl shadow-2xl max-w-md w-full overflow-hidden transform transition-all\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-r from-green-600 via-teal-600 to-blue-600 p-8 text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"inline-block bg-white rounded-full p-4 mb-4 shadow-lg\",children:/*#__PURE__*/_jsx(User,{className:\"w-8 h-8 text-green-600\"})}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-3xl font-bold text-white mb-2\",children:\"\\xA1\\xDAnete a Bringo Edu!\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-green-100 text-sm\",children:\"Crea tu cuenta y comienza a gestionar tus clases\"})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"p-8\",children:[errorAuth&&/*#__PURE__*/_jsx(\"div\",{className:\"bg-red-50 border-2 border-red-200 rounded-lg p-3 mb-4\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-red-800 text-sm font-semibold\",children:errorAuth})}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-5\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-center gap-2 text-sm font-bold text-gray-700 mb-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-green-600\",children:\"\\uD83D\\uDC64\"}),\" Nombre Completo\"]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Prof. Juan P\\xE9rez\",value:nombreUsuario,onChange:e=>setNombreUsuario(e.target.value),className:\"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:border-green-500 focus:ring-2 focus:ring-green-200 transition-all\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-center gap-2 text-sm font-bold text-gray-700 mb-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-green-600\",children:\"\\uD83D\\uDCE7\"}),\" Email\"]}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",placeholder:\"profesor@escuela.edu\",value:email,onChange:e=>setEmail(e.target.value),className:\"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:border-green-500 focus:ring-2 focus:ring-green-200 transition-all\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-center gap-2 text-sm font-bold text-gray-700 mb-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-green-600\",children:\"\\uD83D\\uDD12\"}),\" Contrase\\xF1a\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"input\",{type:mostrarPassword?\"text\":\"password\",placeholder:\"M\\xEDnimo 6 caracteres\",value:password,onChange:e=>setPassword(e.target.value),className:\"w-full px-4 py-3 border-2 border-gray-300 rounded-xl focus:outline-none focus:border-green-500 focus:ring-2 focus:ring-green-200 transition-all pr-12\",required:true,minLength:6}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setMostrarPassword(!mostrarPassword),className:\"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700 transition\",children:mostrarPassword?/*#__PURE__*/_jsx(EyeOff,{className:\"w-5 h-5\"}):/*#__PURE__*/_jsx(Eye,{className:\"w-5 h-5\"})})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 mt-1 ml-1\",children:\"Usa letras, n\\xFAmeros y s\\xEDmbolos\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-center gap-2 text-sm font-bold text-gray-700 mb-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-green-600\",children:\"\\u2705\"}),\" Confirmar Contrase\\xF1a\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"input\",{type:mostrarConfirmarPassword?\"text\":\"password\",placeholder:\"Repite tu contrase\\xF1a\",value:confirmarPassword,onChange:e=>setConfirmarPassword(e.target.value),className:\"w-full px-4 py-3 border-2 border-gray-300 rounded-xl focus:outline-none focus:border-green-500 focus:ring-2 focus:ring-green-200 transition-all pr-12\",required:true}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setMostrarConfirmarPassword(!mostrarConfirmarPassword),className:\"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700 transition\",children:mostrarConfirmarPassword?/*#__PURE__*/_jsx(EyeOff,{className:\"w-5 h-5\"}):/*#__PURE__*/_jsx(Eye,{className:\"w-5 h-5\"})})]})]})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:cargandoAuth,className:\"w-full mt-8 py-4 rounded-xl font-bold text-lg shadow-lg transition-all \".concat(cargandoAuth?'bg-gray-400 cursor-not-allowed':'bg-gradient-to-r from-green-600 to-teal-600 hover:from-green-700 hover:to-teal-700 hover:shadow-xl transform hover:scale-[1.02]',\" text-white\"),children:cargandoAuth?'Creando cuenta...':'Crear Cuenta'}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>{setMostrarRegistro(false);limpiarFormulariosAuth();},className:\"w-full mt-3 bg-gray-100 text-gray-700 py-3 rounded-xl hover:bg-gray-200 transition font-semibold\",children:\"Cancelar\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6 text-center\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 text-sm mb-2\",children:\"\\xBFYa tienes cuenta?\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>{setMostrarRegistro(false);setMostrarLogin(true);},className:\"text-green-600 hover:text-green-800 font-bold text-lg hover:underline\",children:\"Inicia sesi\\xF3n aqu\\xED\"})]})]})]})});};// Componente de Barra de B√∫squeda de ESTUDIANTES para Home\nconst BarraBusquedaEstudiantes=_ref5=>{let{estudiantes,onBuscarEstudiante,busquedaEstudiante,setBusquedaEstudiante}=_ref5;const buscarYRedirigirEstudiante=nombre=>{if(!nombre.trim())return;const estudianteEncontrado=estudiantes.find(e=>e.nombre.toLowerCase().includes(nombre.toLowerCase()));if(estudianteEncontrado){onBuscarEstudiante(estudianteEncontrado);setBusquedaEstudiante('');}else{alert('Estudiante no encontrado');}};return/*#__PURE__*/_jsx(\"div\",{className:\"bg-gradient-to-r from-blue-100 to-purple-100 rounded-xl p-4 mb-6\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-col md:flex-row gap-4 items-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 w-full\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-bold text-gray-700 mb-2\",children:\"\\uD83D\\uDD0D Buscar Estudiante\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Escribe el nombre del estudiante...\",value:busquedaEstudiante,onChange:e=>setBusquedaEstudiante(e.target.value),onKeyPress:e=>e.key==='Enter'&&buscarYRedirigirEstudiante(busquedaEstudiante),className:\"flex-1 px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-purple-500 text-sm md:text-base\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>buscarYRedirigirEstudiante(busquedaEstudiante),className:\"bg-purple-600 text-white px-4 md:px-6 py-3 rounded-lg hover:bg-purple-700 transition font-bold flex items-center gap-2 text-sm md:text-base\",children:[/*#__PURE__*/_jsx(Search,{className:\"w-4 h-4 md:w-5 md:h-5\"}),/*#__PURE__*/_jsx(\"span\",{className:\"hidden sm:inline\",children:\"Buscar\"})]})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-600 mt-2\",children:\"\\uD83D\\uDCA1 Encuentra r\\xE1pidamente estudiantes por nombre\"})]})})});};export default function AsistenteProfesor(){const[usuario,setUsuario]=useState(null);const[mostrarLogin,setMostrarLogin]=useState(false);const[mostrarRegistro,setMostrarRegistro]=useState(false);const[email,setEmail]=useState('');const[password,setPassword]=useState('');const[nombreUsuario,setNombreUsuario]=useState('');const[confirmarPassword,setConfirmarPassword]=useState('');const[errorAuth,setErrorAuth]=useState('');const[cargandoAuth,setCargandoAuth]=useState(false);const[view,setView]=useState('home');const[clases,setClases]=useState([]);const[claseSeleccionada,setClaseSeleccionada]=useState(null);const[nombreClase,setNombreClase]=useState('');const[grado,setGrado]=useState('');const[seccion,setSeccion]=useState('');const[estudiantes,setEstudiantes]=useState([]);const[nombreEstudiante,setNombreEstudiante]=useState('');const[expandido,setExpandido]=useState({});const[fechaActual,setFechaActual]=useState(new Date().toISOString().split('T')[0]);const[nombreProfesor,setNombreProfesor]=useState('');const[institucion,setInstitucion]=useState('');const[gradoPlan,setGradoPlan]=useState('');const[materia,setMateria]=useState('');const[trimestre,setTrimestre]=useState('Primer Trimestre');const[planGenerado,setPlanGenerado]=useState(null);const[generandoPlan,setGenerandoPlan]=useState(false);// Estado para b√∫squeda de estudiantes - MANTENIDO\nconst[busquedaEstudiante,setBusquedaEstudiante]=useState('');// Efecto para manejar el estado de autenticaci√≥n\nuseEffect(()=>{const unsubscribe=onAuthStateChanged(auth,user=>{if(user){setUsuario({email:user.email,nombre:user.displayName||user.email.split('@')[0],uid:user.uid});cargarClases(user.uid);}else{setUsuario(null);setClases([]);}});return()=>unsubscribe();},[]);// Cargar clases desde Firestore\nconst cargarClases=async userId=>{try{const q=query(collection(db,'clases'),where('userId','==',userId));const querySnapshot=await getDocs(q);const clasesData=[];querySnapshot.forEach(doc=>{clasesData.push(_objectSpread({id:doc.id},doc.data()));});setClases(clasesData);}catch(error){console.error('Error cargando clases:',error);}};const registrarUsuario=async()=>{setErrorAuth('');if(!email||!password||!nombreUsuario){setErrorAuth('Por favor completa todos los campos');return;}if(password!==confirmarPassword){setErrorAuth('Las contrase√±as no coinciden');return;}if(password.length<6){setErrorAuth('La contrase√±a debe tener al menos 6 caracteres');return;}setCargandoAuth(true);try{const userCredential=await createUserWithEmailAndPassword(auth,email,password);setUsuario({email:userCredential.user.email,nombre:nombreUsuario,uid:userCredential.user.uid});setMostrarRegistro(false);limpiarFormulariosAuth();}catch(error){if(error.code==='auth/email-already-in-use'){setErrorAuth('Este correo ya est√° registrado');}else if(error.code==='auth/weak-password'){setErrorAuth('La contrase√±a es muy d√©bil');}else{setErrorAuth('Error al registrar: '+error.message);}}finally{setCargandoAuth(false);}};const iniciarSesion=async()=>{setErrorAuth('');if(!email||!password){setErrorAuth('Por favor ingresa email y contrase√±a');return;}setCargandoAuth(true);try{const userCredential=await signInWithEmailAndPassword(auth,email,password);setUsuario({email:userCredential.user.email,nombre:userCredential.user.displayName||userCredential.user.email.split('@')[0],uid:userCredential.user.uid});setMostrarLogin(false);limpiarFormulariosAuth();}catch(error){if(error.code==='auth/user-not-found'){setErrorAuth('Usuario no encontrado');}else if(error.code==='auth/wrong-password'){setErrorAuth('Contrase√±a incorrecta');}else{setErrorAuth('Error al iniciar sesi√≥n: '+error.message);}}finally{setCargandoAuth(false);}};const cerrarSesion=async()=>{try{await signOut(auth);setUsuario(null);setView('home');setClaseSeleccionada(null);setClases([]);}catch(error){console.error('Error al cerrar sesi√≥n:',error);}};const limpiarFormulariosAuth=()=>{setEmail('');setPassword('');setNombreUsuario('');setConfirmarPassword('');setErrorAuth('');};// FUNCI√ìN MEJORADA: Generar plan trimestral con NUEVO campo\nconst generarPlanConOpenAI=async()=>{if(!nombreProfesor.trim()||!institucion.trim()||!gradoPlan.trim()||!materia.trim()||!trimestre.trim()){alert('Por favor completa todos los campos');return;}setGenerandoPlan(true);try{const BACKEND_URL='https://bringo-edu-backend-2.onrender.com/api/generate-plan';const response=await fetch(BACKEND_URL,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({nombreProfesor,institucion,gradoPlan,materia,trimestre,incluirDesarrolloClases:true})});if(!response.ok){const errorData=await response.json().catch(()=>({error:'Error desconocido'}));throw new Error(errorData.error||\"Error \".concat(response.status,\" del servidor\"));}const data=await response.json();if(!data.contenidos||!Array.isArray(data.contenidos)||data.contenidos.length===0){alert('El servicio de IA no gener√≥ contenido. Intenta nuevamente.');return;}setPlanGenerado(_objectSpread(_objectSpread({},data),{},{fecha:data.fecha||new Date().toLocaleDateString('es-PA'),generadoPorIA:true}));}catch(error){console.error('‚ùå Error al generar plan:',error);alert(\"Error al generar el plan: \".concat(error.message));}finally{setGenerandoPlan(false);}};// FUNCI√ìN MEJORADA: Descargar plan trimestral con NUEVO campo\nconst descargarPlan=()=>{if(!planGenerado)return;let contenido=\"PLAN TRIMESTRAL - BRINGO EDU\\n\";contenido+=\"\".concat('='.repeat(80),\"\\n\\n\");contenido+=\"INFORMACI\\xD3N GENERAL\\n\";contenido+=\"-\".repeat(80)+\"\\n\";contenido+=\"Profesor: \".concat(planGenerado.docente||planGenerado.profesor||nombreProfesor,\"\\n\");contenido+=\"Instituci\\xF3n: \".concat(planGenerado.institucion,\"\\n\");contenido+=\"Grado: \".concat(planGenerado.grado||gradoPlan,\"\\n\");contenido+=\"Asignatura: \".concat(planGenerado.asignatura||planGenerado.materia||materia,\"\\n\");contenido+=\"Trimestre: \".concat(planGenerado.trimestre,\"\\n\");contenido+=\"A\\xF1o Escolar: \".concat(planGenerado.anioEscolar||new Date().getFullYear(),\"\\n\");contenido+=\"Duraci\\xF3n: \".concat(planGenerado.duracionSemanas||'10-12',\" semanas\\n\");contenido+=\"Fecha de generaci\\xF3n: \".concat(planGenerado.fecha||new Date().toLocaleDateString('es-PA'),\"\\n\\n\");if(planGenerado.contenidos&&planGenerado.contenidos.length>0){contenido+=\"CONTENIDOS DEL TRIMESTRE\\n\";contenido+=\"-\".repeat(80)+\"\\n\";planGenerado.contenidos.forEach((cont,i)=>{contenido+=\"\".concat(i+1,\". \").concat(cont,\"\\n\");});contenido+=\"\\n\";}// NUEVO: Secci√≥n de Desarrollo del Contenido para Clases\nif(planGenerado.desarrolloClases&&Object.keys(planGenerado.desarrolloClases).length>0){contenido+=\"DESARROLLO DEL CONTENIDO PARA CLASES\\n\";contenido+=\"-\".repeat(80)+\"\\n\";Object.entries(planGenerado.desarrolloClases).forEach(_ref6=>{let[contenidoKey,desarrollo]=_ref6;contenido+=\"\\n\\uD83D\\uDCDD \".concat(contenidoKey,\":\\n\");contenido+=\"Duraci\\xF3n: \".concat(desarrollo.duracion||'3 sesiones de 45 minutos',\"\\n\\n\");if(desarrollo.objetivos&&desarrollo.objetivos.length>0){contenido+=\"Objetivos de Aprendizaje:\\n\";desarrollo.objetivos.forEach(objetivo=>{contenido+=\"- \".concat(objetivo,\"\\n\");});contenido+=\"\\n\";}if(desarrollo.materiales&&desarrollo.materiales.length>0){contenido+=\"Materiales necesarios:\\n\";desarrollo.materiales.forEach(material=>{contenido+=\"- \".concat(material,\"\\n\");});contenido+=\"\\n\";}if(desarrollo.fases&&desarrollo.fases.length>0){contenido+=\"Fases de la actividad:\\n\";desarrollo.fases.forEach((fase,index)=>{contenido+=\"\\nSESI\\xD3N \".concat(index+1,\" - \").concat(fase.titulo||'Desarrollo',\"\\n\");if(fase.actividades){fase.actividades.forEach(actividad=>{contenido+=\"\".concat(actividad.tiempo,\": \").concat(actividad.descripcion,\"\\n\");});}});contenido+=\"\\n\";}contenido+=\"-\".repeat(40)+\"\\n\";});}if(planGenerado.competencias&&planGenerado.competencias.length>0){contenido+=\"COMPETENCIAS A DESARROLLAR\\n\";contenido+=\"-\".repeat(80)+\"\\n\";planGenerado.competencias.forEach((comp,i)=>{contenido+=\"\".concat(i+1,\". \").concat(comp,\"\\n\");});contenido+=\"\\n\";}if(planGenerado.indicadoresLogro&&planGenerado.indicadoresLogro.length>0){contenido+=\"INDICADORES DE LOGRO\\n\";contenido+=\"-\".repeat(80)+\"\\n\";planGenerado.indicadoresLogro.forEach((ind,i)=>{contenido+=\"\\u2022 \".concat(ind,\"\\n\");});contenido+=\"\\n\";}if(planGenerado.metodologia){contenido+=\"ESTRATEGIAS METODOL\\xD3GICAS\\n\";contenido+=\"-\".repeat(80)+\"\\n\";contenido+=\"\".concat(planGenerado.metodologia,\"\\n\\n\");}if(planGenerado.recursos&&planGenerado.recursos.length>0){contenido+=\"RECURSOS EDUCATIVOS\\n\";contenido+=\"-\".repeat(80)+\"\\n\";planGenerado.recursos.forEach((rec,i)=>{contenido+=\"\\u2022 \".concat(rec,\"\\n\");});contenido+=\"\\n\";}if(planGenerado.evaluacion&&Array.isArray(planGenerado.evaluacion)&&planGenerado.evaluacion.length>0){contenido+=\"INSTRUMENTOS DE EVALUACI\\xD3N\\n\";contenido+=\"-\".repeat(80)+\"\\n\";planGenerado.evaluacion.forEach((evalItem,i)=>{contenido+=\"\\u2022 \".concat(evalItem,\"\\n\");});contenido+=\"\\n\";}if(planGenerado.adaptaciones&&planGenerado.adaptaciones.length>0){contenido+=\"ADAPTACIONES CURRICULARES\\n\";contenido+=\"-\".repeat(80)+\"\\n\";planGenerado.adaptaciones.forEach((adap,i)=>{contenido+=\"\\u2022 \".concat(adap,\"\\n\");});contenido+=\"\\n\";}if(planGenerado.observaciones){contenido+=\"OBSERVACIONES\\n\";contenido+=\"-\".repeat(80)+\"\\n\";contenido+=\"\".concat(planGenerado.observaciones,\"\\n\\n\");}contenido+=\"\\n\".concat('='.repeat(80),\"\\n\");contenido+=\"Generado con Bringo Edu - Asistente Inteligente para Profesores\\n\";contenido+=\"Fecha: \".concat(new Date().toLocaleDateString('es-PA'),\"\\n\");const elemento=document.createElement('a');const archivo=new Blob([contenido],{type:'text/plain;charset=utf-8'});elemento.href=URL.createObjectURL(archivo);elemento.download=\"Plan_Trimestral_\".concat(planGenerado.asignatura||materia,\"_\").concat(planGenerado.trimestre.replace(/\\s+/g,'_'),\".txt\");document.body.appendChild(elemento);elemento.click();document.body.removeChild(elemento);};// FUNCI√ìN MEJORADA: Agregar clase\nconst agregarClase=async()=>{if(!usuario){alert('Debes iniciar sesi√≥n para crear clases');setMostrarLogin(true);return;}if(!nombreClase.trim()||!grado.trim()||!seccion.trim()){alert('Por favor completa todos los campos');return;}try{const nuevaClase={nombre:\"\".concat(nombreClase,\" \").concat(grado).concat(seccion),grado,seccion,materia:nombreClase,estudiantes:[],userId:usuario.uid,fechaCreacion:new Date().toISOString()};const docRef=await addDoc(collection(db,'clases'),nuevaClase);setClases([...clases,_objectSpread({id:docRef.id},nuevaClase)]);setNombreClase('');setGrado('');setSeccion('');}catch(error){console.error('‚ùå Error agregando clase:',error);alert(\"Error al crear la clase: \".concat(error.message));}};const eliminarClase=async id=>{if(window.confirm('¬øEst√°s seguro de eliminar esta clase?')){try{await deleteDoc(doc(db,'clases',id));setClases(clases.filter(c=>c.id!==id));if((claseSeleccionada===null||claseSeleccionada===void 0?void 0:claseSeleccionada.id)===id){setClaseSeleccionada(null);setView('home');}}catch(error){console.error('Error eliminando clase:',error);alert('Error al eliminar la clase');}}};const seleccionarClase=clase=>{if(!usuario){alert('Debes iniciar sesi√≥n para acceder a las clases');setMostrarLogin(true);return;}setClaseSeleccionada(clase);setEstudiantes(clase.estudiantes||[]);setView('clase');};// FUNCI√ìN MEJORADA: Agregar estudiante\nconst agregarEstudiante=async()=>{if(!nombreEstudiante.trim()){alert('Ingresa el nombre del estudiante');return;}try{const nuevoEstudiante={id:Date.now().toString(),nombre:nombreEstudiante,notasDiarias:[],apreciacion:[],examen:[],asistencia:{}};const nuevosEstudiantes=[...estudiantes,nuevoEstudiante];setEstudiantes(nuevosEstudiantes);// Actualizar en Firestore\nawait updateDoc(doc(db,'clases',claseSeleccionada.id),{estudiantes:nuevosEstudiantes});// Actualizar estado local\nconst clasesActualizadas=clases.map(c=>c.id===claseSeleccionada.id?_objectSpread(_objectSpread({},c),{},{estudiantes:nuevosEstudiantes}):c);setClases(clasesActualizadas);setNombreEstudiante('');}catch(error){console.error('Error agregando estudiante:',error);alert('Error al agregar estudiante');}};const marcarAsistencia=async(estudianteId,fecha,estado)=>{try{const nuevosEstudiantes=estudiantes.map(e=>{if(e.id===estudianteId){return _objectSpread(_objectSpread({},e),{},{asistencia:_objectSpread(_objectSpread({},e.asistencia),{},{[fecha]:estado})});}return e;});setEstudiantes(nuevosEstudiantes);// Actualizar en Firestore\nawait updateDoc(doc(db,'clases',claseSeleccionada.id),{estudiantes:nuevosEstudiantes});// Actualizar estado local\nconst clasesActualizadas=clases.map(c=>c.id===claseSeleccionada.id?_objectSpread(_objectSpread({},c),{},{estudiantes:nuevosEstudiantes}):c);setClases(clasesActualizadas);}catch(error){console.error('Error marcando asistencia:',error);}};// FUNCI√ìN CORREGIDA: Agregar nota - AHORA FUNCIONA CORRECTAMENTE\nconst agregarNota=async function(estudianteId,seccion){let valor=arguments.length>2&&arguments[2]!==undefined?arguments[2]:'';let fecha=arguments.length>3&&arguments[3]!==undefined?arguments[3]:new Date().toISOString().split('T')[0];try{const nuevosEstudiantes=estudiantes.map(e=>{if(e.id===estudianteId){const nuevaNota={valor:valor?parseFloat(valor):'',fecha:fecha};return _objectSpread(_objectSpread({},e),{},{[seccion]:[...e[seccion],nuevaNota]});}return e;});setEstudiantes(nuevosEstudiantes);// Actualizar en Firestore\nawait updateDoc(doc(db,'clases',claseSeleccionada.id),{estudiantes:nuevosEstudiantes});// Actualizar estado local\nconst clasesActualizadas=clases.map(c=>c.id===claseSeleccionada.id?_objectSpread(_objectSpread({},c),{},{estudiantes:nuevosEstudiantes}):c);setClases(clasesActualizadas);}catch(error){console.error('Error agregando nota:',error);alert('Error al agregar nota');}};const actualizarNota=async(estudianteId,seccion,indice,campo,valor)=>{try{const nuevosEstudiantes=estudiantes.map(e=>{if(e.id===estudianteId){const nuevasNotas=[...e[seccion]];nuevasNotas[indice]=_objectSpread(_objectSpread({},nuevasNotas[indice]),{},{[campo]:valor});return _objectSpread(_objectSpread({},e),{},{[seccion]:nuevasNotas});}return e;});setEstudiantes(nuevosEstudiantes);// Actualizar en Firestore\nawait updateDoc(doc(db,'clases',claseSeleccionada.id),{estudiantes:nuevosEstudiantes});// Actualizar estado local\nconst clasesActualizadas=clases.map(c=>c.id===claseSeleccionada.id?_objectSpread(_objectSpread({},c),{},{estudiantes:nuevosEstudiantes}):c);setClases(clasesActualizadas);}catch(error){console.error('Error actualizando nota:',error);}};const eliminarNota=async(estudianteId,seccion,indice)=>{try{const nuevosEstudiantes=estudiantes.map(e=>{if(e.id===estudianteId){const nuevasNotas=e[seccion].filter((_,i)=>i!==indice);return _objectSpread(_objectSpread({},e),{},{[seccion]:nuevasNotas});}return e;});setEstudiantes(nuevosEstudiantes);// Actualizar en Firestore\nawait updateDoc(doc(db,'clases',claseSeleccionada.id),{estudiantes:nuevosEstudiantes});// Actualizar estado local\nconst clasesActualizadas=clases.map(c=>c.id===claseSeleccionada.id?_objectSpread(_objectSpread({},c),{},{estudiantes:nuevosEstudiantes}):c);setClases(clasesActualizadas);}catch(error){console.error('Error eliminando nota:',error);}};const eliminarEstudiante=async id=>{try{const nuevosEstudiantes=estudiantes.filter(e=>e.id!==id);setEstudiantes(nuevosEstudiantes);// Actualizar en Firestore\nawait updateDoc(doc(db,'clases',claseSeleccionada.id),{estudiantes:nuevosEstudiantes});// Actualizar estado local\nconst clasesActualizadas=clases.map(c=>c.id===claseSeleccionada.id?_objectSpread(_objectSpread({},c),{},{estudiantes:nuevosEstudiantes}):c);setClases(clasesActualizadas);}catch(error){console.error('Error eliminando estudiante:',error);alert('Error al eliminar estudiante');}};const contarAsistencias=estudiante=>{const registros=estudiante.asistencia||{};const presente=Object.values(registros).filter(v=>v==='presente').length;const ausente=Object.values(registros).filter(v=>v==='ausente').length;const tardanza=Object.values(registros).filter(v=>v==='tardanza').length;return{presente,ausente,tardanza};};const calcularTotalSeccion=notas=>{if(!notas||notas.length===0)return 0;const numeros=notas.map(n=>{const valor=typeof n==='object'?parseFloat(n.valor):parseFloat(n);return isNaN(valor)?0:valor;}).filter(v=>v>0);if(numeros.length===0)return 0;return(numeros.reduce((a,b)=>a+b,0)/numeros.length).toFixed(2);};const calcularPromedioFinal=estudiante=>{const totalDiarias=parseFloat(calcularTotalSeccion(estudiante.notasDiarias));const totalApreciacion=parseFloat(calcularTotalSeccion(estudiante.apreciacion));const totalExamen=parseFloat(calcularTotalSeccion(estudiante.examen));const totales=[totalDiarias,totalApreciacion,totalExamen].filter(t=>t>0);if(totales.length===0)return 0;return((totalDiarias+totalApreciacion+totalExamen)/3).toFixed(2);};const toggleExpansion=estudianteId=>{setExpandido(prev=>_objectSpread(_objectSpread({},prev),{},{[estudianteId]:!prev[estudianteId]}));};// FUNCI√ìN CORREGIDA: Buscar y redirigir estudiante - AHORA EN HOME\nconst buscarYRedirigirEstudiante=estudiante=>{// Si estamos en home, vamos a notas\nif(view==='home'){setView('notas');}// Expandir la secci√≥n del estudiante\nsetExpandido(prev=>_objectSpread(_objectSpread({},prev),{},{[estudiante.id]:true}));// Scroll a la secci√≥n del estudiante\nsetTimeout(()=>{const elemento=document.getElementById(\"estudiante-\".concat(estudiante.id));if(elemento){elemento.scrollIntoView({behavior:'smooth',block:'center'});// Resaltar temporalmente\nelemento.classList.add('bg-yellow-100');setTimeout(()=>{elemento.classList.remove('bg-yellow-100');},2000);}},500);setBusquedaEstudiante('');};const estudiantesEnRiesgo=estudiantes.filter(e=>parseFloat(calcularPromedioFinal(e))<3.0&&parseFloat(calcularPromedioFinal(e))>0);const promedioGeneral=()=>{const promedios=estudiantes.map(e=>parseFloat(calcularPromedioFinal(e))).filter(p=>p>0);if(promedios.length===0)return 0;return(promedios.reduce((a,b)=>a+b,0)/promedios.length).toFixed(1);};// FUNCIONES PARA LA VISTA DE PROGRESO\nconst obtenerRankingEstudiantes=()=>{return estudiantes.map(estudiante=>_objectSpread(_objectSpread({},estudiante),{},{promedio:parseFloat(calcularPromedioFinal(estudiante))})).filter(e=>e.promedio>0).sort((a,b)=>b.promedio-a.promedio).slice(0,5);// Top 5\n};return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50\",children:[/*#__PURE__*/_jsx(ModalLogin,{mostrarLogin:mostrarLogin,setMostrarLogin:setMostrarLogin,email:email,setEmail:setEmail,password:password,setPassword:setPassword,errorAuth:errorAuth,cargandoAuth:cargandoAuth,iniciarSesion:iniciarSesion,limpiarFormulariosAuth:limpiarFormulariosAuth,setMostrarRegistro:setMostrarRegistro}),/*#__PURE__*/_jsx(ModalRegistro,{mostrarRegistro:mostrarRegistro,setMostrarRegistro:setMostrarRegistro,email:email,setEmail:setEmail,password:password,setPassword:setPassword,nombreUsuario:nombreUsuario,setNombreUsuario:setNombreUsuario,confirmarPassword:confirmarPassword,setConfirmarPassword:setConfirmarPassword,errorAuth:errorAuth,cargandoAuth:cargandoAuth,registrarUsuario:registrarUsuario,limpiarFormulariosAuth:limpiarFormulariosAuth,setMostrarLogin:setMostrarLogin}),/*#__PURE__*/_jsx(\"header\",{className:\"bg-gradient-to-r from-purple-600 to-blue-600 text-white shadow-lg\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container mx-auto px-4 py-4 flex justify-between items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-4xl\",children:\"\\uD83D\\uDCDA\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold\",children:\"Bringo Edu\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-purple-100\",children:\"Asistente Inteligente para Profesores\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center gap-4\",children:usuario?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-right mr-4 hidden md:block\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"font-semibold text-sm\",children:[\"\\uD83D\\uDC4B Hola, \",usuario.nombre]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-purple-200\",children:usuario.email})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:cerrarSesion,className:\"flex items-center gap-2 bg-red-500 hover:bg-red-600 px-4 py-2 rounded-lg transition font-semibold\",children:[/*#__PURE__*/_jsx(LogOut,{className:\"w-4 h-4\"}),/*#__PURE__*/_jsx(\"span\",{className:\"hidden sm:inline\",children:\"Salir\"})]})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setMostrarLogin(true),className:\"flex items-center gap-2 bg-white text-purple-600 hover:bg-purple-50 px-4 py-2 rounded-lg transition font-semibold\",children:[/*#__PURE__*/_jsx(LogIn,{className:\"w-4 h-4\"}),/*#__PURE__*/_jsx(\"span\",{className:\"hidden sm:inline\",children:\"Iniciar Sesi\\xF3n\"})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setMostrarRegistro(true),className:\"flex items-center gap-2 bg-green-500 hover:bg-green-600 px-4 py-2 rounded-lg transition font-semibold\",children:[/*#__PURE__*/_jsx(User,{className:\"w-4 h-4\"}),/*#__PURE__*/_jsx(\"span\",{className:\"hidden sm:inline\",children:\"Registrarse\"})]})]})})]})}),/*#__PURE__*/_jsx(\"nav\",{className:\"bg-white shadow-md sticky top-0 z-40\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container mx-auto px-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-1 overflow-x-auto py-2\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setView('home'),className:\"flex items-center gap-2 px-4 md:px-6 py-3 rounded-lg font-semibold transition whitespace-nowrap \".concat(view==='home'?'bg-purple-600 text-white':'bg-gray-100 text-gray-700 hover:bg-gray-200'),children:[/*#__PURE__*/_jsx(Home,{className:\"w-5 h-5\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm md:text-base\",children:\"Inicio\"})]}),usuario&&claseSeleccionada&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setView('clase'),className:\"flex items-center gap-2 px-4 md:px-6 py-3 rounded-lg font-semibold transition whitespace-nowrap \".concat(view==='clase'?'bg-purple-600 text-white':'bg-gray-100 text-gray-700 hover:bg-gray-200'),children:[/*#__PURE__*/_jsx(Users,{className:\"w-5 h-5\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm md:text-base\",children:\"Estudiantes\"})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setView('asistencia'),className:\"flex items-center gap-2 px-4 md:px-6 py-3 rounded-lg font-semibold transition whitespace-nowrap \".concat(view==='asistencia'?'bg-purple-600 text-white':'bg-gray-100 text-gray-700 hover:bg-gray-200'),children:[/*#__PURE__*/_jsx(Calendar,{className:\"w-5 h-5\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm md:text-base\",children:\"Asistencia\"})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setView('notas'),className:\"flex items-center gap-2 px-4 md:px-6 py-3 rounded-lg font-semibold transition whitespace-nowrap \".concat(view==='notas'?'bg-purple-600 text-white':'bg-gray-100 text-gray-700 hover:bg-gray-200'),children:[/*#__PURE__*/_jsx(ClipboardList,{className:\"w-5 h-5\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm md:text-base\",children:\"Notas\"})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setView('progreso'),className:\"flex items-center gap-2 px-4 md:px-6 py-3 rounded-lg font-semibold transition whitespace-nowrap \".concat(view==='progreso'?'bg-purple-600 text-white':'bg-gray-100 text-gray-700 hover:bg-gray-200'),children:[/*#__PURE__*/_jsx(TrendingUp,{className:\"w-5 h-5\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm md:text-base\",children:\"Progreso\"})]})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setView('planificacion'),className:\"flex items-center gap-2 px-4 md:px-6 py-3 rounded-lg font-semibold transition whitespace-nowrap \".concat(view==='planificacion'?'bg-purple-600 text-white':'bg-gray-100 text-gray-700 hover:bg-gray-200'),children:[/*#__PURE__*/_jsx(Sparkles,{className:\"w-5 h-5\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm md:text-base\",children:\"Plan IA\"})]})]})})}),/*#__PURE__*/_jsxs(\"main\",{className:\"container mx-auto px-4 py-8\",children:[view==='home'&&/*#__PURE__*/_jsx(\"div\",{className:\"space-y-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl shadow-lg p-6 md:p-8\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-2xl md:text-3xl font-bold text-gray-800 mb-6 flex items-center gap-3\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-4xl\",children:\"\\uD83C\\uDFEB\"}),\"Mis Clases\"]}),usuario&&claseSeleccionada&&estudiantes.length>0&&/*#__PURE__*/_jsx(BarraBusquedaEstudiantes,{estudiantes:estudiantes,onBuscarEstudiante:buscarYRedirigirEstudiante,busquedaEstudiante:busquedaEstudiante,setBusquedaEstudiante:setBusquedaEstudiante}),!usuario&&/*#__PURE__*/_jsx(\"div\",{className:\"bg-yellow-50 border-2 border-yellow-200 rounded-xl p-6 mb-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start gap-4\",children:[/*#__PURE__*/_jsx(AlertCircle,{className:\"w-6 h-6 text-yellow-600 flex-shrink-0 mt-1\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-bold text-yellow-900 mb-2\",children:\"Inicia sesi\\xF3n para acceder\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-yellow-800 mb-4\",children:\"Crea una cuenta o inicia sesi\\xF3n para gestionar tus clases, estudiantes y generar planes de estudio con IA.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-3 flex-wrap\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setMostrarLogin(true),className:\"bg-purple-600 text-white px-6 py-2 rounded-lg hover:bg-purple-700 transition font-semibold\",children:\"Iniciar Sesi\\xF3n\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setMostrarRegistro(true),className:\"bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700 transition font-semibold\",children:\"Registrarse\"})]})]})]})}),usuario&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-r from-purple-100 to-blue-100 rounded-xl p-6 mb-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold text-gray-800 mb-4\",children:\"Crear Nueva Clase\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-4 gap-4\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Materia (ej: Matem\\xE1ticas)\",value:nombreClase,onChange:e=>setNombreClase(e.target.value),className:\"px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-purple-500\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Grado (ej: 5to)\",value:grado,onChange:e=>setGrado(e.target.value),className:\"px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-purple-500\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Secci\\xF3n (ej: A)\",value:seccion,onChange:e=>setSeccion(e.target.value),className:\"px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-purple-500\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:agregarClase,className:\"bg-gradient-to-r from-purple-600 to-blue-600 text-white px-6 py-3 rounded-lg hover:from-purple-700 hover:to-blue-700 transition font-bold flex items-center justify-center gap-2\",children:[/*#__PURE__*/_jsx(Plus,{className:\"w-5 h-5\"}),\"Crear\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:[clases.length===0&&usuario&&/*#__PURE__*/_jsxs(\"div\",{className:\"col-span-full text-center py-12 text-gray-500\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-lg\",children:\"No tienes clases creadas a\\xFAn\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm mt-2\",children:\"Crea tu primera clase usando el formulario arriba\"})]}),clases.map(clase=>{var _clase$estudiantes;return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-br from-purple-500 to-blue-600 rounded-xl shadow-lg p-6 text-white hover:shadow-2xl transition-all transform hover:scale-105 cursor-pointer\",onClick:()=>seleccionarClase(clase),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-start mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-2xl font-bold mb-2\",children:clase.nombre}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-purple-100\",children:[((_clase$estudiantes=clase.estudiantes)===null||_clase$estudiantes===void 0?void 0:_clase$estudiantes.length)||0,\" estudiantes\"]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:e=>{e.stopPropagation();eliminarClase(clase.id);},className:\"bg-red-500 hover:bg-red-600 p-2 rounded-lg transition\",children:/*#__PURE__*/_jsx(Trash2,{className:\"w-5 h-5\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-4 pt-4 border-t border-purple-400\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-purple-100\",children:\"Click para gestionar\"})})]},clase.id);})]})]})}),view==='clase'&&claseSeleccionada&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl shadow-lg p-6 md:p-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-6\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-2xl md:text-3xl font-bold text-gray-800 flex items-center gap-3\",children:[/*#__PURE__*/_jsx(Users,{className:\"w-8 h-8 text-purple-600\"}),claseSeleccionada.nombre]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setClaseSeleccionada(null);setView('home');},className:\"bg-gray-200 hover:bg-gray-300 px-4 py-2 rounded-lg transition font-semibold\",children:\"Volver\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-r from-green-100 to-teal-100 rounded-xl p-6 mb-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold text-gray-800 mb-4\",children:\"Agregar Estudiante\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col md:flex-row gap-4\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Nombre completo del estudiante\",value:nombreEstudiante,onChange:e=>setNombreEstudiante(e.target.value),onKeyPress:e=>e.key==='Enter'&&agregarEstudiante(),className:\"flex-1 px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-green-500\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:agregarEstudiante,className:\"bg-gradient-to-r from-green-600 to-teal-600 text-white px-6 py-3 rounded-lg hover:from-green-700 hover:to-teal-700 transition font-bold flex items-center justify-center gap-2\",children:[/*#__PURE__*/_jsx(Plus,{className:\"w-5 h-5\"}),\"Agregar\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[estudiantes.length===0&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-12 text-gray-500\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-lg\",children:\"No hay estudiantes en esta clase\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm mt-2\",children:\"Agrega tu primer estudiante usando el formulario arriba\"})]}),estudiantes.map(estudiante=>/*#__PURE__*/_jsx(\"div\",{className:\"bg-gray-50 rounded-xl p-6 hover:bg-gray-100 transition\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-purple-600 text-white w-12 h-12 rounded-full flex items-center justify-center font-bold text-lg\",children:estudiante.nombre.charAt(0).toUpperCase()}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-xl font-bold text-gray-800\",children:estudiante.nombre}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600\",children:[\"Promedio: \",calcularPromedioFinal(estudiante),\"/5\"]})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{if(window.confirm(\"\\xBFEliminar a \".concat(estudiante.nombre,\"?\"))){eliminarEstudiante(estudiante.id);}},className:\"bg-red-500 hover:bg-red-600 text-white p-2 rounded-lg transition mt-4 md:mt-0\",children:/*#__PURE__*/_jsx(Trash2,{className:\"w-5 h-5\"})})]})},estudiante.id))]})]}),view==='asistencia'&&claseSeleccionada&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl shadow-lg p-6 md:p-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-6\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-2xl md:text-3xl font-bold text-gray-800 flex items-center gap-3\",children:[/*#__PURE__*/_jsx(Calendar,{className:\"w-8 h-8 text-purple-600\"}),\"Asistencia - \",claseSeleccionada.nombre]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-4\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:fechaActual,onChange:e=>setFechaActual(e.target.value),className:\"px-4 py-2 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-purple-500\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>window.print(),className:\"bg-gradient-to-r from-green-600 to-teal-600 text-white px-6 py-2 rounded-lg hover:from-green-700 hover:to-teal-700 transition font-bold flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Download,{className:\"w-5 h-5\"}),\"Descargar\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[estudiantes.length===0&&/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-12 text-gray-500\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-lg\",children:\"No hay estudiantes en esta clase\"})}),estudiantes.map(estudiante=>{var _estudiante$asistenci;const asist=contarAsistencias(estudiante);const estadoHoy=(_estudiante$asistenci=estudiante.asistencia)===null||_estudiante$asistenci===void 0?void 0:_estudiante$asistenci[fechaActual];return/*#__PURE__*/_jsx(\"div\",{className:\"bg-gray-50 rounded-xl p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-xl font-bold text-gray-800 mb-2\",children:estudiante.nombre}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-4 text-sm\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-green-600 font-semibold\",children:[\"\\u2713 \",asist.presente,\"P\"]}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-yellow-600 font-semibold\",children:[\"\\u23F0 \",asist.tardanza,\"T\"]}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-red-600 font-semibold\",children:[\"\\u2717 \",asist.ausente,\"A\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2 flex-wrap mt-4 md:mt-0\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>marcarAsistencia(estudiante.id,fechaActual,'presente'),className:\"px-4 md:px-6 py-3 rounded-lg font-semibold transition text-sm md:text-base \".concat(estadoHoy==='presente'?'bg-green-600 text-white':'bg-green-100 text-green-700 hover:bg-green-200'),children:\"Presente\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>marcarAsistencia(estudiante.id,fechaActual,'tardanza'),className:\"px-4 md:px-6 py-3 rounded-lg font-semibold transition text-sm md:text-base \".concat(estadoHoy==='tardanza'?'bg-yellow-600 text-white':'bg-yellow-100 text-yellow-700 hover:bg-yellow-200'),children:\"Tardanza\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>marcarAsistencia(estudiante.id,fechaActual,'ausente'),className:\"px-4 md:px-6 py-3 rounded-lg font-semibold transition text-sm md:text-base \".concat(estadoHoy==='ausente'?'bg-red-600 text-white':'bg-red-100 text-red-700 hover:bg-red-200'),children:\"Ausente\"})]})]})},estudiante.id);})]})]}),view==='notas'&&claseSeleccionada&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl shadow-lg p-6 md:p-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-6\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-2xl md:text-3xl font-bold text-gray-800 flex items-center gap-3\",children:[/*#__PURE__*/_jsx(ClipboardList,{className:\"w-8 h-8 text-purple-600\"}),\"Notas - \",claseSeleccionada.nombre]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-4 flex-wrap\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-purple-100 px-4 md:px-6 py-3 rounded-lg\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-xs md:text-sm text-purple-600 font-semibold\",children:\"Promedio:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"ml-2 text-xl md:text-2xl font-bold text-purple-800\",children:[promedioGeneral(),\"/5\"]})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>window.print(),className:\"bg-gradient-to-r from-purple-600 to-blue-600 text-white px-4 md:px-6 py-3 rounded-lg hover:from-purple-700 hover:to-blue-700 transition font-bold flex items-center gap-2 text-sm md:text-base\",children:[/*#__PURE__*/_jsx(Download,{className:\"w-5 h-5\"}),\"Descargar\"]})]})]}),estudiantesEnRiesgo.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"bg-red-50 border-2 border-red-200 rounded-xl p-6 mb-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start gap-4\",children:[/*#__PURE__*/_jsx(AlertCircle,{className:\"w-6 h-6 text-red-600 flex-shrink-0 mt-1\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"font-bold text-red-900 mb-2\",children:[\"\\u26A0\\uFE0F Estudiantes en Riesgo (\",estudiantesEnRiesgo.length,\")\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-wrap gap-2\",children:estudiantesEnRiesgo.map(e=>/*#__PURE__*/_jsxs(\"span\",{className:\"bg-red-200 text-red-800 px-3 py-1 rounded-lg text-sm font-semibold\",children:[e.nombre,\": \",calcularPromedioFinal(e),\"/5\"]},e.id))})]})]})}),estudiantes.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl shadow-lg p-6 mb-6 border-2 border-purple-200\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-xl font-bold text-gray-800 mb-4 flex items-center gap-2\",children:[\"\\uD83D\\uDCCA Registro R\\xE1pido de Notas - \",new Date().toLocaleDateString('es-PA')]}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"w-full min-w-full\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-purple-600 text-white\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-left font-semibold\",children:\"Estudiante\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-center font-semibold\",children:\"Notas Diarias\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-center font-semibold\",children:\"Apreciaci\\xF3n\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-center font-semibold\",children:\"Examen\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-center font-semibold\",children:\"Promedio\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-center font-semibold\",children:\"Compartir\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:estudiantes.map(estudiante=>/*#__PURE__*/_jsx(FilaNotasRapidas,{estudiante:estudiante,onAgregarNota:agregarNota,calcularPromedioFinal:calcularPromedioFinal,claseSeleccionada:claseSeleccionada,usuario:usuario,actualizarNota:actualizarNota},estudiante.id))})]})}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 mt-3 text-center\",children:\"\\uD83D\\uDCA1 Ingresa las notas (0-5) y presiona \\\"+\\\" para agregar. Las notas se guardan autom\\xE1ticamente.\"})]}),estudiantes.length===0&&/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-12 text-gray-500\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-lg\",children:\"No hay estudiantes en esta clase\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-6\",children:estudiantes.map(estudiante=>/*#__PURE__*/_jsxs(\"div\",{id:\"estudiante-\".concat(estudiante.id),className:\"border-2 border-gray-200 rounded-xl overflow-hidden transition-all duration-300\",children:[/*#__PURE__*/_jsx(\"div\",{onClick:()=>toggleExpansion(estudiante.id),className:\"bg-gradient-to-r from-purple-100 to-blue-100 p-6 cursor-pointer hover:from-purple-200 hover:to-blue-200 transition\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-4 flex-1\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-purple-600 text-white w-12 h-12 rounded-full flex items-center justify-center font-bold text-lg flex-shrink-0\",children:estudiante.nombre.charAt(0).toUpperCase()}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-xl font-bold text-gray-800\",children:estudiante.nombre}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap gap-2 md:gap-4 mt-1 text-xs md:text-sm\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"Diarias: \",calcularTotalSeccion(estudiante.notasDiarias)]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Apreciaci\\xF3n: \",calcularTotalSeccion(estudiante.apreciacion)]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Examen: \",calcularTotalSeccion(estudiante.examen)]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-4 mt-4 md:mt-0\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-right\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xs md:text-sm text-gray-600\",children:\"Promedio\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-2xl md:text-3xl font-bold \".concat(parseFloat(calcularPromedioFinal(estudiante))>=3.5?'text-green-600':parseFloat(calcularPromedioFinal(estudiante))>=3.0?'text-yellow-600':'text-red-600'),children:[calcularPromedioFinal(estudiante),\"/5\"]})]}),expandido[estudiante.id]?/*#__PURE__*/_jsx(ChevronUp,{className:\"w-6 h-6 text-gray-600\"}):/*#__PURE__*/_jsx(ChevronDown,{className:\"w-6 h-6 text-gray-600\"})]})]})}),expandido[estudiante.id]&&/*#__PURE__*/_jsxs(\"div\",{className:\"p-6 space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-4\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"font-bold text-lg text-gray-800\",children:\"\\uD83D\\uDCDD Notas Diarias\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>agregarNota(estudiante.id,'notasDiarias'),className:\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition text-sm font-semibold flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Plus,{className:\"w-4 h-4\"}),\"Agregar\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:estudiante.notasDiarias.map((nota,idx)=>/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 p-4 rounded-lg flex gap-3\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.1\",min:\"0\",max:\"5\",placeholder:\"Nota\",value:nota.valor||'',onChange:e=>actualizarNota(estudiante.id,'notasDiarias',idx,'valor',e.target.value),className:\"flex-1 px-3 py-2 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-blue-500\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:nota.fecha||'',onChange:e=>actualizarNota(estudiante.id,'notasDiarias',idx,'fecha',e.target.value),className:\"px-3 py-2 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-blue-500\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>eliminarNota(estudiante.id,'notasDiarias',idx),className:\"bg-red-500 text-white p-2 rounded-lg hover:bg-red-600 transition\",children:/*#__PURE__*/_jsx(Trash2,{className:\"w-4 h-4\"})})]},idx))}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-2 text-right\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-600\",children:\"Promedio: \"}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-bold text-lg text-blue-600\",children:[calcularTotalSeccion(estudiante.notasDiarias),\"/5\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-4\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"font-bold text-lg text-gray-800\",children:\"\\u2B50 Apreciaci\\xF3n\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>agregarNota(estudiante.id,'apreciacion'),className:\"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition text-sm font-semibold flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Plus,{className:\"w-4 h-4\"}),\"Agregar\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:estudiante.apreciacion.map((nota,idx)=>/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 p-4 rounded-lg flex gap-3\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.1\",min:\"0\",max:\"5\",placeholder:\"Nota\",value:nota.valor||'',onChange:e=>actualizarNota(estudiante.id,'apreciacion',idx,'valor',e.target.value),className:\"flex-1 px-3 py-2 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-green-500\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:nota.fecha||'',onChange:e=>actualizarNota(estudiante.id,'apreciacion',idx,'fecha',e.target.value),className:\"px-3 py-2 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-green-500\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>eliminarNota(estudiante.id,'apreciacion',idx),className:\"bg-red-500 text-white p-2 rounded-lg hover:bg-red-600 transition\",children:/*#__PURE__*/_jsx(Trash2,{className:\"w-4 h-4\"})})]},idx))}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-2 text-right\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-600\",children:\"Promedio: \"}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-bold text-lg text-green-600\",children:[calcularTotalSeccion(estudiante.apreciacion),\"/5\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-4\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"font-bold text-lg text-gray-800\",children:\"\\uD83D\\uDCCB Examen\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>agregarNota(estudiante.id,'examen'),className:\"bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition text-sm font-semibold flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Plus,{className:\"w-4 h-4\"}),\"Agregar\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:estudiante.examen.map((nota,idx)=>/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 p-4 rounded-lg flex gap-3\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.1\",min:\"0\",max:\"5\",placeholder:\"Nota\",value:nota.valor||'',onChange:e=>actualizarNota(estudiante.id,'examen',idx,'valor',e.target.value),className:\"flex-1 px-3 py-2 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-purple-500\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:nota.fecha||'',onChange:e=>actualizarNota(estudiante.id,'examen',idx,'fecha',e.target.value),className:\"px-3 py-2 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-purple-500\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>eliminarNota(estudiante.id,'examen',idx),className:\"bg-red-500 text-white p-2 rounded-lg hover:bg-red-600 transition\",children:/*#__PURE__*/_jsx(Trash2,{className:\"w-4 h-4\"})})]},idx))}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-2 text-right\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-600\",children:\"Promedio: \"}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-bold text-lg text-purple-600\",children:[calcularTotalSeccion(estudiante.examen),\"/5\"]})]})]})]})]},estudiante.id))})]}),view==='progreso'&&claseSeleccionada&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl shadow-lg p-6 md:p-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-8\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-2xl md:text-3xl font-bold text-gray-800 flex items-center gap-3\",children:[/*#__PURE__*/_jsx(TrendingUp,{className:\"w-8 h-8 text-purple-600\"}),\"Dashboard de Progreso - \",claseSeleccionada.nombre]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>window.print(),className:\"bg-gradient-to-r from-purple-600 to-blue-600 text-white px-6 py-3 rounded-lg hover:from-purple-700 hover:to-blue-700 transition font-bold flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Download,{className:\"w-5 h-5\"}),\"Descargar Dashboard\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-xl p-6 text-center\",children:[/*#__PURE__*/_jsx(BarChart3,{className:\"w-8 h-8 mx-auto mb-2\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm opacity-90\",children:\"Promedio General\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-3xl font-bold\",children:[promedioGeneral(),\"/5\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-r from-green-500 to-green-600 text-white rounded-xl p-6 text-center\",children:[/*#__PURE__*/_jsx(Target,{className:\"w-8 h-8 mx-auto mb-2\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm opacity-90\",children:\"Total Estudiantes\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-3xl font-bold\",children:estudiantes.length})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-r from-yellow-500 to-yellow-600 text-white rounded-xl p-6 text-center\",children:[/*#__PURE__*/_jsx(AlertTriangle,{className:\"w-8 h-8 mx-auto mb-2\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm opacity-90\",children:\"En Riesgo\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-3xl font-bold\",children:estudiantesEnRiesgo.length})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-r from-purple-500 to-purple-600 text-white rounded-xl p-6 text-center\",children:[/*#__PURE__*/_jsx(Award,{className:\"w-8 h-8 mx-auto mb-2\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm opacity-90\",children:\"Mejor Promedio\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-3xl font-bold\",children:[estudiantes.length>0?Math.max(...estudiantes.map(e=>parseFloat(calcularPromedioFinal(e)))).toFixed(1):0,\"/5\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 rounded-xl p-6\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-xl font-bold text-gray-800 mb-4 flex items-center gap-2\",children:[/*#__PURE__*/_jsx(BarChart3,{className:\"w-6 h-6 text-purple-600\"}),\"Distribuci\\xF3n de Rendimiento\"]}),/*#__PURE__*/_jsx(DistribucionNotas,{estudiantes:estudiantes,calcularPromedioFinal:calcularPromedioFinal})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 rounded-xl p-6\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-xl font-bold text-gray-800 mb-4 flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Award,{className:\"w-6 h-6 text-purple-600\"}),\"Ranking de Estudiantes\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3\",children:[obtenerRankingEstudiantes().map((estudiante,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between bg-white p-4 rounded-lg border-2 border-gray-200\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-8 h-8 rounded-full flex items-center justify-center font-bold text-white \".concat(index===0?'bg-yellow-500':index===1?'bg-gray-400':index===2?'bg-orange-500':'bg-purple-500'),children:index+1}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-semibold text-gray-800\",children:estudiante.nombre}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600\",children:[estudiante.notasDiarias.length+estudiante.apreciacion.length+estudiante.examen.length,\" notas\"]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-right\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"text-xl font-bold \".concat(estudiante.promedio>=4.5?'text-green-600':estudiante.promedio>=3.5?'text-blue-600':estudiante.promedio>=3.0?'text-yellow-600':'text-red-600'),children:[estudiante.promedio.toFixed(1),\"/5\"]})})]},estudiante.id)),obtenerRankingEstudiantes().length===0&&/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-8 text-gray-500\",children:/*#__PURE__*/_jsx(\"p\",{children:\"No hay datos suficientes para ranking\"})})]})]})]}),estudiantesEnRiesgo.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-red-50 border-2 border-red-200 rounded-xl p-6 mb-8\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-xl font-bold text-red-900 mb-4 flex items-center gap-2\",children:[/*#__PURE__*/_jsx(AlertTriangle,{className:\"w-6 h-6 text-red-600\"}),\"Alertas de Bajo Rendimiento (\",estudiantesEnRiesgo.length,\")\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\",children:estudiantesEnRiesgo.map(estudiante=>{const asistencia=contarAsistencias(estudiante);return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg p-4 border-2 border-red-300\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3 mb-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-red-600 text-white w-10 h-10 rounded-full flex items-center justify-center font-bold\",children:estudiante.nombre.charAt(0).toUpperCase()}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-bold text-red-800\",children:estudiante.nombre}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-red-600\",children:[\"Promedio: \",calcularPromedioFinal(estudiante),\"/5\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-600\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"Asistencia: \",asistencia.presente,\"P \",asistencia.tardanza,\"T \",asistencia.ausente,\"A\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Total notas: \",estudiante.notasDiarias.length+estudiante.apreciacion.length+estudiante.examen.length]})]})]},estudiante.id);})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 rounded-xl p-6\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-xl font-bold text-gray-800 mb-4 flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Users,{className:\"w-6 h-6 text-purple-600\"}),\"M\\xE9tricas por Estudiante\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"w-full bg-white rounded-lg overflow-hidden\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-purple-600 text-white\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-left\",children:\"Estudiante\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-center\",children:\"Promedio\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-center\",children:\"Notas Diarias\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-center\",children:\"Apreciaci\\xF3n\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-center\",children:\"Examen\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-center\",children:\"Asistencia\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:estudiantes.map(estudiante=>{const asistencia=contarAsistencias(estudiante);const totalAsistencias=asistencia.presente+asistencia.tardanza+asistencia.ausente;const porcentajeAsistencia=totalAsistencias>0?Math.round(asistencia.presente/totalAsistencias*100):0;return/*#__PURE__*/_jsxs(\"tr\",{className:\"border-b border-gray-200 hover:bg-gray-50\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-3 font-semibold\",children:estudiante.nombre}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-3 text-center\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"font-bold \".concat(parseFloat(calcularPromedioFinal(estudiante))>=4.5?'text-green-600':parseFloat(calcularPromedioFinal(estudiante))>=3.5?'text-blue-600':parseFloat(calcularPromedioFinal(estudiante))>=3.0?'text-yellow-600':'text-red-600'),children:[calcularPromedioFinal(estudiante),\"/5\"]})}),/*#__PURE__*/_jsxs(\"td\",{className:\"px-4 py-3 text-center text-sm\",children:[calcularTotalSeccion(estudiante.notasDiarias),\" (\",estudiante.notasDiarias.length,\")\"]}),/*#__PURE__*/_jsxs(\"td\",{className:\"px-4 py-3 text-center text-sm\",children:[calcularTotalSeccion(estudiante.apreciacion),\" (\",estudiante.apreciacion.length,\")\"]}),/*#__PURE__*/_jsxs(\"td\",{className:\"px-4 py-3 text-center text-sm\",children:[calcularTotalSeccion(estudiante.examen),\" (\",estudiante.examen.length,\")\"]}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-3 text-center\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"font-semibold \".concat(porcentajeAsistencia>=90?'text-green-600':porcentajeAsistencia>=80?'text-yellow-600':'text-red-600'),children:[porcentajeAsistencia,\"%\"]})})]},estudiante.id);})})]})}),estudiantes.length===0&&/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-8 text-gray-500\",children:/*#__PURE__*/_jsx(\"p\",{children:\"No hay estudiantes en esta clase\"})})]})]}),view==='planificacion'&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl shadow-lg p-6 md:p-8\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-2xl md:text-3xl font-bold text-gray-800 mb-6 flex items-center gap-3\",children:[/*#__PURE__*/_jsx(Sparkles,{className:\"w-8 h-8 text-purple-600\"}),\"Generador de Planes Trimestrales con IA\"]}),!planGenerado?/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-gradient-to-br from-purple-50 to-pink-50 border-2 border-purple-200 rounded-xl p-6 mb-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start gap-4\",children:[/*#__PURE__*/_jsx(Sparkles,{className:\"w-8 h-8 text-purple-600 flex-shrink-0 mt-1\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-bold text-purple-900 text-lg mb-2\",children:\"\\u2728 Planes Trimestrales con IA\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-purple-800 text-sm\",children:\"Genera planes trimestrales completos alineados con el curr\\xEDculo del MEDUCA de Panam\\xE1. Nuestra IA crea contenido detallado con contenidos, competencias, metodolog\\xEDas y evaluaciones espec\\xEDficas para cada trimestre.\"})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-r from-purple-100 to-pink-100 rounded-xl p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold text-gray-800 mb-4\",children:\"Informaci\\xF3n del Plan Trimestral\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Nombre del Profesor\",value:nombreProfesor,onChange:e=>setNombreProfesor(e.target.value),className:\"px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-purple-500\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Instituci\\xF3n Educativa\",value:institucion,onChange:e=>setInstitucion(e.target.value),className:\"px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-purple-500\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Grado (ej: 5to)\",value:gradoPlan,onChange:e=>setGradoPlan(e.target.value),className:\"px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-purple-500\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Materia (ej: Matem\\xE1ticas)\",value:materia,onChange:e=>setMateria(e.target.value),className:\"px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-purple-500\"}),/*#__PURE__*/_jsxs(\"select\",{value:trimestre,onChange:e=>setTrimestre(e.target.value),className:\"px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-purple-500\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"Primer Trimestre\",children:\"Primer Trimestre\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Segundo Trimestre\",children:\"Segundo Trimestre\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Tercer Trimestre\",children:\"Tercer Trimestre\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"md:col-span-2\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 mb-2\",children:\"\\uD83D\\uDCA1 Selecciona el trimestre para el cual deseas generar el plan de estudios completo.\"})})]}),/*#__PURE__*/_jsx(\"button\",{onClick:generarPlanConOpenAI,disabled:generandoPlan||!nombreProfesor||!institucion||!gradoPlan||!materia||!trimestre,className:\"w-full mt-6 py-4 rounded-lg font-bold text-lg flex items-center justify-center gap-3 transition \".concat(generandoPlan||!nombreProfesor||!institucion||!gradoPlan||!materia||!trimestre?'bg-gray-400 cursor-not-allowed':'bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white shadow-lg hover:shadow-xl'),children:generandoPlan?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-6 w-6 border-b-2 border-white\"}),\"Generando Plan Trimestral...\"]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Sparkles,{className:\"w-6 h-6\"}),\"Generar Plan Trimestral con IA\"]})})]})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col md:flex-row justify-between items-start gap-4 mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-2xl font-bold text-gray-800\",children:[\"Plan \",planGenerado.trimestre]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-600 mt-1\",children:[planGenerado.asignatura||planGenerado.materia||materia,\" - \",planGenerado.grado||gradoPlan,\" | \",planGenerado.institucion||institucion]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-500 mt-1\",children:[\"Profesor: \",planGenerado.docente||planGenerado.profesor||nombreProfesor]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-500\",children:[\"Trimestre: \",planGenerado.trimestre,\" | Fecha: \",planGenerado.fecha]}),planGenerado.duracionSemanas&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-500\",children:[\"Duraci\\xF3n: \",planGenerado.duracionSemanas,\" semanas\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-3 flex-wrap\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:descargarPlan,className:\"bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 transition font-bold flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Download,{className:\"w-5 h-5\"}),\"Descargar Plan\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setPlanGenerado(null),className:\"bg-gray-600 text-white px-6 py-3 rounded-lg hover:bg-gray-700 transition font-bold\",children:\"Nuevo Plan\"})]})]}),planGenerado.contenidos&&Array.isArray(planGenerado.contenidos)&&planGenerado.contenidos.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-blue-50 rounded-xl p-6\",children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"text-xl font-bold text-blue-900 mb-4 flex items-center gap-2\",children:[\"\\uD83D\\uDCDA Contenidos del \",planGenerado.trimestre]}),/*#__PURE__*/_jsx(\"ul\",{className:\"space-y-2\",children:planGenerado.contenidos.map((cont,i)=>/*#__PURE__*/_jsxs(\"li\",{className:\"flex gap-3\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-blue-600 font-bold\",children:[i+1,\".\"]}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-800\",children:cont})]},i))})]}),planGenerado.desarrolloClases&&Object.keys(planGenerado.desarrolloClases).length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-r from-teal-50 to-cyan-50 rounded-xl p-6 border-2 border-teal-200\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-xl font-bold text-teal-900 mb-4 flex items-center gap-2\",children:\"\\uD83C\\uDFAF Desarrollo del Contenido para Clases\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-6\",children:Object.entries(planGenerado.desarrolloClases).map(_ref7=>{let[contenidoKey,desarrollo]=_ref7;return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg p-4 border border-teal-100\",children:[/*#__PURE__*/_jsxs(\"h5\",{className:\"font-bold text-lg text-teal-800 mb-3\",children:[\"\\uD83D\\uDCDD \",contenidoKey]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-3\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold text-gray-700\",children:\"Duraci\\xF3n:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"ml-2 text-teal-600\",children:desarrollo.duracion||'3 sesiones de 45 minutos'})]})}),desarrollo.objetivos&&desarrollo.objetivos.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"h6\",{className:\"font-semibold text-gray-700 mb-2\",children:\"Objetivos de Aprendizaje:\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"space-y-1\",children:desarrollo.objetivos.map((objetivo,idx)=>/*#__PURE__*/_jsxs(\"li\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-teal-500\",children:\"\\u2022\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-700\",children:objetivo})]},idx))})]}),desarrollo.materiales&&desarrollo.materiales.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"h6\",{className:\"font-semibold text-gray-700 mb-2\",children:\"Materiales necesarios:\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"space-y-1\",children:desarrollo.materiales.map((material,idx)=>/*#__PURE__*/_jsxs(\"li\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-teal-500\",children:\"\\u2022\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-700\",children:material})]},idx))})]}),desarrollo.fases&&desarrollo.fases.length>0&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h6\",{className:\"font-semibold text-gray-700 mb-2\",children:\"Fases de la actividad:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-3\",children:desarrollo.fases.map((fase,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 rounded-lg p-3\",children:[/*#__PURE__*/_jsxs(\"h7\",{className:\"font-semibold text-gray-800 mb-2\",children:[\"SESI\\xD3N \",index+1,\" - \",fase.titulo||'Desarrollo']}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-2\",children:fase.actividades&&fase.actividades.map((actividad,actIdx)=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2 text-sm\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"font-medium text-teal-600 whitespace-nowrap\",children:[actividad.tiempo,\":\"]}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-700\",children:actividad.descripcion})]},actIdx))})]},index))})]})]},contenidoKey);})})]}),planGenerado.competencias&&Array.isArray(planGenerado.competencias)&&planGenerado.competencias.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-purple-50 rounded-xl p-6\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-xl font-bold text-purple-900 mb-4 flex items-center gap-2\",children:\"\\uD83D\\uDCAA Competencias a Desarrollar\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"space-y-2\",children:planGenerado.competencias.map((comp,i)=>/*#__PURE__*/_jsxs(\"li\",{className:\"flex gap-3\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-purple-600\",children:[i+1,\".\"]}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-800\",children:comp})]},i))})]}),planGenerado.indicadoresLogro&&Array.isArray(planGenerado.indicadoresLogro)&&planGenerado.indicadoresLogro.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-teal-50 rounded-xl p-6\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-xl font-bold text-teal-900 mb-4 flex items-center gap-2\",children:\"\\u2705 Indicadores de Logro\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"space-y-2\",children:planGenerado.indicadoresLogro.map((ind,i)=>/*#__PURE__*/_jsxs(\"li\",{className:\"flex gap-3\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-teal-600\",children:\"\\u2022\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-800\",children:ind})]},i))})]}),planGenerado.metodologia&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-green-50 rounded-xl p-6\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-xl font-bold text-green-900 mb-4 flex items-center gap-2\",children:\"\\uD83D\\uDCD6 Estrategias Metodol\\xF3gicas\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-800\",children:planGenerado.metodologia})]}),planGenerado.recursos&&Array.isArray(planGenerado.recursos)&&planGenerado.recursos.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-indigo-50 rounded-xl p-6\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-xl font-bold text-indigo-900 mb-4 flex items-center gap-2\",children:\"\\uD83D\\uDEE0\\uFE0F Recursos Educativos\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-2\",children:planGenerado.recursos.map((rec,i)=>/*#__PURE__*/_jsxs(\"li\",{className:\"flex gap-2 items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-indigo-600\",children:\"\\u2022\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-800\",children:rec})]},i))})]}),planGenerado.evaluacion&&Array.isArray(planGenerado.evaluacion)&&planGenerado.evaluacion.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-red-50 rounded-xl p-6\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-xl font-bold text-red-900 mb-4 flex items-center gap-2\",children:\"\\uD83D\\uDCCA Instrumentos de Evaluaci\\xF3n\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"space-y-2\",children:planGenerado.evaluacion.map((evalItem,i)=>/*#__PURE__*/_jsxs(\"li\",{className:\"flex gap-3\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-red-600\",children:\"\\u2022\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-800\",children:evalItem})]},i))})]}),planGenerado.adaptaciones&&Array.isArray(planGenerado.adaptaciones)&&planGenerado.adaptaciones.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-orange-50 rounded-xl p-6\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-xl font-bold text-orange-900 mb-4 flex items-center gap-2\",children:\"\\u267F Adaptaciones Curriculares\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"space-y-2\",children:planGenerado.adaptaciones.map((adap,i)=>/*#__PURE__*/_jsxs(\"li\",{className:\"flex gap-3\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-orange-600\",children:\"\\u2022\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-800\",children:adap})]},i))})]}),planGenerado.observaciones&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-100 rounded-xl p-6\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-xl font-bold text-gray-900 mb-4 flex items-center gap-2\",children:\"\\uD83D\\uDCDD Observaciones\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-800\",children:planGenerado.observaciones})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-r from-purple-100 to-pink-100 rounded-xl p-6 text-center\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-purple-800 font-semibold\",children:\"\\u2705 Plan trimestral generado exitosamente con IA\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-purple-600 mt-1\",children:\"Puedes descargar este plan en formato de texto para guardarlo o imprimirlo.\"})]})]})]})]}),/*#__PURE__*/_jsx(\"footer\",{className:\"bg-gray-800 text-white py-6 mt-12\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container mx-auto px-4 text-center\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm\",children:\"\\xA9 2025 Bringo Edu - Asistente Inteligente para Profesores\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-400 mt-2\",children:\"Desarrollado por GermanApp | Potenciado por IA\"})]})})]});}","map":{"version":3,"names":["React","useState","useEffect","Plus","Trash2","Download","AlertCircle","Users","Home","ChevronDown","ChevronUp","ClipboardList","Calendar","Sparkles","User","LogOut","LogIn","TrendingUp","BarChart3","Target","Award","AlertTriangle","Search","Share","Eye","EyeOff","initializeApp","getAuth","createUserWithEmailAndPassword","signInWithEmailAndPassword","signOut","onAuthStateChanged","getFirestore","collection","addDoc","getDocs","updateDoc","deleteDoc","doc","query","where","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","firebaseConfig","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","app","auth","db","DistribucionNotas","_ref","estudiantes","calcularPromedioFinal","calcularDistribucion","distribucion","excelente","bueno","regular","riesgo","forEach","estudiante","promedio","parseFloat","total","length","className","children","Math","round","style","width","concat","FilaNotasRapidas","_ref2","onAgregarNota","claseSeleccionada","usuario","actualizarNota","notaDiaria","setNotaDiaria","notaApreciacion","setNotaApreciacion","notaExamen","setNotaExamen","fecha","setFecha","Date","toISOString","split","handleAgregarNota","tipo","valor","id","error","console","alert","compartirPorWhatsApp","formatoNotas","notas","filter","n","map","join","mensaje","nombre","institucion","toLocaleDateString","notasDiarias","apreciacion","examen","url","encodeURIComponent","window","open","charAt","toUpperCase","type","step","min","max","placeholder","value","onChange","e","target","onClick","ModalLogin","_ref3","mostrarLogin","setMostrarLogin","email","setEmail","password","setPassword","errorAuth","cargandoAuth","iniciarSesion","limpiarFormulariosAuth","setMostrarRegistro","mostrarPassword","setMostrarPassword","handleSubmit","preventDefault","onSubmit","required","disabled","ModalRegistro","_ref4","mostrarRegistro","nombreUsuario","setNombreUsuario","confirmarPassword","setConfirmarPassword","registrarUsuario","mostrarConfirmarPassword","setMostrarConfirmarPassword","minLength","BarraBusquedaEstudiantes","_ref5","onBuscarEstudiante","busquedaEstudiante","setBusquedaEstudiante","buscarYRedirigirEstudiante","trim","estudianteEncontrado","find","toLowerCase","includes","onKeyPress","key","AsistenteProfesor","setUsuario","setErrorAuth","setCargandoAuth","view","setView","clases","setClases","setClaseSeleccionada","nombreClase","setNombreClase","grado","setGrado","seccion","setSeccion","setEstudiantes","nombreEstudiante","setNombreEstudiante","expandido","setExpandido","fechaActual","setFechaActual","nombreProfesor","setNombreProfesor","setInstitucion","gradoPlan","setGradoPlan","materia","setMateria","trimestre","setTrimestre","planGenerado","setPlanGenerado","generandoPlan","setGenerandoPlan","unsubscribe","user","displayName","uid","cargarClases","userId","q","querySnapshot","clasesData","push","_objectSpread","data","userCredential","code","message","cerrarSesion","generarPlanConOpenAI","BACKEND_URL","response","fetch","method","headers","body","JSON","stringify","incluirDesarrolloClases","ok","errorData","json","catch","Error","status","contenidos","Array","isArray","generadoPorIA","descargarPlan","contenido","repeat","docente","profesor","asignatura","anioEscolar","getFullYear","duracionSemanas","cont","i","desarrolloClases","Object","keys","entries","_ref6","contenidoKey","desarrollo","duracion","objetivos","objetivo","materiales","material","fases","fase","index","titulo","actividades","actividad","tiempo","descripcion","competencias","comp","indicadoresLogro","ind","metodologia","recursos","rec","evaluacion","evalItem","adaptaciones","adap","observaciones","elemento","document","createElement","archivo","Blob","href","URL","createObjectURL","download","replace","appendChild","click","removeChild","agregarClase","nuevaClase","fechaCreacion","docRef","eliminarClase","confirm","c","seleccionarClase","clase","agregarEstudiante","nuevoEstudiante","now","toString","asistencia","nuevosEstudiantes","clasesActualizadas","marcarAsistencia","estudianteId","estado","agregarNota","arguments","undefined","nuevaNota","indice","campo","nuevasNotas","eliminarNota","_","eliminarEstudiante","contarAsistencias","registros","presente","values","v","ausente","tardanza","calcularTotalSeccion","numeros","isNaN","reduce","a","b","toFixed","totalDiarias","totalApreciacion","totalExamen","totales","t","toggleExpansion","prev","setTimeout","getElementById","scrollIntoView","behavior","block","classList","add","remove","estudiantesEnRiesgo","promedioGeneral","promedios","p","obtenerRankingEstudiantes","sort","slice","_clase$estudiantes","stopPropagation","print","_estudiante$asistenci","asist","estadoHoy","nota","idx","totalAsistencias","porcentajeAsistencia","_ref7","actIdx"],"sources":["C:/bringo-edu/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Plus, Trash2, Download, AlertCircle, Users, Home, ChevronDown, ChevronUp, ClipboardList, Calendar, Sparkles, User, LogOut, LogIn, TrendingUp, BarChart3, Target, Award, AlertTriangle, Search, Share, Eye, EyeOff } from 'lucide-react';\nimport { initializeApp } from 'firebase/app';\nimport { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, signOut, onAuthStateChanged } from 'firebase/auth';\nimport { getFirestore, collection, addDoc, getDocs, updateDoc, deleteDoc, doc, query, where } from 'firebase/firestore';\n\n// Configuraci√≥n de Firebase\nconst firebaseConfig = {\n  apiKey: \"AIzaSyCdRpj7y3L4PIwWiJgzYRHDU3XxcIVfmW4\",\n  authDomain: \"bringoedu.firebaseapp.com\",\n  projectId: \"bringoedu\",\n  storageBucket: \"bringoedu.firebasestorage.app\", \n  messagingSenderId: \"667720262345\",\n  appId: \"1:667720262345:web:ad55dd71c19ffcb73fa318\"\n};\n\n// Inicializar Firebase\nconst app = initializeApp(firebaseConfig);\nconst auth = getAuth(app);\nconst db = getFirestore(app);\n\n// Componente para gr√°fico de distribuci√≥n\nconst DistribucionNotas = ({ estudiantes, calcularPromedioFinal }) => {\n  const calcularDistribucion = () => {\n    const distribucion = {\n      excelente: 0, // 4.5 - 5.0\n      bueno: 0,     // 3.5 - 4.4\n      regular: 0,   // 3.0 - 3.4\n      riesgo: 0     // 0 - 2.9\n    };\n\n    estudiantes.forEach(estudiante => {\n      const promedio = parseFloat(calcularPromedioFinal(estudiante));\n      if (promedio >= 4.5) distribucion.excelente++;\n      else if (promedio >= 3.5) distribucion.bueno++;\n      else if (promedio >= 3.0) distribucion.regular++;\n      else if (promedio > 0) distribucion.riesgo++;\n    });\n\n    return distribucion;\n  };\n\n  const distribucion = calcularDistribucion();\n  const total = estudiantes.length;\n  \n  if (total === 0) {\n    return (\n      <div className=\"text-center py-8 text-gray-500\">\n        <p>No hay datos suficientes</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-4\">\n      <div className=\"flex items-center justify-between\">\n        <span className=\"text-sm font-semibold text-green-600\">Excelente (4.5-5.0)</span>\n        <span className=\"text-sm font-bold\">{distribucion.excelente} ({Math.round((distribucion.excelente/total)*100)}%)</span>\n      </div>\n      <div className=\"w-full bg-gray-200 rounded-full h-3\">\n        <div \n          className=\"bg-green-500 h-3 rounded-full transition-all duration-500\"\n          style={{ width: `${(distribucion.excelente/total)*100}%` }}\n        ></div>\n      </div>\n\n      <div className=\"flex items-center justify-between\">\n        <span className=\"text-sm font-semibold text-blue-600\">Bueno (3.5-4.4)</span>\n        <span className=\"text-sm font-bold\">{distribucion.bueno} ({Math.round((distribucion.bueno/total)*100)}%)</span>\n      </div>\n      <div className=\"w-full bg-gray-200 rounded-full h-3\">\n        <div \n          className=\"bg-blue-500 h-3 rounded-full transition-all duration-500\"\n          style={{ width: `${(distribucion.bueno/total)*100}%` }}\n        ></div>\n      </div>\n\n      <div className=\"flex items-center justify-between\">\n        <span className=\"text-sm font-semibold text-yellow-600\">Regular (3.0-3.4)</span>\n        <span className=\"text-sm font-bold\">{distribucion.regular} ({Math.round((distribucion.regular/total)*100)}%)</span>\n      </div>\n      <div className=\"w-full bg-gray-200 rounded-full h-3\">\n        <div \n          className=\"bg-yellow-500 h-3 rounded-full transition-all duration-500\"\n          style={{ width: `${(distribucion.regular/total)*100}%` }}\n        ></div>\n      </div>\n\n      <div className=\"flex items-center justify-between\">\n        <span className=\"text-sm font-semibold text-red-600\">En Riesgo (0-2.9)</span>\n        <span className=\"text-sm font-bold\">{distribucion.riesgo} ({Math.round((distribucion.riesgo/total)*100)}%)</span>\n      </div>\n      <div className=\"w-full bg-gray-200 rounded-full h-3\">\n        <div \n          className=\"bg-red-500 h-3 rounded-full transition-all duration-500\"\n          style={{ width: `${(distribucion.riesgo/total)*100}%` }}\n        ></div>\n      </div>\n    </div>\n  );\n};\n\n// Componente para Fila de Notas R√°pidas - CORREGIDO\nconst FilaNotasRapidas = ({ estudiante, onAgregarNota, calcularPromedioFinal, claseSeleccionada, usuario, actualizarNota }) => {\n  const [notaDiaria, setNotaDiaria] = useState('');\n  const [notaApreciacion, setNotaApreciacion] = useState('');\n  const [notaExamen, setNotaExamen] = useState('');\n  const [fecha, setFecha] = useState(new Date().toISOString().split('T')[0]);\n\n  const handleAgregarNota = async (tipo, valor) => {\n    if (valor && parseFloat(valor) >= 0 && parseFloat(valor) <= 5) {\n      try {\n        await onAgregarNota(estudiante.id, tipo, parseFloat(valor), fecha);\n        \n        // Limpiar el campo\n        if (tipo === 'notasDiarias') setNotaDiaria('');\n        if (tipo === 'apreciacion') setNotaApreciacion('');\n        if (tipo === 'examen') setNotaExamen('');\n\n      } catch (error) {\n        console.error('Error agregando nota:', error);\n        alert('Error al agregar la nota');\n      }\n    } else {\n      alert('Por favor ingresa una nota v√°lida entre 0 y 5');\n    }\n  };\n\n  const compartirPorWhatsApp = () => {\n    const formatoNotas = (notas) => {\n      return notas\n        .filter(n => n.valor && parseFloat(n.valor) > 0)\n        .map(n => `üìÖ ${n.fecha}: ${n.valor}/5.0`)\n        .join('\\n') || 'üì≠ Sin notas registradas';\n    };\n\n    const mensaje = `üìä *REPORTE DE NOTAS - ${claseSeleccionada?.nombre}*\n\n*Estudiante:* ${estudiante.nombre}\n*Profesor:* ${usuario?.nombre}\n*Instituci√≥n:* ${claseSeleccionada?.institucion || 'Bringo Edu'}\n*Fecha de reporte:* ${new Date().toLocaleDateString('es-PA')}\n\n*üìù NOTAS DIARIAS:*\n${formatoNotas(estudiante.notasDiarias)}\n\n*‚≠ê APRECIACI√ìN:*\n${formatoNotas(estudiante.apreciacion)}\n\n*üìã EXAMEN:*\n${formatoNotas(estudiante.examen)}\n\n*üèÜ PROMEDIO FINAL:* ${calcularPromedioFinal(estudiante)}/5.0\n\n---\nGenerado con Bringo Edu üìö | Transparente y Confiable`;\n\n    const url = `https://wa.me/?text=${encodeURIComponent(mensaje)}`;\n    window.open(url, '_blank');\n  };\n\n  return (\n    <tr className=\"border-b border-gray-200 hover:bg-gray-50\">\n      <td className=\"px-4 py-3 font-semibold\">\n        <div className=\"flex items-center gap-3\">\n          <div className=\"bg-purple-600 text-white w-8 h-8 rounded-full flex items-center justify-center font-bold text-sm\">\n            {estudiante.nombre.charAt(0).toUpperCase()}\n          </div>\n          <span>{estudiante.nombre}</span>\n        </div>\n      </td>\n      \n      <td className=\"px-4 py-3\">\n        <div className=\"flex gap-2\">\n          <input\n            type=\"number\"\n            step=\"0.1\"\n            min=\"0\"\n            max=\"5\"\n            placeholder=\"0-5\"\n            value={notaDiaria}\n            onChange={(e) => setNotaDiaria(e.target.value)}\n            className=\"w-20 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500 text-center\"\n          />\n          <button\n            onClick={() => handleAgregarNota('notasDiarias', notaDiaria)}\n            className=\"bg-blue-600 text-white px-3 py-2 rounded-lg hover:bg-blue-700 transition text-sm font-semibold\"\n          >\n            +\n          </button>\n        </div>\n      </td>\n      \n      <td className=\"px-4 py-3\">\n        <div className=\"flex gap-2\">\n          <input\n            type=\"number\"\n            step=\"0.1\"\n            min=\"0\"\n            max=\"5\"\n            placeholder=\"0-5\"\n            value={notaApreciacion}\n            onChange={(e) => setNotaApreciacion(e.target.value)}\n            className=\"w-20 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-green-500 text-center\"\n          />\n          <button\n            onClick={() => handleAgregarNota('apreciacion', notaApreciacion)}\n            className=\"bg-green-600 text-white px-3 py-2 rounded-lg hover:bg-green-700 transition text-sm font-semibold\"\n          >\n            +\n          </button>\n        </div>\n      </td>\n      \n      <td className=\"px-4 py-3\">\n        <div className=\"flex gap-2\">\n          <input\n            type=\"number\"\n            step=\"0.1\"\n            min=\"0\"\n            max=\"5\"\n            placeholder=\"0-5\"\n            value={notaExamen}\n            onChange={(e) => setNotaExamen(e.target.value)}\n            className=\"w-20 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-purple-500 text-center\"\n          />\n          <button\n            onClick={() => handleAgregarNota('examen', notaExamen)}\n            className=\"bg-purple-600 text-white px-3 py-2 rounded-lg hover:bg-purple-700 transition text-sm font-semibold\"\n          >\n            +\n          </button>\n        </div>\n      </td>\n      \n      <td className=\"px-4 py-3 text-center\">\n        <span className={`text-xl font-bold ${\n          parseFloat(calcularPromedioFinal(estudiante)) >= 4.5 ? 'text-green-600' :\n          parseFloat(calcularPromedioFinal(estudiante)) >= 3.5 ? 'text-blue-600' :\n          parseFloat(calcularPromedioFinal(estudiante)) >= 3.0 ? 'text-yellow-600' : 'text-red-600'\n        }`}>\n          {calcularPromedioFinal(estudiante)}\n        </span>\n      </td>\n      \n      <td className=\"px-4 py-3 text-center\">\n        <button\n          onClick={compartirPorWhatsApp}\n          className=\"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition font-semibold flex items-center gap-2 text-sm\"\n        >\n          <Share className=\"w-4 h-4\" />\n          WhatsApp\n        </button>\n      </td>\n    </tr>\n  );\n};\n\n// Componente de Modal Login MEJORADO con toggle de contrase√±a\nconst ModalLogin = ({ \n  mostrarLogin, \n  setMostrarLogin, \n  email, \n  setEmail, \n  password, \n  setPassword, \n  errorAuth, \n  cargandoAuth, \n  iniciarSesion, \n  limpiarFormulariosAuth,\n  setMostrarRegistro \n}) => {\n  const [mostrarPassword, setMostrarPassword] = useState(false);\n\n  if (!mostrarLogin) return null;\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    iniciarSesion();\n  };\n\n  return (\n    <div className=\"fixed inset-0 bg-gradient-to-br from-purple-900/95 via-blue-900/95 to-indigo-900/95 backdrop-blur-sm flex items-center justify-center z-50 p-4\">\n      <div className=\"bg-white rounded-3xl shadow-2xl max-w-md w-full overflow-hidden transform transition-all\">\n        <div className=\"bg-gradient-to-r from-purple-600 via-blue-600 to-indigo-600 p-8 text-center\">\n          <div className=\"inline-block bg-white rounded-full p-4 mb-4 shadow-lg\">\n            <LogIn className=\"w-8 h-8 text-purple-600\" />\n          </div>\n          <h3 className=\"text-3xl font-bold text-white mb-2\">¬°Bienvenido de nuevo!</h3>\n          <p className=\"text-purple-100 text-sm\">Ingresa a tu cuenta de Bringo Edu</p>\n        </div>\n        \n        <form onSubmit={handleSubmit} className=\"p-8\">\n          {errorAuth && (\n            <div className=\"bg-red-50 border-2 border-red-200 rounded-lg p-3 mb-4\">\n              <p className=\"text-red-800 text-sm font-semibold\">{errorAuth}</p>\n            </div>\n          )}\n          \n          <div className=\"space-y-5\">\n            <div>\n              <label className=\"flex items-center gap-2 text-sm font-bold text-gray-700 mb-2\">\n                <span className=\"text-purple-600\">üìß</span> Email\n              </label>\n              <input\n                type=\"email\"\n                placeholder=\"profesor@ejemplo.com\"\n                value={email}\n                onChange={(e) => setEmail(e.target.value)}\n                className=\"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:border-purple-500 focus:ring-2 focus:ring-purple-200 transition-all\"\n                required\n              />\n            </div>\n            \n            <div>\n              <label className=\"flex items-center gap-2 text-sm font-bold text-gray-700 mb-2\">\n                <span className=\"text-purple-600\">üîí</span> Contrase√±a\n              </label>\n              <div className=\"relative\">\n                <input\n                  type={mostrarPassword ? \"text\" : \"password\"}\n                  placeholder=\"‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢\"\n                  value={password}\n                  onChange={(e) => setPassword(e.target.value)}\n                  className=\"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:border-purple-500 focus:ring-2 focus:ring-purple-200 transition-all pr-12\"\n                  required\n                />\n                <button\n                  type=\"button\"\n                  onClick={() => setMostrarPassword(!mostrarPassword)}\n                  className=\"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700 transition\"\n                >\n                  {mostrarPassword ? <EyeOff className=\"w-5 h-5\" /> : <Eye className=\"w-5 h-5\" />}\n                </button>\n              </div>\n            </div>\n          </div>\n          \n          <button\n            type=\"submit\"\n            disabled={cargandoAuth}\n            className={`w-full mt-8 py-4 rounded-xl font-bold text-lg shadow-lg transition-all ${\n              cargandoAuth\n                ? 'bg-gray-400 cursor-not-allowed'\n                : 'bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 hover:shadow-xl transform hover:scale-[1.02]'\n            } text-white`}\n          >\n            {cargandoAuth ? 'Iniciando sesi√≥n...' : 'Iniciar Sesi√≥n'}\n          </button>\n          \n          <button\n            type=\"button\"\n            onClick={() => {\n              setMostrarLogin(false);\n              limpiarFormulariosAuth();\n            }}\n            className=\"w-full mt-3 bg-gray-100 text-gray-700 py-3 rounded-xl hover:bg-gray-200 transition font-semibold\"\n          >\n            Cancelar\n          </button>\n          \n          <div className=\"mt-6 text-center\">\n            <p className=\"text-gray-600 text-sm mb-2\">¬øNo tienes cuenta?</p>\n            <button\n              type=\"button\"\n              onClick={() => {\n                setMostrarLogin(false);\n                setMostrarRegistro(true);\n              }}\n              className=\"text-purple-600 hover:text-purple-800 font-bold text-lg hover:underline\"\n            >\n              Reg√≠strate aqu√≠\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n};\n\n// Componente de Modal Registro MEJORADO con toggle de contrase√±a\nconst ModalRegistro = ({ \n  mostrarRegistro, \n  setMostrarRegistro, \n  email, \n  setEmail, \n  password, \n  setPassword, \n  nombreUsuario, \n  setNombreUsuario, \n  confirmarPassword, \n  setConfirmarPassword, \n  errorAuth, \n  cargandoAuth, \n  registrarUsuario, \n  limpiarFormulariosAuth,\n  setMostrarLogin \n}) => {\n  const [mostrarPassword, setMostrarPassword] = useState(false);\n  const [mostrarConfirmarPassword, setMostrarConfirmarPassword] = useState(false);\n\n  if (!mostrarRegistro) return null;\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    registrarUsuario();\n  };\n\n  return (\n    <div className=\"fixed inset-0 bg-gradient-to-br from-green-900/95 via-teal-900/95 to-blue-900/95 backdrop-blur-sm flex items-center justify-center z-50 p-4\">\n      <div className=\"bg-white rounded-3xl shadow-2xl max-w-md w-full overflow-hidden transform transition-all\">\n        <div className=\"bg-gradient-to-r from-green-600 via-teal-600 to-blue-600 p-8 text-center\">\n          <div className=\"inline-block bg-white rounded-full p-4 mb-4 shadow-lg\">\n            <User className=\"w-8 h-8 text-green-600\" />\n          </div>\n          <h3 className=\"text-3xl font-bold text-white mb-2\">¬°√önete a Bringo Edu!</h3>\n          <p className=\"text-green-100 text-sm\">Crea tu cuenta y comienza a gestionar tus clases</p>\n        </div>\n        \n        <form onSubmit={handleSubmit} className=\"p-8\">\n          {errorAuth && (\n            <div className=\"bg-red-50 border-2 border-red-200 rounded-lg p-3 mb-4\">\n              <p className=\"text-red-800 text-sm font-semibold\">{errorAuth}</p>\n            </div>\n          )}\n          \n          <div className=\"space-y-5\">\n            <div>\n              <label className=\"flex items-center gap-2 text-sm font-bold text-gray-700 mb-2\">\n                <span className=\"text-green-600\">üë§</span> Nombre Completo\n              </label>\n              <input\n                type=\"text\"\n                placeholder=\"Prof. Juan P√©rez\"\n                value={nombreUsuario}\n                onChange={(e) => setNombreUsuario(e.target.value)}\n                className=\"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:border-green-500 focus:ring-2 focus:ring-green-200 transition-all\"\n                required\n              />\n            </div>\n            \n            <div>\n              <label className=\"flex items-center gap-2 text-sm font-bold text-gray-700 mb-2\">\n                <span className=\"text-green-600\">üìß</span> Email\n              </label>\n              <input\n                type=\"email\"\n                placeholder=\"profesor@escuela.edu\"\n                value={email}\n                onChange={(e) => setEmail(e.target.value)}\n                className=\"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:border-green-500 focus:ring-2 focus:ring-green-200 transition-all\"\n                required\n              />\n            </div>\n            \n            <div>\n              <label className=\"flex items-center gap-2 text-sm font-bold text-gray-700 mb-2\">\n                <span className=\"text-green-600\">üîí</span> Contrase√±a\n              </label>\n              <div className=\"relative\">\n                <input\n                  type={mostrarPassword ? \"text\" : \"password\"}\n                  placeholder=\"M√≠nimo 6 caracteres\"\n                  value={password}\n                  onChange={(e) => setPassword(e.target.value)}\n                  className=\"w-full px-4 py-3 border-2 border-gray-300 rounded-xl focus:outline-none focus:border-green-500 focus:ring-2 focus:ring-green-200 transition-all pr-12\"\n                  required\n                  minLength={6}\n                />\n                <button\n                  type=\"button\"\n                  onClick={() => setMostrarPassword(!mostrarPassword)}\n                  className=\"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700 transition\"\n                >\n                  {mostrarPassword ? <EyeOff className=\"w-5 h-5\" /> : <Eye className=\"w-5 h-5\" />}\n                </button>\n              </div>\n              <p className=\"text-xs text-gray-500 mt-1 ml-1\">Usa letras, n√∫meros y s√≠mbolos</p>\n            </div>\n            \n            <div>\n              <label className=\"flex items-center gap-2 text-sm font-bold text-gray-700 mb-2\">\n                <span className=\"text-green-600\">‚úÖ</span> Confirmar Contrase√±a\n              </label>\n              <div className=\"relative\">\n                <input\n                  type={mostrarConfirmarPassword ? \"text\" : \"password\"}\n                  placeholder=\"Repite tu contrase√±a\"\n                  value={confirmarPassword}\n                  onChange={(e) => setConfirmarPassword(e.target.value)}\n                  className=\"w-full px-4 py-3 border-2 border-gray-300 rounded-xl focus:outline-none focus:border-green-500 focus:ring-2 focus:ring-green-200 transition-all pr-12\"\n                  required\n                />\n                <button\n                  type=\"button\"\n                  onClick={() => setMostrarConfirmarPassword(!mostrarConfirmarPassword)}\n                  className=\"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700 transition\"\n                >\n                  {mostrarConfirmarPassword ? <EyeOff className=\"w-5 h-5\" /> : <Eye className=\"w-5 h-5\" />}\n                </button>\n              </div>\n            </div>\n          </div>\n          \n          <button\n            type=\"submit\"\n            disabled={cargandoAuth}\n            className={`w-full mt-8 py-4 rounded-xl font-bold text-lg shadow-lg transition-all ${\n              cargandoAuth\n                ? 'bg-gray-400 cursor-not-allowed'\n                : 'bg-gradient-to-r from-green-600 to-teal-600 hover:from-green-700 hover:to-teal-700 hover:shadow-xl transform hover:scale-[1.02]'\n            } text-white`}\n          >\n            {cargandoAuth ? 'Creando cuenta...' : 'Crear Cuenta'}\n          </button>\n          \n          <button\n            type=\"button\"\n            onClick={() => {\n              setMostrarRegistro(false);\n              limpiarFormulariosAuth();\n            }}\n            className=\"w-full mt-3 bg-gray-100 text-gray-700 py-3 rounded-xl hover:bg-gray-200 transition font-semibold\"\n          >\n            Cancelar\n          </button>\n          \n          <div className=\"mt-6 text-center\">\n            <p className=\"text-gray-600 text-sm mb-2\">¬øYa tienes cuenta?</p>\n            <button\n              type=\"button\"\n              onClick={() => {\n                setMostrarRegistro(false);\n                setMostrarLogin(true);\n              }}\n              className=\"text-green-600 hover:text-green-800 font-bold text-lg hover:underline\"\n            >\n              Inicia sesi√≥n aqu√≠\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n};\n\n// Componente de Barra de B√∫squeda de ESTUDIANTES para Home\nconst BarraBusquedaEstudiantes = ({ estudiantes, onBuscarEstudiante, busquedaEstudiante, setBusquedaEstudiante }) => {\n  const buscarYRedirigirEstudiante = (nombre) => {\n    if (!nombre.trim()) return;\n    \n    const estudianteEncontrado = estudiantes.find(e => \n      e.nombre.toLowerCase().includes(nombre.toLowerCase())\n    );\n    \n    if (estudianteEncontrado) {\n      onBuscarEstudiante(estudianteEncontrado);\n      setBusquedaEstudiante('');\n    } else {\n      alert('Estudiante no encontrado');\n    }\n  };\n\n  return (\n    <div className=\"bg-gradient-to-r from-blue-100 to-purple-100 rounded-xl p-4 mb-6\">\n      <div className=\"flex flex-col md:flex-row gap-4 items-center\">\n        <div className=\"flex-1 w-full\">\n          <label className=\"block text-sm font-bold text-gray-700 mb-2\">\n            üîç Buscar Estudiante\n          </label>\n          <div className=\"flex gap-2\">\n            <input\n              type=\"text\"\n              placeholder=\"Escribe el nombre del estudiante...\"\n              value={busquedaEstudiante}\n              onChange={(e) => setBusquedaEstudiante(e.target.value)}\n              onKeyPress={(e) => e.key === 'Enter' && buscarYRedirigirEstudiante(busquedaEstudiante)}\n              className=\"flex-1 px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-purple-500 text-sm md:text-base\"\n            />\n            <button\n              onClick={() => buscarYRedirigirEstudiante(busquedaEstudiante)}\n              className=\"bg-purple-600 text-white px-4 md:px-6 py-3 rounded-lg hover:bg-purple-700 transition font-bold flex items-center gap-2 text-sm md:text-base\"\n            >\n              <Search className=\"w-4 h-4 md:w-5 md:h-5\" />\n              <span className=\"hidden sm:inline\">Buscar</span>\n            </button>\n          </div>\n          <p className=\"text-xs text-gray-600 mt-2\">\n            üí° Encuentra r√°pidamente estudiantes por nombre\n          </p>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default function AsistenteProfesor() {\n  const [usuario, setUsuario] = useState(null);\n  const [mostrarLogin, setMostrarLogin] = useState(false);\n  const [mostrarRegistro, setMostrarRegistro] = useState(false);\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [nombreUsuario, setNombreUsuario] = useState('');\n  const [confirmarPassword, setConfirmarPassword] = useState('');\n  const [errorAuth, setErrorAuth] = useState('');\n  const [cargandoAuth, setCargandoAuth] = useState(false);\n  \n  const [view, setView] = useState('home');\n  const [clases, setClases] = useState([]);\n  const [claseSeleccionada, setClaseSeleccionada] = useState(null);\n  const [nombreClase, setNombreClase] = useState('');\n  const [grado, setGrado] = useState('');\n  const [seccion, setSeccion] = useState('');\n  const [estudiantes, setEstudiantes] = useState([]);\n  const [nombreEstudiante, setNombreEstudiante] = useState('');\n  const [expandido, setExpandido] = useState({});\n  const [fechaActual, setFechaActual] = useState(new Date().toISOString().split('T')[0]);\n  \n  const [nombreProfesor, setNombreProfesor] = useState('');\n  const [institucion, setInstitucion] = useState('');\n  const [gradoPlan, setGradoPlan] = useState('');\n  const [materia, setMateria] = useState('');\n  const [trimestre, setTrimestre] = useState('Primer Trimestre');\n  const [planGenerado, setPlanGenerado] = useState(null);\n  const [generandoPlan, setGenerandoPlan] = useState(false);\n\n  // Estado para b√∫squeda de estudiantes - MANTENIDO\n  const [busquedaEstudiante, setBusquedaEstudiante] = useState('');\n\n  // Efecto para manejar el estado de autenticaci√≥n\n  useEffect(() => {\n    const unsubscribe = onAuthStateChanged(auth, (user) => {\n      if (user) {\n        setUsuario({ \n          email: user.email, \n          nombre: user.displayName || user.email.split('@')[0],\n          uid: user.uid \n        });\n        cargarClases(user.uid);\n      } else {\n        setUsuario(null);\n        setClases([]);\n      }\n    });\n    return () => unsubscribe();\n  }, []);\n\n  // Cargar clases desde Firestore\n  const cargarClases = async (userId) => {\n    try {\n      const q = query(collection(db, 'clases'), where('userId', '==', userId));\n      const querySnapshot = await getDocs(q);\n      const clasesData = [];\n      querySnapshot.forEach((doc) => {\n        clasesData.push({ id: doc.id, ...doc.data() });\n      });\n      setClases(clasesData);\n    } catch (error) {\n      console.error('Error cargando clases:', error);\n    }\n  };\n\n  const registrarUsuario = async () => {\n    setErrorAuth('');\n    \n    if (!email || !password || !nombreUsuario) {\n      setErrorAuth('Por favor completa todos los campos');\n      return;\n    }\n    \n    if (password !== confirmarPassword) {\n      setErrorAuth('Las contrase√±as no coinciden');\n      return;\n    }\n    \n    if (password.length < 6) {\n      setErrorAuth('La contrase√±a debe tener al menos 6 caracteres');\n      return;\n    }\n\n    setCargandoAuth(true);\n    \n    try {\n      const userCredential = await createUserWithEmailAndPassword(auth, email, password);\n      setUsuario({ \n        email: userCredential.user.email, \n        nombre: nombreUsuario,\n        uid: userCredential.user.uid \n      });\n      setMostrarRegistro(false);\n      limpiarFormulariosAuth();\n    } catch (error) {\n      if (error.code === 'auth/email-already-in-use') {\n        setErrorAuth('Este correo ya est√° registrado');\n      } else if (error.code === 'auth/weak-password') {\n        setErrorAuth('La contrase√±a es muy d√©bil');\n      } else {\n        setErrorAuth('Error al registrar: ' + error.message);\n      }\n    } finally {\n      setCargandoAuth(false);\n    }\n  };\n\n  const iniciarSesion = async () => {\n    setErrorAuth('');\n    \n    if (!email || !password) {\n      setErrorAuth('Por favor ingresa email y contrase√±a');\n      return;\n    }\n\n    setCargandoAuth(true);\n\n    try {\n      const userCredential = await signInWithEmailAndPassword(auth, email, password);\n      setUsuario({ \n        email: userCredential.user.email, \n        nombre: userCredential.user.displayName || userCredential.user.email.split('@')[0],\n        uid: userCredential.user.uid \n      });\n      setMostrarLogin(false);\n      limpiarFormulariosAuth();\n    } catch (error) {\n      if (error.code === 'auth/user-not-found') {\n        setErrorAuth('Usuario no encontrado');\n      } else if (error.code === 'auth/wrong-password') {\n        setErrorAuth('Contrase√±a incorrecta');\n      } else {\n        setErrorAuth('Error al iniciar sesi√≥n: ' + error.message);\n      }\n    } finally {\n      setCargandoAuth(false);\n    }\n  };\n\n  const cerrarSesion = async () => {\n    try {\n      await signOut(auth);\n      setUsuario(null);\n      setView('home');\n      setClaseSeleccionada(null);\n      setClases([]);\n    } catch (error) {\n      console.error('Error al cerrar sesi√≥n:', error);\n    }\n  };\n\n  const limpiarFormulariosAuth = () => {\n    setEmail('');\n    setPassword('');\n    setNombreUsuario('');\n    setConfirmarPassword('');\n    setErrorAuth('');\n  };\n\n  // FUNCI√ìN MEJORADA: Generar plan trimestral con NUEVO campo\n  const generarPlanConOpenAI = async () => {\n    if (!nombreProfesor.trim() || !institucion.trim() || !gradoPlan.trim() || !materia.trim() || !trimestre.trim()) {\n      alert('Por favor completa todos los campos');\n      return;\n    }\n\n    setGenerandoPlan(true);\n\n    try {\n      const BACKEND_URL = 'https://bringo-edu-backend-2.onrender.com/api/generate-plan';\n\n      const response = await fetch(BACKEND_URL, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          nombreProfesor,\n          institucion,\n          gradoPlan,\n          materia,\n          trimestre,\n          incluirDesarrolloClases: true\n        })\n      });\n\n      if (!response.ok) {\n        const errorData = await response.json().catch(() => ({ error: 'Error desconocido' }));\n        throw new Error(errorData.error || `Error ${response.status} del servidor`);\n      }\n\n      const data = await response.json();\n      \n      if (!data.contenidos || !Array.isArray(data.contenidos) || data.contenidos.length === 0) {\n        alert('El servicio de IA no gener√≥ contenido. Intenta nuevamente.');\n        return;\n      }\n      \n      setPlanGenerado({\n        ...data,\n        fecha: data.fecha || new Date().toLocaleDateString('es-PA'),\n        generadoPorIA: true\n      });\n\n    } catch (error) {\n      console.error('‚ùå Error al generar plan:', error);\n      alert(`Error al generar el plan: ${error.message}`);\n    } finally {\n      setGenerandoPlan(false);\n    }\n  };\n\n  // FUNCI√ìN MEJORADA: Descargar plan trimestral con NUEVO campo\n  const descargarPlan = () => {\n    if (!planGenerado) return;\n\n    let contenido = `PLAN TRIMESTRAL - BRINGO EDU\\n`;\n    contenido += `${'='.repeat(80)}\\n\\n`;\n    \n    contenido += `INFORMACI√ìN GENERAL\\n`;\n    contenido += `-`.repeat(80) + `\\n`;\n    contenido += `Profesor: ${planGenerado.docente || planGenerado.profesor || nombreProfesor}\\n`;\n    contenido += `Instituci√≥n: ${planGenerado.institucion}\\n`;\n    contenido += `Grado: ${planGenerado.grado || gradoPlan}\\n`;\n    contenido += `Asignatura: ${planGenerado.asignatura || planGenerado.materia || materia}\\n`;\n    contenido += `Trimestre: ${planGenerado.trimestre}\\n`;\n    contenido += `A√±o Escolar: ${planGenerado.anioEscolar || new Date().getFullYear()}\\n`;\n    contenido += `Duraci√≥n: ${planGenerado.duracionSemanas || '10-12'} semanas\\n`;\n    contenido += `Fecha de generaci√≥n: ${planGenerado.fecha || new Date().toLocaleDateString('es-PA')}\\n\\n`;\n\n    if (planGenerado.contenidos && planGenerado.contenidos.length > 0) {\n      contenido += `CONTENIDOS DEL TRIMESTRE\\n`;\n      contenido += `-`.repeat(80) + `\\n`;\n      planGenerado.contenidos.forEach((cont, i) => {\n        contenido += `${i + 1}. ${cont}\\n`;\n      });\n      contenido += `\\n`;\n    }\n\n    // NUEVO: Secci√≥n de Desarrollo del Contenido para Clases\n    if (planGenerado.desarrolloClases && Object.keys(planGenerado.desarrolloClases).length > 0) {\n      contenido += `DESARROLLO DEL CONTENIDO PARA CLASES\\n`;\n      contenido += `-`.repeat(80) + `\\n`;\n      Object.entries(planGenerado.desarrolloClases).forEach(([contenidoKey, desarrollo]) => {\n        contenido += `\\nüìù ${contenidoKey}:\\n`;\n        contenido += `Duraci√≥n: ${desarrollo.duracion || '3 sesiones de 45 minutos'}\\n\\n`;\n        \n        if (desarrollo.objetivos && desarrollo.objetivos.length > 0) {\n          contenido += `Objetivos de Aprendizaje:\\n`;\n          desarrollo.objetivos.forEach(objetivo => {\n            contenido += `- ${objetivo}\\n`;\n          });\n          contenido += `\\n`;\n        }\n\n        if (desarrollo.materiales && desarrollo.materiales.length > 0) {\n          contenido += `Materiales necesarios:\\n`;\n          desarrollo.materiales.forEach(material => {\n            contenido += `- ${material}\\n`;\n          });\n          contenido += `\\n`;\n        }\n\n        if (desarrollo.fases && desarrollo.fases.length > 0) {\n          contenido += `Fases de la actividad:\\n`;\n          desarrollo.fases.forEach((fase, index) => {\n            contenido += `\\nSESI√ìN ${index + 1} - ${fase.titulo || 'Desarrollo'}\\n`;\n            if (fase.actividades) {\n              fase.actividades.forEach(actividad => {\n                contenido += `${actividad.tiempo}: ${actividad.descripcion}\\n`;\n              });\n            }\n          });\n          contenido += `\\n`;\n        }\n        contenido += `-`.repeat(40) + `\\n`;\n      });\n    }\n\n    if (planGenerado.competencias && planGenerado.competencias.length > 0) {\n      contenido += `COMPETENCIAS A DESARROLLAR\\n`;\n      contenido += `-`.repeat(80) + `\\n`;\n      planGenerado.competencias.forEach((comp, i) => {\n        contenido += `${i + 1}. ${comp}\\n`;\n      });\n      contenido += `\\n`;\n    }\n\n    if (planGenerado.indicadoresLogro && planGenerado.indicadoresLogro.length > 0) {\n      contenido += `INDICADORES DE LOGRO\\n`;\n      contenido += `-`.repeat(80) + `\\n`;\n      planGenerado.indicadoresLogro.forEach((ind, i) => {\n        contenido += `‚Ä¢ ${ind}\\n`;\n      });\n      contenido += `\\n`;\n    }\n\n    if (planGenerado.metodologia) {\n      contenido += `ESTRATEGIAS METODOL√ìGICAS\\n`;\n      contenido += `-`.repeat(80) + `\\n`;\n      contenido += `${planGenerado.metodologia}\\n\\n`;\n    }\n\n    if (planGenerado.recursos && planGenerado.recursos.length > 0) {\n      contenido += `RECURSOS EDUCATIVOS\\n`;\n      contenido += `-`.repeat(80) + `\\n`;\n      planGenerado.recursos.forEach((rec, i) => {\n        contenido += `‚Ä¢ ${rec}\\n`;\n      });\n      contenido += `\\n`;\n    }\n\n    if (planGenerado.evaluacion && Array.isArray(planGenerado.evaluacion) && planGenerado.evaluacion.length > 0) {\n      contenido += `INSTRUMENTOS DE EVALUACI√ìN\\n`;\n      contenido += `-`.repeat(80) + `\\n`;\n      planGenerado.evaluacion.forEach((evalItem, i) => {\n        contenido += `‚Ä¢ ${evalItem}\\n`;\n      });\n      contenido += `\\n`;\n    }\n   \n    if (planGenerado.adaptaciones && planGenerado.adaptaciones.length > 0) {\n      contenido += `ADAPTACIONES CURRICULARES\\n`;\n      contenido += `-`.repeat(80) + `\\n`;\n      planGenerado.adaptaciones.forEach((adap, i) => {\n        contenido += `‚Ä¢ ${adap}\\n`;\n      });\n      contenido += `\\n`;\n    }\n\n    if (planGenerado.observaciones) {\n      contenido += `OBSERVACIONES\\n`;\n      contenido += `-`.repeat(80) + `\\n`;\n      contenido += `${planGenerado.observaciones}\\n\\n`;\n    }\n\n    contenido += `\\n${'='.repeat(80)}\\n`;\n    contenido += `Generado con Bringo Edu - Asistente Inteligente para Profesores\\n`;\n    contenido += `Fecha: ${new Date().toLocaleDateString('es-PA')}\\n`;\n\n    const elemento = document.createElement('a');\n    const archivo = new Blob([contenido], { type: 'text/plain;charset=utf-8' });\n    elemento.href = URL.createObjectURL(archivo);\n    elemento.download = `Plan_Trimestral_${planGenerado.asignatura || materia}_${planGenerado.trimestre.replace(/\\s+/g, '_')}.txt`;\n    document.body.appendChild(elemento);\n    elemento.click();\n    document.body.removeChild(elemento);\n  };\n\n  // FUNCI√ìN MEJORADA: Agregar clase\n  const agregarClase = async () => {\n    if (!usuario) {\n      alert('Debes iniciar sesi√≥n para crear clases');\n      setMostrarLogin(true);\n      return;\n    }\n\n    if (!nombreClase.trim() || !grado.trim() || !seccion.trim()) {\n      alert('Por favor completa todos los campos');\n      return;\n    }\n    \n    try {\n      const nuevaClase = {\n        nombre: `${nombreClase} ${grado}${seccion}`,\n        grado,\n        seccion,\n        materia: nombreClase,\n        estudiantes: [],\n        userId: usuario.uid,\n        fechaCreacion: new Date().toISOString()\n      };\n      \n      const docRef = await addDoc(collection(db, 'clases'), nuevaClase);\n      setClases([...clases, { id: docRef.id, ...nuevaClase }]);\n      setNombreClase('');\n      setGrado('');\n      setSeccion('');\n      \n    } catch (error) {\n      console.error('‚ùå Error agregando clase:', error);\n      alert(`Error al crear la clase: ${error.message}`);\n    }\n  };\n\n  const eliminarClase = async (id) => {\n    if (window.confirm('¬øEst√°s seguro de eliminar esta clase?')) {\n      try {\n        await deleteDoc(doc(db, 'clases', id));\n        setClases(clases.filter(c => c.id !== id));\n        if (claseSeleccionada?.id === id) {\n          setClaseSeleccionada(null);\n          setView('home');\n        }\n      } catch (error) {\n        console.error('Error eliminando clase:', error);\n        alert('Error al eliminar la clase');\n      }\n    }\n  };\n\n  const seleccionarClase = (clase) => {\n    if (!usuario) {\n      alert('Debes iniciar sesi√≥n para acceder a las clases');\n      setMostrarLogin(true);\n      return;\n    }\n    \n    setClaseSeleccionada(clase);\n    setEstudiantes(clase.estudiantes || []);\n    setView('clase');\n  };\n\n  // FUNCI√ìN MEJORADA: Agregar estudiante\n  const agregarEstudiante = async () => {\n    if (!nombreEstudiante.trim()) {\n      alert('Ingresa el nombre del estudiante');\n      return;\n    }\n    \n    try {\n      const nuevoEstudiante = {\n        id: Date.now().toString(),\n        nombre: nombreEstudiante,\n        notasDiarias: [],\n        apreciacion: [],\n        examen: [],\n        asistencia: {}\n      };\n      \n      const nuevosEstudiantes = [...estudiantes, nuevoEstudiante];\n      setEstudiantes(nuevosEstudiantes);\n      \n      // Actualizar en Firestore\n      await updateDoc(doc(db, 'clases', claseSeleccionada.id), {\n        estudiantes: nuevosEstudiantes\n      });\n      \n      // Actualizar estado local\n      const clasesActualizadas = clases.map(c => \n        c.id === claseSeleccionada.id \n          ? { ...c, estudiantes: nuevosEstudiantes }\n          : c\n      );\n      setClases(clasesActualizadas);\n      setNombreEstudiante('');\n    } catch (error) {\n      console.error('Error agregando estudiante:', error);\n      alert('Error al agregar estudiante');\n    }\n  };\n\n  const marcarAsistencia = async (estudianteId, fecha, estado) => {\n    try {\n      const nuevosEstudiantes = estudiantes.map(e => {\n        if (e.id === estudianteId) {\n          return {\n            ...e,\n            asistencia: {\n              ...e.asistencia,\n              [fecha]: estado\n            }\n          };\n        }\n        return e;\n      });\n      setEstudiantes(nuevosEstudiantes);\n      \n      // Actualizar en Firestore\n      await updateDoc(doc(db, 'clases', claseSeleccionada.id), {\n        estudiantes: nuevosEstudiantes\n      });\n      \n      // Actualizar estado local\n      const clasesActualizadas = clases.map(c => \n        c.id === claseSeleccionada.id \n          ? { ...c, estudiantes: nuevosEstudiantes }\n          : c\n      );\n      setClases(clasesActualizadas);\n    } catch (error) {\n      console.error('Error marcando asistencia:', error);\n    }\n  };\n\n  // FUNCI√ìN CORREGIDA: Agregar nota - AHORA FUNCIONA CORRECTAMENTE\n  const agregarNota = async (estudianteId, seccion, valor = '', fecha = new Date().toISOString().split('T')[0]) => {\n    try {\n      const nuevosEstudiantes = estudiantes.map(e => {\n        if (e.id === estudianteId) {\n          const nuevaNota = {\n            valor: valor ? parseFloat(valor) : '',\n            fecha: fecha\n          };\n          return {\n            ...e,\n            [seccion]: [...e[seccion], nuevaNota]\n          };\n        }\n        return e;\n      });\n      setEstudiantes(nuevosEstudiantes);\n      \n      // Actualizar en Firestore\n      await updateDoc(doc(db, 'clases', claseSeleccionada.id), {\n        estudiantes: nuevosEstudiantes\n      });\n      \n      // Actualizar estado local\n      const clasesActualizadas = clases.map(c => \n        c.id === claseSeleccionada.id \n          ? { ...c, estudiantes: nuevosEstudiantes }\n          : c\n      );\n      setClases(clasesActualizadas);\n    } catch (error) {\n      console.error('Error agregando nota:', error);\n      alert('Error al agregar nota');\n    }\n  };\n\n  const actualizarNota = async (estudianteId, seccion, indice, campo, valor) => {\n    try {\n      const nuevosEstudiantes = estudiantes.map(e => {\n        if (e.id === estudianteId) {\n          const nuevasNotas = [...e[seccion]];\n          nuevasNotas[indice] = { ...nuevasNotas[indice], [campo]: valor };\n          return {\n            ...e,\n            [seccion]: nuevasNotas\n          };\n        }\n        return e;\n      });\n      setEstudiantes(nuevosEstudiantes);\n      \n      // Actualizar en Firestore\n      await updateDoc(doc(db, 'clases', claseSeleccionada.id), {\n        estudiantes: nuevosEstudiantes\n      });\n      \n      // Actualizar estado local\n      const clasesActualizadas = clases.map(c => \n        c.id === claseSeleccionada.id \n          ? { ...c, estudiantes: nuevosEstudiantes }\n          : c\n      );\n      setClases(clasesActualizadas);\n    } catch (error) {\n      console.error('Error actualizando nota:', error);\n    }\n  };\n\n  const eliminarNota = async (estudianteId, seccion, indice) => {\n    try {\n      const nuevosEstudiantes = estudiantes.map(e => {\n        if (e.id === estudianteId) {\n          const nuevasNotas = e[seccion].filter((_, i) => i !== indice);\n          return {\n            ...e,\n            [seccion]: nuevasNotas\n          };\n        }\n        return e;\n      });\n      setEstudiantes(nuevosEstudiantes);\n      \n      // Actualizar en Firestore\n      await updateDoc(doc(db, 'clases', claseSeleccionada.id), {\n        estudiantes: nuevosEstudiantes\n      });\n      \n      // Actualizar estado local\n      const clasesActualizadas = clases.map(c => \n        c.id === claseSeleccionada.id \n          ? { ...c, estudiantes: nuevosEstudiantes }\n          : c\n      );\n      setClases(clasesActualizadas);\n    } catch (error) {\n      console.error('Error eliminando nota:', error);\n    }\n  };\n\n  const eliminarEstudiante = async (id) => {\n    try {\n      const nuevosEstudiantes = estudiantes.filter(e => e.id !== id);\n      setEstudiantes(nuevosEstudiantes);\n      \n      // Actualizar en Firestore\n      await updateDoc(doc(db, 'clases', claseSeleccionada.id), {\n        estudiantes: nuevosEstudiantes\n      });\n      \n      // Actualizar estado local\n      const clasesActualizadas = clases.map(c => \n        c.id === claseSeleccionada.id \n          ? { ...c, estudiantes: nuevosEstudiantes }\n          : c\n      );\n      setClases(clasesActualizadas);\n    } catch (error) {\n      console.error('Error eliminando estudiante:', error);\n      alert('Error al eliminar estudiante');\n    }\n  };\n\n  const contarAsistencias = (estudiante) => {\n    const registros = estudiante.asistencia || {};\n    const presente = Object.values(registros).filter(v => v === 'presente').length;\n    const ausente = Object.values(registros).filter(v => v === 'ausente').length;\n    const tardanza = Object.values(registros).filter(v => v === 'tardanza').length;\n    return { presente, ausente, tardanza };\n  };\n\n  const calcularTotalSeccion = (notas) => {\n    if (!notas || notas.length === 0) return 0;\n    const numeros = notas.map(n => {\n      const valor = typeof n === 'object' ? parseFloat(n.valor) : parseFloat(n);\n      return isNaN(valor) ? 0 : valor;\n    }).filter(v => v > 0);\n    if (numeros.length === 0) return 0;\n    return (numeros.reduce((a, b) => a + b, 0) / numeros.length).toFixed(2);\n  };\n\n  const calcularPromedioFinal = (estudiante) => {\n    const totalDiarias = parseFloat(calcularTotalSeccion(estudiante.notasDiarias));\n    const totalApreciacion = parseFloat(calcularTotalSeccion(estudiante.apreciacion));\n    const totalExamen = parseFloat(calcularTotalSeccion(estudiante.examen));\n    \n    const totales = [totalDiarias, totalApreciacion, totalExamen].filter(t => t > 0);\n    if (totales.length === 0) return 0;\n    \n    return ((totalDiarias + totalApreciacion + totalExamen) / 3).toFixed(2);\n  };\n\n  const toggleExpansion = (estudianteId) => {\n    setExpandido(prev => ({\n      ...prev,\n      [estudianteId]: !prev[estudianteId]\n    }));\n  };\n\n  // FUNCI√ìN CORREGIDA: Buscar y redirigir estudiante - AHORA EN HOME\n  const buscarYRedirigirEstudiante = (estudiante) => {\n    // Si estamos en home, vamos a notas\n    if (view === 'home') {\n      setView('notas');\n    }\n    \n    // Expandir la secci√≥n del estudiante\n    setExpandido(prev => ({\n      ...prev,\n      [estudiante.id]: true\n    }));\n    \n    // Scroll a la secci√≥n del estudiante\n    setTimeout(() => {\n      const elemento = document.getElementById(`estudiante-${estudiante.id}`);\n      if (elemento) {\n        elemento.scrollIntoView({ behavior: 'smooth', block: 'center' });\n        // Resaltar temporalmente\n        elemento.classList.add('bg-yellow-100');\n        setTimeout(() => {\n          elemento.classList.remove('bg-yellow-100');\n        }, 2000);\n      }\n    }, 500);\n    \n    setBusquedaEstudiante('');\n  };\n\n  const estudiantesEnRiesgo = estudiantes.filter(e => parseFloat(calcularPromedioFinal(e)) < 3.0 && parseFloat(calcularPromedioFinal(e)) > 0);\n\n  const promedioGeneral = () => {\n    const promedios = estudiantes.map(e => parseFloat(calcularPromedioFinal(e))).filter(p => p > 0);\n    if (promedios.length === 0) return 0;\n    return (promedios.reduce((a, b) => a + b, 0) / promedios.length).toFixed(1);\n  };\n\n  // FUNCIONES PARA LA VISTA DE PROGRESO\n  const obtenerRankingEstudiantes = () => {\n    return estudiantes\n      .map(estudiante => ({\n        ...estudiante,\n        promedio: parseFloat(calcularPromedioFinal(estudiante))\n      }))\n      .filter(e => e.promedio > 0)\n      .sort((a, b) => b.promedio - a.promedio)\n      .slice(0, 5); // Top 5\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50\">\n      <ModalLogin\n        mostrarLogin={mostrarLogin}\n        setMostrarLogin={setMostrarLogin}\n        email={email}\n        setEmail={setEmail}\n        password={password}\n        setPassword={setPassword}\n        errorAuth={errorAuth}\n        cargandoAuth={cargandoAuth}\n        iniciarSesion={iniciarSesion}\n        limpiarFormulariosAuth={limpiarFormulariosAuth}\n        setMostrarRegistro={setMostrarRegistro}\n      />\n\n      <ModalRegistro\n        mostrarRegistro={mostrarRegistro}\n        setMostrarRegistro={setMostrarRegistro}\n        email={email}\n        setEmail={setEmail}\n        password={password}\n        setPassword={setPassword}\n        nombreUsuario={nombreUsuario}\n        setNombreUsuario={setNombreUsuario}\n        confirmarPassword={confirmarPassword}\n        setConfirmarPassword={setConfirmarPassword}\n        errorAuth={errorAuth}\n        cargandoAuth={cargandoAuth}\n        registrarUsuario={registrarUsuario}\n        limpiarFormulariosAuth={limpiarFormulariosAuth}\n        setMostrarLogin={setMostrarLogin}\n      />\n\n      {/* HEADER MEJORADO */}\n      <header className=\"bg-gradient-to-r from-purple-600 to-blue-600 text-white shadow-lg\">\n        <div className=\"container mx-auto px-4 py-4 flex justify-between items-center\">\n          <div className=\"flex items-center gap-3\">\n            <span className=\"text-4xl\">üìö</span>\n            <div>\n              <h1 className=\"text-2xl font-bold\">Bringo Edu</h1>\n              <p className=\"text-sm text-purple-100\">Asistente Inteligente para Profesores</p>\n            </div>\n          </div>\n          \n          <div className=\"flex items-center gap-4\">\n            {usuario ? (\n              <>\n                <div className=\"text-right mr-4 hidden md:block\">\n                  <p className=\"font-semibold text-sm\">üëã Hola, {usuario.nombre}</p>\n                  <p className=\"text-xs text-purple-200\">{usuario.email}</p>\n                </div>\n                <button\n                  onClick={cerrarSesion}\n                  className=\"flex items-center gap-2 bg-red-500 hover:bg-red-600 px-4 py-2 rounded-lg transition font-semibold\"\n                >\n                  <LogOut className=\"w-4 h-4\" />\n                  <span className=\"hidden sm:inline\">Salir</span>\n                </button>\n              </>\n            ) : (\n              <>\n                <button\n                  onClick={() => setMostrarLogin(true)}\n                  className=\"flex items-center gap-2 bg-white text-purple-600 hover:bg-purple-50 px-4 py-2 rounded-lg transition font-semibold\"\n                >\n                  <LogIn className=\"w-4 h-4\" />\n                  <span className=\"hidden sm:inline\">Iniciar Sesi√≥n</span>\n                </button>\n                <button\n                  onClick={() => setMostrarRegistro(true)}\n                  className=\"flex items-center gap-2 bg-green-500 hover:bg-green-600 px-4 py-2 rounded-lg transition font-semibold\"\n                >\n                  <User className=\"w-4 h-4\" />\n                  <span className=\"hidden sm:inline\">Registrarse</span>\n                </button>\n              </>\n            )}\n          </div>\n        </div>\n      </header>\n\n      {/* NAVEGACI√ìN MEJORADA */}\n      <nav className=\"bg-white shadow-md sticky top-0 z-40\">\n        <div className=\"container mx-auto px-4\">\n          <div className=\"flex gap-1 overflow-x-auto py-2\">\n            <button\n              onClick={() => setView('home')}\n              className={`flex items-center gap-2 px-4 md:px-6 py-3 rounded-lg font-semibold transition whitespace-nowrap ${\n                view === 'home' ? 'bg-purple-600 text-white' : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\n              }`}\n            >\n              <Home className=\"w-5 h-5\" />\n              <span className=\"text-sm md:text-base\">Inicio</span>\n            </button>\n            \n            {usuario && claseSeleccionada && (\n              <>\n                <button\n                  onClick={() => setView('clase')}\n                  className={`flex items-center gap-2 px-4 md:px-6 py-3 rounded-lg font-semibold transition whitespace-nowrap ${\n                    view === 'clase' ? 'bg-purple-600 text-white' : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\n                  }`}\n                >\n                  <Users className=\"w-5 h-5\" />\n                  <span className=\"text-sm md:text-base\">Estudiantes</span>\n                </button>\n                <button\n                  onClick={() => setView('asistencia')}\n                  className={`flex items-center gap-2 px-4 md:px-6 py-3 rounded-lg font-semibold transition whitespace-nowrap ${\n                    view === 'asistencia' ? 'bg-purple-600 text-white' : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\n                  }`}\n                >\n                  <Calendar className=\"w-5 h-5\" />\n                  <span className=\"text-sm md:text-base\">Asistencia</span>\n                </button>\n                <button\n                  onClick={() => setView('notas')}\n                  className={`flex items-center gap-2 px-4 md:px-6 py-3 rounded-lg font-semibold transition whitespace-nowrap ${\n                    view === 'notas' ? 'bg-purple-600 text-white' : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\n                  }`}\n                >\n                  <ClipboardList className=\"w-5 h-5\" />\n                  <span className=\"text-sm md:text-base\">Notas</span>\n                </button>\n                <button\n                  onClick={() => setView('progreso')}\n                  className={`flex items-center gap-2 px-4 md:px-6 py-3 rounded-lg font-semibold transition whitespace-nowrap ${\n                    view === 'progreso' ? 'bg-purple-600 text-white' : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\n                  }`}\n                >\n                  <TrendingUp className=\"w-5 h-5\" />\n                  <span className=\"text-sm md:text-base\">Progreso</span>\n                </button>\n              </>\n            )}\n            \n            <button\n              onClick={() => setView('planificacion')}\n              className={`flex items-center gap-2 px-4 md:px-6 py-3 rounded-lg font-semibold transition whitespace-nowrap ${\n                view === 'planificacion' ? 'bg-purple-600 text-white' : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\n              }`}\n            >\n              <Sparkles className=\"w-5 h-5\" />\n              <span className=\"text-sm md:text-base\">Plan IA</span>\n            </button>\n          </div>\n        </div>\n      </nav>\n\n      <main className=\"container mx-auto px-4 py-8\">\n        {view === 'home' && (\n          <div className=\"space-y-6\">\n            <div className=\"bg-white rounded-2xl shadow-lg p-6 md:p-8\">\n              <h2 className=\"text-2xl md:text-3xl font-bold text-gray-800 mb-6 flex items-center gap-3\">\n                <span className=\"text-4xl\">üè´</span>\n                Mis Clases\n              </h2>\n              \n              {/* ‚úÖ BARRA DE B√öSQUEDA DE ESTUDIANTES EN HOME - CORREGIDO */}\n              {usuario && claseSeleccionada && estudiantes.length > 0 && (\n                <BarraBusquedaEstudiantes\n                  estudiantes={estudiantes}\n                  onBuscarEstudiante={buscarYRedirigirEstudiante}\n                  busquedaEstudiante={busquedaEstudiante}\n                  setBusquedaEstudiante={setBusquedaEstudiante}\n                />\n              )}\n              \n              {!usuario && (\n                <div className=\"bg-yellow-50 border-2 border-yellow-200 rounded-xl p-6 mb-6\">\n                  <div className=\"flex items-start gap-4\">\n                    <AlertCircle className=\"w-6 h-6 text-yellow-600 flex-shrink-0 mt-1\" />\n                    <div>\n                      <h3 className=\"font-bold text-yellow-900 mb-2\">Inicia sesi√≥n para acceder</h3>\n                      <p className=\"text-yellow-800 mb-4\">\n                        Crea una cuenta o inicia sesi√≥n para gestionar tus clases, estudiantes y generar planes de estudio con IA.\n                      </p>\n                      <div className=\"flex gap-3 flex-wrap\">\n                        <button\n                          onClick={() => setMostrarLogin(true)}\n                          className=\"bg-purple-600 text-white px-6 py-2 rounded-lg hover:bg-purple-700 transition font-semibold\"\n                        >\n                          Iniciar Sesi√≥n\n                        </button>\n                        <button\n                          onClick={() => setMostrarRegistro(true)}\n                          className=\"bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700 transition font-semibold\"\n                        >\n                          Registrarse\n                        </button>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              )}\n              \n              {usuario && (\n                <div className=\"bg-gradient-to-r from-purple-100 to-blue-100 rounded-xl p-6 mb-6\">\n                  <h3 className=\"text-xl font-bold text-gray-800 mb-4\">Crear Nueva Clase</h3>\n                  <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n                    <input\n                      type=\"text\"\n                      placeholder=\"Materia (ej: Matem√°ticas)\"\n                      value={nombreClase}\n                      onChange={(e) => setNombreClase(e.target.value)}\n                      className=\"px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-purple-500\"\n                    />\n                    <input\n                      type=\"text\"\n                      placeholder=\"Grado (ej: 5to)\"\n                      value={grado}\n                      onChange={(e) => setGrado(e.target.value)}\n                      className=\"px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-purple-500\"\n                    />\n                    <input\n                      type=\"text\"\n                      placeholder=\"Secci√≥n (ej: A)\"\n                      value={seccion}\n                      onChange={(e) => setSeccion(e.target.value)}\n                      className=\"px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-purple-500\"\n                    />\n                    <button\n                      onClick={agregarClase}\n                      className=\"bg-gradient-to-r from-purple-600 to-blue-600 text-white px-6 py-3 rounded-lg hover:from-purple-700 hover:to-blue-700 transition font-bold flex items-center justify-center gap-2\"\n                    >\n                      <Plus className=\"w-5 h-5\" />\n                      Crear\n                    </button>\n                  </div>\n                </div>\n              )}\n              \n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n                {clases.length === 0 && usuario && (\n                  <div className=\"col-span-full text-center py-12 text-gray-500\">\n                    <p className=\"text-lg\">No tienes clases creadas a√∫n</p>\n                    <p className=\"text-sm mt-2\">Crea tu primera clase usando el formulario arriba</p>\n                  </div>\n                )}\n                \n                {clases.map(clase => (\n                  <div\n                    key={clase.id}\n                    className=\"bg-gradient-to-br from-purple-500 to-blue-600 rounded-xl shadow-lg p-6 text-white hover:shadow-2xl transition-all transform hover:scale-105 cursor-pointer\"\n                    onClick={() => seleccionarClase(clase)}\n                  >\n                    <div className=\"flex justify-between items-start mb-4\">\n                      <div>\n                        <h3 className=\"text-2xl font-bold mb-2\">{clase.nombre}</h3>\n                        <p className=\"text-purple-100\">{clase.estudiantes?.length || 0} estudiantes</p>\n                      </div>\n                      <button\n                        onClick={(e) => {\n                          e.stopPropagation();\n                          eliminarClase(clase.id);\n                        }}\n                        className=\"bg-red-500 hover:bg-red-600 p-2 rounded-lg transition\"\n                      >\n                        <Trash2 className=\"w-5 h-5\" />\n                      </button>\n                    </div>\n                    <div className=\"mt-4 pt-4 border-t border-purple-400\">\n                      <p className=\"text-sm text-purple-100\">Click para gestionar</p>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </div>\n          </div>\n        )}\n\n        {view === 'clase' && claseSeleccionada && (\n          <div className=\"bg-white rounded-2xl shadow-lg p-6 md:p-8\">\n            <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-6\">\n              <h2 className=\"text-2xl md:text-3xl font-bold text-gray-800 flex items-center gap-3\">\n                <Users className=\"w-8 h-8 text-purple-600\" />\n                {claseSeleccionada.nombre}\n              </h2>\n              <button\n                onClick={() => {\n                  setClaseSeleccionada(null);\n                  setView('home');\n                }}\n                className=\"bg-gray-200 hover:bg-gray-300 px-4 py-2 rounded-lg transition font-semibold\"\n              >\n                Volver\n              </button>\n            </div>\n            \n            <div className=\"bg-gradient-to-r from-green-100 to-teal-100 rounded-xl p-6 mb-6\">\n              <h3 className=\"text-xl font-bold text-gray-800 mb-4\">Agregar Estudiante</h3>\n              <div className=\"flex flex-col md:flex-row gap-4\">\n                <input\n                  type=\"text\"\n                  placeholder=\"Nombre completo del estudiante\"\n                  value={nombreEstudiante}\n                  onChange={(e) => setNombreEstudiante(e.target.value)}\n                  onKeyPress={(e) => e.key === 'Enter' && agregarEstudiante()}\n                  className=\"flex-1 px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-green-500\"\n                />\n                <button\n                  onClick={agregarEstudiante}\n                  className=\"bg-gradient-to-r from-green-600 to-teal-600 text-white px-6 py-3 rounded-lg hover:from-green-700 hover:to-teal-700 transition font-bold flex items-center justify-center gap-2\"\n                >\n                  <Plus className=\"w-5 h-5\" />\n                  Agregar\n                </button>\n              </div>\n            </div>\n            \n            <div className=\"space-y-4\">\n              {estudiantes.length === 0 && (\n                <div className=\"text-center py-12 text-gray-500\">\n                  <p className=\"text-lg\">No hay estudiantes en esta clase</p>\n                  <p className=\"text-sm mt-2\">Agrega tu primer estudiante usando el formulario arriba</p>\n                </div>\n              )}\n              \n              {estudiantes.map(estudiante => (\n                <div key={estudiante.id} className=\"bg-gray-50 rounded-xl p-6 hover:bg-gray-100 transition\">\n                  <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4\">\n                    <div className=\"flex items-center gap-4\">\n                      <div className=\"bg-purple-600 text-white w-12 h-12 rounded-full flex items-center justify-center font-bold text-lg\">\n                        {estudiante.nombre.charAt(0).toUpperCase()}\n                      </div>\n                      <div>\n                        <h4 className=\"text-xl font-bold text-gray-800\">{estudiante.nombre}</h4>\n                        <p className=\"text-sm text-gray-600\">\n                          Promedio: {calcularPromedioFinal(estudiante)}/5\n                        </p>\n                      </div>\n                    </div>\n                    <button\n                      onClick={() => {\n                        if (window.confirm(`¬øEliminar a ${estudiante.nombre}?`)) {\n                          eliminarEstudiante(estudiante.id);\n                        }\n                      }}\n                      className=\"bg-red-500 hover:bg-red-600 text-white p-2 rounded-lg transition mt-4 md:mt-0\"\n                    >\n                      <Trash2 className=\"w-5 h-5\" />\n                    </button>\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n        )}\n\n        {view === 'asistencia' && claseSeleccionada && (\n          <div className=\"bg-white rounded-2xl shadow-lg p-6 md:p-8\">\n            <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-6\">\n              <h2 className=\"text-2xl md:text-3xl font-bold text-gray-800 flex items-center gap-3\">\n                <Calendar className=\"w-8 h-8 text-purple-600\" />\n                Asistencia - {claseSeleccionada.nombre}\n              </h2>\n              <div className=\"flex gap-4\">\n                <input\n                  type=\"date\"\n                  value={fechaActual}\n                  onChange={(e) => setFechaActual(e.target.value)}\n                  className=\"px-4 py-2 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-purple-500\"\n                />\n                <button\n                  onClick={() => window.print()}\n                  className=\"bg-gradient-to-r from-green-600 to-teal-600 text-white px-6 py-2 rounded-lg hover:from-green-700 hover:to-teal-700 transition font-bold flex items-center gap-2\"\n                >\n                  <Download className=\"w-5 h-5\" />\n                  Descargar\n                </button>\n              </div>\n            </div>\n            \n            <div className=\"space-y-4\">\n              {estudiantes.length === 0 && (\n                <div className=\"text-center py-12 text-gray-500\">\n                  <p className=\"text-lg\">No hay estudiantes en esta clase</p>\n                </div>\n              )}\n              \n              {estudiantes.map(estudiante => {\n                const asist = contarAsistencias(estudiante);\n                const estadoHoy = estudiante.asistencia?.[fechaActual];\n                \n                return (\n                  <div key={estudiante.id} className=\"bg-gray-50 rounded-xl p-6\">\n                    <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4\">\n                      <div className=\"flex-1\">\n                        <h4 className=\"text-xl font-bold text-gray-800 mb-2\">{estudiante.nombre}</h4>\n                        <div className=\"flex gap-4 text-sm\">\n                          <span className=\"text-green-600 font-semibold\">‚úì {asist.presente}P</span>\n                          <span className=\"text-yellow-600 font-semibold\">‚è∞ {asist.tardanza}T</span>\n                          <span className=\"text-red-600 font-semibold\">‚úó {asist.ausente}A</span>\n                        </div>\n                      </div>\n                      \n                      <div className=\"flex gap-2 flex-wrap mt-4 md:mt-0\">\n                        <button\n                          onClick={() => marcarAsistencia(estudiante.id, fechaActual, 'presente')}\n                          className={`px-4 md:px-6 py-3 rounded-lg font-semibold transition text-sm md:text-base ${\n                            estadoHoy === 'presente'\n                              ? 'bg-green-600 text-white'\n                              : 'bg-green-100 text-green-700 hover:bg-green-200'\n                          }`}\n                        >\n                          Presente\n                        </button>\n                        <button\n                          onClick={() => marcarAsistencia(estudiante.id, fechaActual, 'tardanza')}\n                          className={`px-4 md:px-6 py-3 rounded-lg font-semibold transition text-sm md:text-base ${\n                            estadoHoy === 'tardanza'\n                              ? 'bg-yellow-600 text-white'\n                              : 'bg-yellow-100 text-yellow-700 hover:bg-yellow-200'\n                          }`}\n                        >\n                          Tardanza\n                        </button>\n                        <button\n                          onClick={() => marcarAsistencia(estudiante.id, fechaActual, 'ausente')}\n                          className={`px-4 md:px-6 py-3 rounded-lg font-semibold transition text-sm md:text-base ${\n                            estadoHoy === 'ausente'\n                              ? 'bg-red-600 text-white'\n                              : 'bg-red-100 text-red-700 hover:bg-red-200'\n                          }`}\n                        >\n                          Ausente\n                        </button>\n                      </div>\n                    </div>\n                  </div>\n                );\n              })}\n            </div>\n          </div>\n        )}\n\n        {view === 'notas' && claseSeleccionada && (\n          <div className=\"bg-white rounded-2xl shadow-lg p-6 md:p-8\">\n            <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-6\">\n              <h2 className=\"text-2xl md:text-3xl font-bold text-gray-800 flex items-center gap-3\">\n                <ClipboardList className=\"w-8 h-8 text-purple-600\" />\n                Notas - {claseSeleccionada.nombre}\n              </h2>\n              <div className=\"flex gap-4 flex-wrap\">\n                <div className=\"bg-purple-100 px-4 md:px-6 py-3 rounded-lg\">\n                  <span className=\"text-xs md:text-sm text-purple-600 font-semibold\">Promedio:</span>\n                  <span className=\"ml-2 text-xl md:text-2xl font-bold text-purple-800\">{promedioGeneral()}/5</span>\n                </div>\n                <button\n                  onClick={() => window.print()}\n                  className=\"bg-gradient-to-r from-purple-600 to-blue-600 text-white px-4 md:px-6 py-3 rounded-lg hover:from-purple-700 hover:to-blue-700 transition font-bold flex items-center gap-2 text-sm md:text-base\"\n                >\n                  <Download className=\"w-5 h-5\" />\n                  Descargar\n                </button>\n              </div>\n            </div>\n            \n            {/* ‚ùå NO HAY BARRA DE B√öSQUEDA EN NOTAS - SOLO EN HOME */}\n            \n            {estudiantesEnRiesgo.length > 0 && (\n              <div className=\"bg-red-50 border-2 border-red-200 rounded-xl p-6 mb-6\">\n                <div className=\"flex items-start gap-4\">\n                  <AlertCircle className=\"w-6 h-6 text-red-600 flex-shrink-0 mt-1\" />\n                  <div>\n                    <h3 className=\"font-bold text-red-900 mb-2\">‚ö†Ô∏è Estudiantes en Riesgo ({estudiantesEnRiesgo.length})</h3>\n                    <div className=\"flex flex-wrap gap-2\">\n                      {estudiantesEnRiesgo.map(e => (\n                        <span key={e.id} className=\"bg-red-200 text-red-800 px-3 py-1 rounded-lg text-sm font-semibold\">\n                          {e.nombre}: {calcularPromedioFinal(e)}/5\n                        </span>\n                      ))}\n                    </div>\n                  </div>\n                </div>\n              </div>\n            )}\n            \n            {/* CUADR√çCULA DE NOTAS R√ÅPIDAS - CORREGIDA */}\n            {estudiantes.length > 0 && (\n              <div className=\"bg-white rounded-xl shadow-lg p-6 mb-6 border-2 border-purple-200\">\n                <h3 className=\"text-xl font-bold text-gray-800 mb-4 flex items-center gap-2\">\n                  üìä Registro R√°pido de Notas - {new Date().toLocaleDateString('es-PA')}\n                </h3>\n                \n                <div className=\"overflow-x-auto\">\n                  <table className=\"w-full min-w-full\">\n                    <thead className=\"bg-purple-600 text-white\">\n                      <tr>\n                        <th className=\"px-4 py-3 text-left font-semibold\">Estudiante</th>\n                        <th className=\"px-4 py-3 text-center font-semibold\">Notas Diarias</th>\n                        <th className=\"px-4 py-3 text-center font-semibold\">Apreciaci√≥n</th>\n                        <th className=\"px-4 py-3 text-center font-semibold\">Examen</th>\n                        <th className=\"px-4 py-3 text-center font-semibold\">Promedio</th>\n                        <th className=\"px-4 py-3 text-center font-semibold\">Compartir</th>\n                      </tr>\n                    </thead>\n                    <tbody>\n                      {estudiantes.map((estudiante) => (\n                        <FilaNotasRapidas\n                          key={estudiante.id}\n                          estudiante={estudiante}\n                          onAgregarNota={agregarNota}\n                          calcularPromedioFinal={calcularPromedioFinal}\n                          claseSeleccionada={claseSeleccionada}\n                          usuario={usuario}\n                          actualizarNota={actualizarNota}\n                        />\n                      ))}\n                    </tbody>\n                  </table>\n                </div>\n                <p className=\"text-sm text-gray-600 mt-3 text-center\">\n                  üí° Ingresa las notas (0-5) y presiona \"+\" para agregar. Las notas se guardan autom√°ticamente.\n                </p>\n              </div>\n            )}\n            \n            {estudiantes.length === 0 && (\n              <div className=\"text-center py-12 text-gray-500\">\n                <p className=\"text-lg\">No hay estudiantes en esta clase</p>\n              </div>\n            )}\n            \n            <div className=\"space-y-6\">\n              {estudiantes.map(estudiante => (\n                <div key={estudiante.id} id={`estudiante-${estudiante.id}`} className=\"border-2 border-gray-200 rounded-xl overflow-hidden transition-all duration-300\">\n                  <div\n                    onClick={() => toggleExpansion(estudiante.id)}\n                    className=\"bg-gradient-to-r from-purple-100 to-blue-100 p-6 cursor-pointer hover:from-purple-200 hover:to-blue-200 transition\"\n                  >\n                    <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4\">\n                      <div className=\"flex items-center gap-4 flex-1\">\n                        <div className=\"bg-purple-600 text-white w-12 h-12 rounded-full flex items-center justify-center font-bold text-lg flex-shrink-0\">\n                          {estudiante.nombre.charAt(0).toUpperCase()}\n                        </div>\n                        <div className=\"flex-1\">\n                          <h4 className=\"text-xl font-bold text-gray-800\">{estudiante.nombre}</h4>\n                          <div className=\"flex flex-wrap gap-2 md:gap-4 mt-1 text-xs md:text-sm\">\n                            <span>Diarias: {calcularTotalSeccion(estudiante.notasDiarias)}</span>\n                            <span>Apreciaci√≥n: {calcularTotalSeccion(estudiante.apreciacion)}</span>\n                            <span>Examen: {calcularTotalSeccion(estudiante.examen)}</span>\n                          </div>\n                        </div>\n                      </div>\n                      <div className=\"flex items-center gap-4 mt-4 md:mt-0\">\n                        <div className=\"text-right\">\n                          <p className=\"text-xs md:text-sm text-gray-600\">Promedio</p>\n                          <p className={`text-2xl md:text-3xl font-bold ${\n                            parseFloat(calcularPromedioFinal(estudiante)) >= 3.5 ? 'text-green-600' :\n                            parseFloat(calcularPromedioFinal(estudiante)) >= 3.0 ? 'text-yellow-600' :\n                            'text-red-600'\n                          }`}>\n                            {calcularPromedioFinal(estudiante)}/5\n                          </p>\n                        </div>\n                        {expandido[estudiante.id] ? (\n                          <ChevronUp className=\"w-6 h-6 text-gray-600\" />\n                        ) : (\n                          <ChevronDown className=\"w-6 h-6 text-gray-600\" />\n                        )}\n                      </div>\n                    </div>\n                  </div>\n                  \n                  {expandido[estudiante.id] && (\n                    <div className=\"p-6 space-y-6\">\n                      <div>\n                        <div className=\"flex justify-between items-center mb-4\">\n                          <h5 className=\"font-bold text-lg text-gray-800\">üìù Notas Diarias</h5>\n                          <button\n                            onClick={() => agregarNota(estudiante.id, 'notasDiarias')}\n                            className=\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition text-sm font-semibold flex items-center gap-2\"\n                          >\n                            <Plus className=\"w-4 h-4\" />\n                            Agregar\n                          </button>\n                        </div>\n                        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                          {estudiante.notasDiarias.map((nota, idx) => (\n                            <div key={idx} className=\"bg-gray-50 p-4 rounded-lg flex gap-3\">\n                              <input\n                                type=\"number\"\n                                step=\"0.1\"\n                                min=\"0\"\n                                max=\"5\"\n                                placeholder=\"Nota\"\n                                value={nota.valor || ''}\n                                onChange={(e) => actualizarNota(estudiante.id, 'notasDiarias', idx, 'valor', e.target.value)}\n                                className=\"flex-1 px-3 py-2 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-blue-500\"\n                              />\n                              <input\n                                type=\"date\"\n                                value={nota.fecha || ''}\n                                onChange={(e) => actualizarNota(estudiante.id, 'notasDiarias', idx, 'fecha', e.target.value)}\n                                className=\"px-3 py-2 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-blue-500\"\n                              />\n                              <button\n                                onClick={() => eliminarNota(estudiante.id, 'notasDiarias', idx)}\n                                className=\"bg-red-500 text-white p-2 rounded-lg hover:bg-red-600 transition\"\n                              >\n                                <Trash2 className=\"w-4 h-4\" />\n                              </button>\n                            </div>\n                          ))}\n                        </div>\n                        <div className=\"mt-2 text-right\">\n                          <span className=\"text-sm text-gray-600\">Promedio: </span>\n                          <span className=\"font-bold text-lg text-blue-600\">{calcularTotalSeccion(estudiante.notasDiarias)}/5</span>\n                        </div>\n                      </div>\n                      \n                      <div>\n                        <div className=\"flex justify-between items-center mb-4\">\n                          <h5 className=\"font-bold text-lg text-gray-800\">‚≠ê Apreciaci√≥n</h5>\n                          <button\n                            onClick={() => agregarNota(estudiante.id, 'apreciacion')}\n                            className=\"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition text-sm font-semibold flex items-center gap-2\"\n                          >\n                            <Plus className=\"w-4 h-4\" />\n                            Agregar\n                          </button>\n                        </div>\n                        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                          {estudiante.apreciacion.map((nota, idx) => (\n                            <div key={idx} className=\"bg-gray-50 p-4 rounded-lg flex gap-3\">\n                              <input\n                                type=\"number\"\n                                step=\"0.1\"\n                                min=\"0\"\n                                max=\"5\"\n                                placeholder=\"Nota\"\n                                value={nota.valor || ''}\n                                onChange={(e) => actualizarNota(estudiante.id, 'apreciacion', idx, 'valor', e.target.value)}\n                                className=\"flex-1 px-3 py-2 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-green-500\"\n                              />\n                              <input\n                                type=\"date\"\n                                value={nota.fecha || ''}\n                                onChange={(e) => actualizarNota(estudiante.id, 'apreciacion', idx, 'fecha', e.target.value)}\n                                className=\"px-3 py-2 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-green-500\"\n                              />\n                              <button\n                                onClick={() => eliminarNota(estudiante.id, 'apreciacion', idx)}\n                                className=\"bg-red-500 text-white p-2 rounded-lg hover:bg-red-600 transition\"\n                              >\n                                <Trash2 className=\"w-4 h-4\" />\n                              </button>\n                            </div>\n                          ))}\n                        </div>\n                        <div className=\"mt-2 text-right\">\n                          <span className=\"text-sm text-gray-600\">Promedio: </span>\n                          <span className=\"font-bold text-lg text-green-600\">{calcularTotalSeccion(estudiante.apreciacion)}/5</span>\n                        </div>\n                      </div>\n                      \n                      <div>\n                        <div className=\"flex justify-between items-center mb-4\">\n                          <h5 className=\"font-bold text-lg text-gray-800\">üìã Examen</h5>\n                          <button\n                            onClick={() => agregarNota(estudiante.id, 'examen')}\n                            className=\"bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition text-sm font-semibold flex items-center gap-2\"\n                          >\n                            <Plus className=\"w-4 h-4\" />\n                            Agregar\n                          </button>\n                        </div>\n                        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                          {estudiante.examen.map((nota, idx) => (\n                            <div key={idx} className=\"bg-gray-50 p-4 rounded-lg flex gap-3\">\n                              <input\n                                type=\"number\"\n                                step=\"0.1\"\n                                min=\"0\"\n                                max=\"5\"\n                                placeholder=\"Nota\"\n                                value={nota.valor || ''}\n                                onChange={(e) => actualizarNota(estudiante.id, 'examen', idx, 'valor', e.target.value)}\n                                className=\"flex-1 px-3 py-2 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-purple-500\"\n                              />\n                              <input\n                                type=\"date\"\n                                value={nota.fecha || ''}\n                                onChange={(e) => actualizarNota(estudiante.id, 'examen', idx, 'fecha', e.target.value)}\n                                className=\"px-3 py-2 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-purple-500\"\n                              />\n                              <button\n                                onClick={() => eliminarNota(estudiante.id, 'examen', idx)}\n                                className=\"bg-red-500 text-white p-2 rounded-lg hover:bg-red-600 transition\"\n                              >\n                                <Trash2 className=\"w-4 h-4\" />\n                              </button>\n                            </div>\n                          ))}\n                        </div>\n                        <div className=\"mt-2 text-right\">\n                          <span className=\"text-sm text-gray-600\">Promedio: </span>\n                          <span className=\"font-bold text-lg text-purple-600\">{calcularTotalSeccion(estudiante.examen)}/5</span>\n                        </div>\n                      </div>\n                    </div>\n                  )}\n                </div>\n              ))}\n            </div>\n          </div>\n        )}\n\n        {/* VISTA DE PROGRESO */}\n        {view === 'progreso' && claseSeleccionada && (\n          <div className=\"bg-white rounded-2xl shadow-lg p-6 md:p-8\">\n            <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-8\">\n              <h2 className=\"text-2xl md:text-3xl font-bold text-gray-800 flex items-center gap-3\">\n                <TrendingUp className=\"w-8 h-8 text-purple-600\" />\n                Dashboard de Progreso - {claseSeleccionada.nombre}\n              </h2>\n              <button\n                onClick={() => window.print()}\n                className=\"bg-gradient-to-r from-purple-600 to-blue-600 text-white px-6 py-3 rounded-lg hover:from-purple-700 hover:to-blue-700 transition font-bold flex items-center gap-2\"\n              >\n                <Download className=\"w-5 h-5\" />\n                Descargar Dashboard\n              </button>\n            </div>\n\n            {/* ESTAD√çSTICAS GENERALES */}\n            <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8\">\n              <div className=\"bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-xl p-6 text-center\">\n                <BarChart3 className=\"w-8 h-8 mx-auto mb-2\" />\n                <p className=\"text-sm opacity-90\">Promedio General</p>\n                <p className=\"text-3xl font-bold\">{promedioGeneral()}/5</p>\n              </div>\n              \n              <div className=\"bg-gradient-to-r from-green-500 to-green-600 text-white rounded-xl p-6 text-center\">\n                <Target className=\"w-8 h-8 mx-auto mb-2\" />\n                <p className=\"text-sm opacity-90\">Total Estudiantes</p>\n                <p className=\"text-3xl font-bold\">{estudiantes.length}</p>\n              </div>\n              \n              <div className=\"bg-gradient-to-r from-yellow-500 to-yellow-600 text-white rounded-xl p-6 text-center\">\n                <AlertTriangle className=\"w-8 h-8 mx-auto mb-2\" />\n                <p className=\"text-sm opacity-90\">En Riesgo</p>\n                <p className=\"text-3xl font-bold\">{estudiantesEnRiesgo.length}</p>\n              </div>\n              \n              <div className=\"bg-gradient-to-r from-purple-500 to-purple-600 text-white rounded-xl p-6 text-center\">\n                <Award className=\"w-8 h-8 mx-auto mb-2\" />\n                <p className=\"text-sm opacity-90\">Mejor Promedio</p>\n                <p className=\"text-3xl font-bold\">\n                  {estudiantes.length > 0 ? Math.max(...estudiantes.map(e => parseFloat(calcularPromedioFinal(e)))).toFixed(1) : 0}/5\n                </p>\n              </div>\n            </div>\n\n            {/* GR√ÅFICO DE DISTRIBUCI√ìN Y RANKING */}\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8\">\n              <div className=\"bg-gray-50 rounded-xl p-6\">\n                <h3 className=\"text-xl font-bold text-gray-800 mb-4 flex items-center gap-2\">\n                  <BarChart3 className=\"w-6 h-6 text-purple-600\" />\n                  Distribuci√≥n de Rendimiento\n                </h3>\n                <DistribucionNotas \n                  estudiantes={estudiantes} \n                  calcularPromedioFinal={calcularPromedioFinal} \n                />\n              </div>\n              \n              <div className=\"bg-gray-50 rounded-xl p-6\">\n                <h3 className=\"text-xl font-bold text-gray-800 mb-4 flex items-center gap-2\">\n                  <Award className=\"w-6 h-6 text-purple-600\" />\n                  Ranking de Estudiantes\n                </h3>\n                <div className=\"space-y-3\">\n                  {obtenerRankingEstudiantes().map((estudiante, index) => (\n                    <div key={estudiante.id} className=\"flex items-center justify-between bg-white p-4 rounded-lg border-2 border-gray-200\">\n                      <div className=\"flex items-center gap-3\">\n                        <div className={`w-8 h-8 rounded-full flex items-center justify-center font-bold text-white ${\n                          index === 0 ? 'bg-yellow-500' :\n                          index === 1 ? 'bg-gray-400' :\n                          index === 2 ? 'bg-orange-500' : 'bg-purple-500'\n                        }`}>\n                          {index + 1}\n                        </div>\n                        <div>\n                          <p className=\"font-semibold text-gray-800\">{estudiante.nombre}</p>\n                          <p className=\"text-sm text-gray-600\">\n                            {estudiante.notasDiarias.length + estudiante.apreciacion.length + estudiante.examen.length} notas\n                          </p>\n                        </div>\n                      </div>\n                      <div className=\"text-right\">\n                        <p className={`text-xl font-bold ${\n                          estudiante.promedio >= 4.5 ? 'text-green-600' :\n                          estudiante.promedio >= 3.5 ? 'text-blue-600' :\n                          estudiante.promedio >= 3.0 ? 'text-yellow-600' : 'text-red-600'\n                        }`}>\n                          {estudiante.promedio.toFixed(1)}/5\n                        </p>\n                      </div>\n                    </div>\n                  ))}\n                  {obtenerRankingEstudiantes().length === 0 && (\n                    <div className=\"text-center py-8 text-gray-500\">\n                      <p>No hay datos suficientes para ranking</p>\n                    </div>\n                  )}\n                </div>\n              </div>\n            </div>\n\n            {/* ALERTAS DE BAJO RENDIMIENTO */}\n            {estudiantesEnRiesgo.length > 0 && (\n              <div className=\"bg-red-50 border-2 border-red-200 rounded-xl p-6 mb-8\">\n                <h3 className=\"text-xl font-bold text-red-900 mb-4 flex items-center gap-2\">\n                  <AlertTriangle className=\"w-6 h-6 text-red-600\" />\n                  Alertas de Bajo Rendimiento ({estudiantesEnRiesgo.length})\n                </h3>\n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n                  {estudiantesEnRiesgo.map(estudiante => {\n                    const asistencia = contarAsistencias(estudiante);\n                    return (\n                      <div key={estudiante.id} className=\"bg-white rounded-lg p-4 border-2 border-red-300\">\n                        <div className=\"flex items-center gap-3 mb-3\">\n                          <div className=\"bg-red-600 text-white w-10 h-10 rounded-full flex items-center justify-center font-bold\">\n                            {estudiante.nombre.charAt(0).toUpperCase()}\n                          </div>\n                          <div>\n                            <p className=\"font-bold text-red-800\">{estudiante.nombre}</p>\n                            <p className=\"text-sm text-red-600\">Promedio: {calcularPromedioFinal(estudiante)}/5</p>\n                          </div>\n                        </div>\n                        <div className=\"text-sm text-gray-600\">\n                          <p>Asistencia: {asistencia.presente}P {asistencia.tardanza}T {asistencia.ausente}A</p>\n                          <p>Total notas: {estudiante.notasDiarias.length + estudiante.apreciacion.length + estudiante.examen.length}</p>\n                        </div>\n                      </div>\n                    );\n                  })}\n                </div>\n              </div>\n            )}\n\n            {/* M√âTRICAS CONSOLIDADAS POR ESTUDIANTE */}\n            <div className=\"bg-gray-50 rounded-xl p-6\">\n              <h3 className=\"text-xl font-bold text-gray-800 mb-4 flex items-center gap-2\">\n                <Users className=\"w-6 h-6 text-purple-600\" />\n                M√©tricas por Estudiante\n              </h3>\n              <div className=\"overflow-x-auto\">\n                <table className=\"w-full bg-white rounded-lg overflow-hidden\">\n                  <thead className=\"bg-purple-600 text-white\">\n                    <tr>\n                      <th className=\"px-4 py-3 text-left\">Estudiante</th>\n                      <th className=\"px-4 py-3 text-center\">Promedio</th>\n                      <th className=\"px-4 py-3 text-center\">Notas Diarias</th>\n                      <th className=\"px-4 py-3 text-center\">Apreciaci√≥n</th>\n                      <th className=\"px-4 py-3 text-center\">Examen</th>\n                      <th className=\"px-4 py-3 text-center\">Asistencia</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {estudiantes.map(estudiante => {\n                      const asistencia = contarAsistencias(estudiante);\n                      const totalAsistencias = asistencia.presente + asistencia.tardanza + asistencia.ausente;\n                      const porcentajeAsistencia = totalAsistencias > 0 ? Math.round((asistencia.presente / totalAsistencias) * 100) : 0;\n                      \n                      return (\n                        <tr key={estudiante.id} className=\"border-b border-gray-200 hover:bg-gray-50\">\n                          <td className=\"px-4 py-3 font-semibold\">{estudiante.nombre}</td>\n                          <td className=\"px-4 py-3 text-center\">\n                            <span className={`font-bold ${\n                              parseFloat(calcularPromedioFinal(estudiante)) >= 4.5 ? 'text-green-600' :\n                              parseFloat(calcularPromedioFinal(estudiante)) >= 3.5 ? 'text-blue-600' :\n                              parseFloat(calcularPromedioFinal(estudiante)) >= 3.0 ? 'text-yellow-600' : 'text-red-600'\n                            }`}>\n                              {calcularPromedioFinal(estudiante)}/5\n                            </span>\n                          </td>\n                          <td className=\"px-4 py-3 text-center text-sm\">\n                            {calcularTotalSeccion(estudiante.notasDiarias)} ({estudiante.notasDiarias.length})\n                          </td>\n                          <td className=\"px-4 py-3 text-center text-sm\">\n                            {calcularTotalSeccion(estudiante.apreciacion)} ({estudiante.apreciacion.length})\n                          </td>\n                          <td className=\"px-4 py-3 text-center text-sm\">\n                            {calcularTotalSeccion(estudiante.examen)} ({estudiante.examen.length})\n                          </td>\n                          <td className=\"px-4 py-3 text-center\">\n                            <span className={`font-semibold ${\n                              porcentajeAsistencia >= 90 ? 'text-green-600' :\n                              porcentajeAsistencia >= 80 ? 'text-yellow-600' : 'text-red-600'\n                            }`}>\n                              {porcentajeAsistencia}%\n                            </span>\n                          </td>\n                        </tr>\n                      );\n                    })}\n                  </tbody>\n                </table>\n              </div>\n              {estudiantes.length === 0 && (\n                <div className=\"text-center py-8 text-gray-500\">\n                  <p>No hay estudiantes en esta clase</p>\n                </div>\n              )}\n            </div>\n          </div>\n        )}\n\n        {view === 'planificacion' && (\n          <div className=\"bg-white rounded-2xl shadow-lg p-6 md:p-8\">\n            <h2 className=\"text-2xl md:text-3xl font-bold text-gray-800 mb-6 flex items-center gap-3\">\n              <Sparkles className=\"w-8 h-8 text-purple-600\" />\n              Generador de Planes Trimestrales con IA\n            </h2>\n            \n            {!planGenerado ? (\n              <div className=\"space-y-6\">\n                <div className=\"bg-gradient-to-br from-purple-50 to-pink-50 border-2 border-purple-200 rounded-xl p-6 mb-6\">\n                  <div className=\"flex items-start gap-4\">\n                    <Sparkles className=\"w-8 h-8 text-purple-600 flex-shrink-0 mt-1\" />\n                    <div>\n                      <h3 className=\"font-bold text-purple-900 text-lg mb-2\">‚ú® Planes Trimestrales con IA</h3>\n                      <p className=\"text-purple-800 text-sm\">\n                        Genera planes trimestrales completos alineados con el curr√≠culo del MEDUCA de Panam√°. \n                        Nuestra IA crea contenido detallado con contenidos, competencias, metodolog√≠as y evaluaciones \n                        espec√≠ficas para cada trimestre.\n                      </p>\n                    </div>\n                  </div>\n                </div>\n                \n                <div className=\"bg-gradient-to-r from-purple-100 to-pink-100 rounded-xl p-6\">\n                  <h3 className=\"text-xl font-bold text-gray-800 mb-4\">Informaci√≥n del Plan Trimestral</h3>\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                    <input\n                      type=\"text\"\n                      placeholder=\"Nombre del Profesor\"\n                      value={nombreProfesor}\n                      onChange={(e) => setNombreProfesor(e.target.value)}\n                      className=\"px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-purple-500\"\n                    />\n                    <input\n                      type=\"text\"\n                      placeholder=\"Instituci√≥n Educativa\"\n                      value={institucion}\n                      onChange={(e) => setInstitucion(e.target.value)}\n                      className=\"px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-purple-500\"\n                    />\n                    <input\n                      type=\"text\"\n                      placeholder=\"Grado (ej: 5to)\"\n                      value={gradoPlan}\n                      onChange={(e) => setGradoPlan(e.target.value)}\n                      className=\"px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-purple-500\"\n                    />\n                    <input\n                      type=\"text\"\n                      placeholder=\"Materia (ej: Matem√°ticas)\"\n                      value={materia}\n                      onChange={(e) => setMateria(e.target.value)}\n                      className=\"px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-purple-500\"\n                    />\n                    <select\n                      value={trimestre}\n                      onChange={(e) => setTrimestre(e.target.value)}\n                      className=\"px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-purple-500\"\n                    >\n                      <option value=\"Primer Trimestre\">Primer Trimestre</option>\n                      <option value=\"Segundo Trimestre\">Segundo Trimestre</option>\n                      <option value=\"Tercer Trimestre\">Tercer Trimestre</option>\n                    </select>\n                    <div className=\"md:col-span-2\">\n                      <p className=\"text-sm text-gray-600 mb-2\">\n                        üí° Selecciona el trimestre para el cual deseas generar el plan de estudios completo.\n                      </p>\n                    </div>\n                  </div>\n                  \n                  <button\n                    onClick={generarPlanConOpenAI}\n                    disabled={generandoPlan || !nombreProfesor || !institucion || !gradoPlan || !materia || !trimestre}\n                    className={`w-full mt-6 py-4 rounded-lg font-bold text-lg flex items-center justify-center gap-3 transition ${\n                      generandoPlan || !nombreProfesor || !institucion || !gradoPlan || !materia || !trimestre\n                        ? 'bg-gray-400 cursor-not-allowed'\n                        : 'bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white shadow-lg hover:shadow-xl'\n                    }`}\n                  >\n                    {generandoPlan ? (\n                      <>\n                        <div className=\"animate-spin rounded-full h-6 w-6 border-b-2 border-white\"></div>\n                        Generando Plan Trimestral...\n                      </>\n                    ) : (\n                      <>\n                        <Sparkles className=\"w-6 h-6\" />\n                        Generar Plan Trimestral con IA\n                      </>\n                    )}\n                  </button>\n                </div>\n              </div>\n            ) : (\n              <div className=\"space-y-6\">\n                <div className=\"flex flex-col md:flex-row justify-between items-start gap-4 mb-6\">\n                  <div>\n                    <h3 className=\"text-2xl font-bold text-gray-800\">Plan {planGenerado.trimestre}</h3>\n                    <p className=\"text-gray-600 mt-1\">\n                      {planGenerado.asignatura || planGenerado.materia || materia} - {planGenerado.grado || gradoPlan} | {planGenerado.institucion || institucion}\n                    </p>\n                    <p className=\"text-sm text-gray-500 mt-1\">Profesor: {planGenerado.docente || planGenerado.profesor || nombreProfesor}</p>\n                    <p className=\"text-sm text-gray-500\">Trimestre: {planGenerado.trimestre} | Fecha: {planGenerado.fecha}</p>\n                    {planGenerado.duracionSemanas && (\n                      <p className=\"text-sm text-gray-500\">Duraci√≥n: {planGenerado.duracionSemanas} semanas</p>\n                    )}\n                  </div>\n                  <div className=\"flex gap-3 flex-wrap\">\n                    <button\n                      onClick={descargarPlan}\n                      className=\"bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 transition font-bold flex items-center gap-2\"\n                    >\n                      <Download className=\"w-5 h-5\" />\n                      Descargar Plan\n                    </button>\n                    <button\n                      onClick={() => setPlanGenerado(null)}\n                      className=\"bg-gray-600 text-white px-6 py-3 rounded-lg hover:bg-gray-700 transition font-bold\"\n                    >\n                      Nuevo Plan\n                    </button>\n                  </div>\n                </div>\n                \n                {/* SECCI√ìN ACTUALIZADA CON NUEVO CAMPO */}\n                {planGenerado.contenidos && Array.isArray(planGenerado.contenidos) && planGenerado.contenidos.length > 0 && (\n                  <div className=\"bg-blue-50 rounded-xl p-6\">\n                    <h4 className=\"text-xl font-bold text-blue-900 mb-4 flex items-center gap-2\">\n                      üìö Contenidos del {planGenerado.trimestre}\n                    </h4>\n                    <ul className=\"space-y-2\">\n                      {planGenerado.contenidos.map((cont, i) => (\n                        <li key={i} className=\"flex gap-3\">\n                          <span className=\"text-blue-600 font-bold\">{i + 1}.</span>\n                          <span className=\"text-gray-800\">{cont}</span>\n                        </li>\n                      ))}\n                    </ul>\n                  </div>\n                )}\n                \n                {/* NUEVA SECCI√ìN: DESARROLLO DEL CONTENIDO PARA CLASES */}\n                {planGenerado.desarrolloClases && Object.keys(planGenerado.desarrolloClases).length > 0 && (\n                  <div className=\"bg-gradient-to-r from-teal-50 to-cyan-50 rounded-xl p-6 border-2 border-teal-200\">\n                    <h4 className=\"text-xl font-bold text-teal-900 mb-4 flex items-center gap-2\">\n                      üéØ Desarrollo del Contenido para Clases\n                    </h4>\n                    <div className=\"space-y-6\">\n                      {Object.entries(planGenerado.desarrolloClases).map(([contenidoKey, desarrollo]) => (\n                        <div key={contenidoKey} className=\"bg-white rounded-lg p-4 border border-teal-100\">\n                          <h5 className=\"font-bold text-lg text-teal-800 mb-3\">üìù {contenidoKey}</h5>\n                          \n                          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-3\">\n                            <div>\n                              <span className=\"font-semibold text-gray-700\">Duraci√≥n:</span>\n                              <span className=\"ml-2 text-teal-600\">{desarrollo.duracion || '3 sesiones de 45 minutos'}</span>\n                            </div>\n                          </div>\n\n                          {desarrollo.objetivos && desarrollo.objetivos.length > 0 && (\n                            <div className=\"mb-3\">\n                              <h6 className=\"font-semibold text-gray-700 mb-2\">Objetivos de Aprendizaje:</h6>\n                              <ul className=\"space-y-1\">\n                                {desarrollo.objetivos.map((objetivo, idx) => (\n                                  <li key={idx} className=\"flex gap-2\">\n                                    <span className=\"text-teal-500\">‚Ä¢</span>\n                                    <span className=\"text-gray-700\">{objetivo}</span>\n                                  </li>\n                                ))}\n                              </ul>\n                            </div>\n                          )}\n\n                          {desarrollo.materiales && desarrollo.materiales.length > 0 && (\n                            <div className=\"mb-3\">\n                              <h6 className=\"font-semibold text-gray-700 mb-2\">Materiales necesarios:</h6>\n                              <ul className=\"space-y-1\">\n                                {desarrollo.materiales.map((material, idx) => (\n                                  <li key={idx} className=\"flex gap-2\">\n                                    <span className=\"text-teal-500\">‚Ä¢</span>\n                                    <span className=\"text-gray-700\">{material}</span>\n                                  </li>\n                                ))}\n                              </ul>\n                            </div>\n                          )}\n\n                          {desarrollo.fases && desarrollo.fases.length > 0 && (\n                            <div>\n                              <h6 className=\"font-semibold text-gray-700 mb-2\">Fases de la actividad:</h6>\n                              <div className=\"space-y-3\">\n                                {desarrollo.fases.map((fase, index) => (\n                                  <div key={index} className=\"bg-gray-50 rounded-lg p-3\">\n                                    <h7 className=\"font-semibold text-gray-800 mb-2\">\n                                      SESI√ìN {index + 1} - {fase.titulo || 'Desarrollo'}\n                                    </h7>\n                                    <div className=\"space-y-2\">\n                                      {fase.actividades && fase.actividades.map((actividad, actIdx) => (\n                                        <div key={actIdx} className=\"flex gap-2 text-sm\">\n                                          <span className=\"font-medium text-teal-600 whitespace-nowrap\">\n                                            {actividad.tiempo}:\n                                          </span>\n                                          <span className=\"text-gray-700\">{actividad.descripcion}</span>\n                                        </div>\n                                      ))}\n                                    </div>\n                                  </div>\n                                ))}\n                              </div>\n                            </div>\n                          )}\n                        </div>\n                      ))}\n                    </div>\n                  </div>\n                )}\n                \n                {planGenerado.competencias && Array.isArray(planGenerado.competencias) && planGenerado.competencias.length > 0 && (\n                  <div className=\"bg-purple-50 rounded-xl p-6\">\n                    <h4 className=\"text-xl font-bold text-purple-900 mb-4 flex items-center gap-2\">\n                      üí™ Competencias a Desarrollar\n                    </h4>\n                    <ul className=\"space-y-2\">\n                      {planGenerado.competencias.map((comp, i) => (\n                        <li key={i} className=\"flex gap-3\">\n                          <span className=\"text-purple-600\">{i + 1}.</span>\n                          <span className=\"text-gray-800\">{comp}</span>\n                        </li>\n                      ))}\n                    </ul>\n                  </div>\n                )}\n                \n                {planGenerado.indicadoresLogro && Array.isArray(planGenerado.indicadoresLogro) && planGenerado.indicadoresLogro.length > 0 && (\n                  <div className=\"bg-teal-50 rounded-xl p-6\">\n                    <h4 className=\"text-xl font-bold text-teal-900 mb-4 flex items-center gap-2\">\n                      ‚úÖ Indicadores de Logro\n                    </h4>\n                    <ul className=\"space-y-2\">\n                      {planGenerado.indicadoresLogro.map((ind, i) => (\n                        <li key={i} className=\"flex gap-3\">\n                          <span className=\"text-teal-600\">‚Ä¢</span>\n                          <span className=\"text-gray-800\">{ind}</span>\n                        </li>\n                      ))}\n                    </ul>\n                  </div>\n                )}\n                \n                {planGenerado.metodologia && (\n                  <div className=\"bg-green-50 rounded-xl p-6\">\n                    <h4 className=\"text-xl font-bold text-green-900 mb-4 flex items-center gap-2\">\n                      üìñ Estrategias Metodol√≥gicas\n                    </h4>\n                    <p className=\"text-gray-800\">{planGenerado.metodologia}</p>\n                  </div>\n                )}\n                \n                {planGenerado.recursos && Array.isArray(planGenerado.recursos) && planGenerado.recursos.length > 0 && (\n                  <div className=\"bg-indigo-50 rounded-xl p-6\">\n                    <h4 className=\"text-xl font-bold text-indigo-900 mb-4 flex items-center gap-2\">\n                      üõ†Ô∏è Recursos Educativos\n                    </h4>\n                    <ul className=\"grid grid-cols-1 md:grid-cols-2 gap-2\">\n                      {planGenerado.recursos.map((rec, i) => (\n                        <li key={i} className=\"flex gap-2 items-center\">\n                          <span className=\"text-indigo-600\">‚Ä¢</span>\n                          <span className=\"text-gray-800\">{rec}</span>\n                        </li>\n                      ))}\n                    </ul>\n                  </div>\n                )}\n\n                {planGenerado.evaluacion && Array.isArray(planGenerado.evaluacion) && planGenerado.evaluacion.length > 0 && (\n                  <div className=\"bg-red-50 rounded-xl p-6\">\n                    <h4 className=\"text-xl font-bold text-red-900 mb-4 flex items-center gap-2\">\n                      üìä Instrumentos de Evaluaci√≥n\n                    </h4>\n                    <ul className=\"space-y-2\">\n                      {planGenerado.evaluacion.map((evalItem, i) => (\n                        <li key={i} className=\"flex gap-3\">\n                          <span className=\"text-red-600\">‚Ä¢</span>\n                          <span className=\"text-gray-800\">{evalItem}</span>\n                        </li>\n                      ))}\n                    </ul>\n                  </div>\n                )}\n\n                {planGenerado.adaptaciones && Array.isArray(planGenerado.adaptaciones) && planGenerado.adaptaciones.length > 0 && (\n                  <div className=\"bg-orange-50 rounded-xl p-6\">\n                    <h4 className=\"text-xl font-bold text-orange-900 mb-4 flex items-center gap-2\">\n                      ‚ôø Adaptaciones Curriculares\n                    </h4>\n                    <ul className=\"space-y-2\">\n                      {planGenerado.adaptaciones.map((adap, i) => (\n                        <li key={i} className=\"flex gap-3\">\n                          <span className=\"text-orange-600\">‚Ä¢</span>\n                          <span className=\"text-gray-800\">{adap}</span>\n                        </li>\n                      ))}\n                    </ul>\n                  </div>\n                )}\n                \n                {planGenerado.observaciones && (\n                  <div className=\"bg-gray-100 rounded-xl p-6\">\n                    <h4 className=\"text-xl font-bold text-gray-900 mb-4 flex items-center gap-2\">\n                      üìù Observaciones\n                    </h4>\n                    <p className=\"text-gray-800\">{planGenerado.observaciones}</p>\n                  </div>\n                )}\n\n                <div className=\"bg-gradient-to-r from-purple-100 to-pink-100 rounded-xl p-6 text-center\">\n                  <p className=\"text-purple-800 font-semibold\">\n                    ‚úÖ Plan trimestral generado exitosamente con IA\n                  </p>\n                  <p className=\"text-sm text-purple-600 mt-1\">\n                    Puedes descargar este plan en formato de texto para guardarlo o imprimirlo.\n                  </p>\n                </div>\n              </div>\n            )}\n          </div>\n        )}\n      </main>\n\n      <footer className=\"bg-gray-800 text-white py-6 mt-12\">\n        <div className=\"container mx-auto px-4 text-center\">\n          <p className=\"text-sm\">\n            ¬© 2025 Bringo Edu - Asistente Inteligente para Profesores\n          </p>\n          <p className=\"text-xs text-gray-400 mt-2\">\n            Desarrollado por GermanApp | Potenciado por IA\n          </p>\n        </div>\n      </footer>\n    </div>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}