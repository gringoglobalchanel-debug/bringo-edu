{"ast":null,"code":"import _objectSpread from\"C:/bringo-edu/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{Plus,Trash2,Download,AlertCircle,Users,Home,ChevronDown,ChevronUp,ClipboardList,Calendar,Sparkles,User,LogOut,LogIn,TrendingUp,BarChart3,Target,Award,AlertTriangle,Search,Share,Eye,EyeOff,PieChart}from'lucide-react';import{initializeApp}from'firebase/app';import{getAuth,createUserWithEmailAndPassword,signInWithEmailAndPassword,signOut,onAuthStateChanged}from'firebase/auth';import{getFirestore,collection,addDoc,getDocs,updateDoc,deleteDoc,doc,query,where}from'firebase/firestore';// Importar librerías REALES de exportación\nimport*as XLSX from'xlsx';import jsPDF from'jspdf';import'jspdf-autotable';import{Document,Packer,Paragraph,TextRun,Table,TableCell,TableRow,HeadingLevel,AlignmentType}from'docx';// Configuración de Firebase\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const firebaseConfig={apiKey:\"AIzaSyCdRpj7y3L4PIwWiJgzYRHDU3XxcIVfmW4\",authDomain:\"bringoedu.firebaseapp.com\",projectId:\"bringoedu\",storageBucket:\"bringoedu.firebasestorage.app\",messagingSenderId:\"667720262345\",appId:\"1:667720262345:web:ad55dd71c19ffcb73fa318\"};// Inicializar Firebase\nconst app=initializeApp(firebaseConfig);const auth=getAuth(app);const db=getFirestore(app);// Componente para gráfico de distribución\nconst DistribucionNotas=_ref=>{let{estudiantes,calcularPromedioFinal}=_ref;const calcularDistribucion=()=>{const distribucion={excelente:0,// 4.5 - 5.0\nbueno:0,// 3.5 - 4.4\nregular:0,// 3.0 - 3.4\nriesgo:0// 0 - 2.9\n};estudiantes.forEach(estudiante=>{const promedio=parseFloat(calcularPromedioFinal(estudiante));if(promedio>=4.5)distribucion.excelente++;else if(promedio>=3.5)distribucion.bueno++;else if(promedio>=3.0)distribucion.regular++;else if(promedio>0)distribucion.riesgo++;});return distribucion;};const distribucion=calcularDistribucion();const total=estudiantes.length;if(total===0){return/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-8 text-gray-500\",children:/*#__PURE__*/_jsx(\"p\",{children:\"No hay datos suficientes\"})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-semibold text-green-600\",children:\"Excelente (4.5-5.0)\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm font-bold\",children:[distribucion.excelente,\" (\",Math.round(distribucion.excelente/total*100),\"%)\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-full bg-gray-200 rounded-full h-3\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-green-500 h-3 rounded-full transition-all duration-500\",style:{width:\"\".concat(distribucion.excelente/total*100,\"%\")}})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-semibold text-blue-600\",children:\"Bueno (3.5-4.4)\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm font-bold\",children:[distribucion.bueno,\" (\",Math.round(distribucion.bueno/total*100),\"%)\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-full bg-gray-200 rounded-full h-3\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-blue-500 h-3 rounded-full transition-all duration-500\",style:{width:\"\".concat(distribucion.bueno/total*100,\"%\")}})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-semibold text-yellow-600\",children:\"Regular (3.0-3.4)\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm font-bold\",children:[distribucion.regular,\" (\",Math.round(distribucion.regular/total*100),\"%)\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-full bg-gray-200 rounded-full h-3\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-yellow-500 h-3 rounded-full transition-all duration-500\",style:{width:\"\".concat(distribucion.regular/total*100,\"%\")}})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-semibold text-red-600\",children:\"En Riesgo (0-2.9)\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm font-bold\",children:[distribucion.riesgo,\" (\",Math.round(distribucion.riesgo/total*100),\"%)\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-full bg-gray-200 rounded-full h-3\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-red-500 h-3 rounded-full transition-all duration-500\",style:{width:\"\".concat(distribucion.riesgo/total*100,\"%\")}})})]});};// Componente para Fila de Notas Rápidas\nconst FilaNotasRapidas=_ref2=>{let{estudiante,onAgregarNota,calcularPromedioFinal,claseSeleccionada,usuario,actualizarNota}=_ref2;const[notaDiaria,setNotaDiaria]=useState('');const[notaApreciacion,setNotaApreciacion]=useState('');const[notaExamen,setNotaExamen]=useState('');const[fecha,setFecha]=useState(new Date().toISOString().split('T')[0]);const handleAgregarNota=async(tipo,valor)=>{if(valor&&parseFloat(valor)>=0&&parseFloat(valor)<=5){try{await onAgregarNota(estudiante.id,tipo,parseFloat(valor),fecha);// Limpiar el campo\nif(tipo==='notasDiarias')setNotaDiaria('');if(tipo==='apreciacion')setNotaApreciacion('');if(tipo==='examen')setNotaExamen('');}catch(error){console.error('Error agregando nota:',error);alert('Error al agregar la nota');}}else{alert('Por favor ingresa una nota válida entre 0 y 5');}};const compartirPorWhatsApp=()=>{const formatoNotas=notas=>{return notas.filter(n=>n.valor&&parseFloat(n.valor)>0).map(n=>\"\\uD83D\\uDCC5 \".concat(n.fecha,\": \").concat(n.valor,\"/5.0\")).join('\\n')||'📭 Sin notas registradas';};const mensaje=\"\\uD83D\\uDCCA *REPORTE DE NOTAS - \".concat(claseSeleccionada===null||claseSeleccionada===void 0?void 0:claseSeleccionada.nombre,\"*\\n\\n*Estudiante:* \").concat(estudiante.nombre,\"\\n*Profesor:* \").concat(usuario===null||usuario===void 0?void 0:usuario.nombre,\"\\n*Instituci\\xF3n:* \").concat((claseSeleccionada===null||claseSeleccionada===void 0?void 0:claseSeleccionada.institucion)||'Bringo Edu',\"\\n*Fecha de reporte:* \").concat(new Date().toLocaleDateString('es-PA'),\"\\n\\n*\\uD83D\\uDCDD NOTAS DIARIAS:*\\n\").concat(formatoNotas(estudiante.notasDiarias),\"\\n\\n*\\u2B50 APRECIACI\\xD3N:*\\n\").concat(formatoNotas(estudiante.apreciacion),\"\\n\\n*\\uD83D\\uDCCB EXAMEN:*\\n\").concat(formatoNotas(estudiante.examen),\"\\n\\n*\\uD83C\\uDFC6 PROMEDIO FINAL:* \").concat(calcularPromedioFinal(estudiante),\"/5.0\\n\\n---\\nGenerado con Bringo Edu \\uD83D\\uDCDA | Transparente y Confiable\");const url=\"https://wa.me/?text=\".concat(encodeURIComponent(mensaje));window.open(url,'_blank');};return/*#__PURE__*/_jsxs(\"tr\",{className:\"border-b border-gray-200 hover:bg-gray-50\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-3 font-semibold\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-purple-600 text-white w-8 h-8 rounded-full flex items-center justify-center font-bold text-sm\",children:estudiante.nombre.charAt(0).toUpperCase()}),/*#__PURE__*/_jsx(\"span\",{children:estudiante.nombre})]})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.1\",min:\"0\",max:\"5\",placeholder:\"0-5\",value:notaDiaria,onChange:e=>setNotaDiaria(e.target.value),className:\"w-20 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500 text-center\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleAgregarNota('notasDiarias',notaDiaria),className:\"bg-blue-600 text-white px-3 py-2 rounded-lg hover:bg-blue-700 transition text-sm font-semibold\",children:\"+\"})]})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.1\",min:\"0\",max:\"5\",placeholder:\"0-5\",value:notaApreciacion,onChange:e=>setNotaApreciacion(e.target.value),className:\"w-20 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-green-500 text-center\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleAgregarNota('apreciacion',notaApreciacion),className:\"bg-green-600 text-white px-3 py-2 rounded-lg hover:bg-green-700 transition text-sm font-semibold\",children:\"+\"})]})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.1\",min:\"0\",max:\"5\",placeholder:\"0-5\",value:notaExamen,onChange:e=>setNotaExamen(e.target.value),className:\"w-20 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-purple-500 text-center\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleAgregarNota('examen',notaExamen),className:\"bg-purple-600 text-white px-3 py-2 rounded-lg hover:bg-purple-700 transition text-sm font-semibold\",children:\"+\"})]})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-3 text-center\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-xl font-bold \".concat(parseFloat(calcularPromedioFinal(estudiante))>=4.5?'text-green-600':parseFloat(calcularPromedioFinal(estudiante))>=3.5?'text-blue-600':parseFloat(calcularPromedioFinal(estudiante))>=3.0?'text-yellow-600':'text-red-600'),children:calcularPromedioFinal(estudiante)})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-3 text-center\",children:/*#__PURE__*/_jsxs(\"button\",{onClick:compartirPorWhatsApp,className:\"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition font-semibold flex items-center gap-2 text-sm\",children:[/*#__PURE__*/_jsx(Share,{className:\"w-4 h-4\"}),\"WhatsApp\"]})})]});};// Componente de Modal Login\nconst ModalLogin=_ref3=>{let{mostrarLogin,setMostrarLogin,email,setEmail,password,setPassword,errorAuth,cargandoAuth,iniciarSesion,limpiarFormulariosAuth,setMostrarRegistro}=_ref3;const[mostrarPassword,setMostrarPassword]=useState(false);if(!mostrarLogin)return null;const handleSubmit=e=>{e.preventDefault();iniciarSesion();};return/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-gradient-to-br from-purple-900/95 via-blue-900/95 to-indigo-900/95 backdrop-blur-sm flex items-center justify-center z-50 p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-3xl shadow-2xl max-w-md w-full overflow-hidden transform transition-all\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-r from-purple-600 via-blue-600 to-indigo-600 p-8 text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"inline-block bg-white rounded-full p-4 mb-4 shadow-lg\",children:/*#__PURE__*/_jsx(LogIn,{className:\"w-8 h-8 text-purple-600\"})}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-3xl font-bold text-white mb-2\",children:\"\\xA1Bienvenido de nuevo!\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-purple-100 text-sm\",children:\"Ingresa a tu cuenta de Bringo Edu\"})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"p-8\",children:[errorAuth&&/*#__PURE__*/_jsx(\"div\",{className:\"bg-red-50 border-2 border-red-200 rounded-lg p-3 mb-4\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-red-800 text-sm font-semibold\",children:errorAuth})}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-5\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-center gap-2 text-sm font-bold text-gray-700 mb-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-purple-600\",children:\"\\uD83D\\uDCE7\"}),\" Email\"]}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",placeholder:\"profesor@ejemplo.com\",value:email,onChange:e=>setEmail(e.target.value),className:\"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:border-purple-500 focus:ring-2 focus:ring-purple-200 transition-all\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-center gap-2 text-sm font-bold text-gray-700 mb-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-purple-600\",children:\"\\uD83D\\uDD12\"}),\" Contrase\\xF1a\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"input\",{type:mostrarPassword?\"text\":\"password\",placeholder:\"\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\",value:password,onChange:e=>setPassword(e.target.value),className:\"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:border-purple-500 focus:ring-2 focus:ring-purple-200 transition-all pr-12\",required:true}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setMostrarPassword(!mostrarPassword),className:\"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700 transition\",children:mostrarPassword?/*#__PURE__*/_jsx(EyeOff,{className:\"w-5 h-5\"}):/*#__PURE__*/_jsx(Eye,{className:\"w-5 h-5\"})})]})]})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:cargandoAuth,className:\"w-full mt-8 py-4 rounded-xl font-bold text-lg shadow-lg transition-all \".concat(cargandoAuth?'bg-gray-400 cursor-not-allowed':'bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 hover:shadow-xl transform hover:scale-[1.02]',\" text-white\"),children:cargandoAuth?'Iniciando sesión...':'Iniciar Sesión'}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>{setMostrarLogin(false);limpiarFormulariosAuth();},className:\"w-full mt-3 bg-gray-100 text-gray-700 py-3 rounded-xl hover:bg-gray-200 transition font-semibold\",children:\"Cancelar\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6 text-center\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 text-sm mb-2\",children:\"\\xBFNo tienes cuenta?\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>{setMostrarLogin(false);setMostrarRegistro(true);},className:\"text-purple-600 hover:text-purple-800 font-bold text-lg hover:underline\",children:\"Reg\\xEDstrate aqu\\xED\"})]})]})]})});};// Componente de Modal Registro\nconst ModalRegistro=_ref4=>{let{mostrarRegistro,setMostrarRegistro,email,setEmail,password,setPassword,nombreUsuario,setNombreUsuario,confirmarPassword,setConfirmarPassword,errorAuth,cargandoAuth,registrarUsuario,limpiarFormulariosAuth,setMostrarLogin}=_ref4;const[mostrarPassword,setMostrarPassword]=useState(false);const[mostrarConfirmarPassword,setMostrarConfirmarPassword]=useState(false);if(!mostrarRegistro)return null;const handleSubmit=e=>{e.preventDefault();registrarUsuario();};return/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-gradient-to-br from-green-900/95 via-teal-900/95 to-blue-900/95 backdrop-blur-sm flex items-center justify-center z-50 p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-3xl shadow-2xl max-w-md w-full overflow-hidden transform transition-all\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-r from-green-600 via-teal-600 to-blue-600 p-8 text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"inline-block bg-white rounded-full p-4 mb-4 shadow-lg\",children:/*#__PURE__*/_jsx(User,{className:\"w-8 h-8 text-green-600\"})}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-3xl font-bold text-white mb-2\",children:\"\\xA1\\xDAnete a Bringo Edu!\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-green-100 text-sm\",children:\"Crea tu cuenta y comienza a gestionar tus clases\"})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"p-8\",children:[errorAuth&&/*#__PURE__*/_jsx(\"div\",{className:\"bg-red-50 border-2 border-red-200 rounded-lg p-3 mb-4\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-red-800 text-sm font-semibold\",children:errorAuth})}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-5\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-center gap-2 text-sm font-bold text-gray-700 mb-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-green-600\",children:\"\\uD83D\\uDC64\"}),\" Nombre Completo\"]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Prof. Juan P\\xE9rez\",value:nombreUsuario,onChange:e=>setNombreUsuario(e.target.value),className:\"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:border-green-500 focus:ring-2 focus:ring-green-200 transition-all\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-center gap-2 text-sm font-bold text-gray-700 mb-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-green-600\",children:\"\\uD83D\\uDCE7\"}),\" Email\"]}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",placeholder:\"profesor@escuela.edu\",value:email,onChange:e=>setEmail(e.target.value),className:\"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:border-green-500 focus:ring-2 focus:ring-green-200 transition-all\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-center gap-2 text-sm font-bold text-gray-700 mb-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-green-600\",children:\"\\uD83D\\uDD12\"}),\" Contrase\\xF1a\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"input\",{type:mostrarPassword?\"text\":\"password\",placeholder:\"M\\xEDnimo 6 caracteres\",value:password,onChange:e=>setPassword(e.target.value),className:\"w-full px-4 py-3 border-2 border-gray-300 rounded-xl focus:outline-none focus:border-green-500 focus:ring-2 focus:ring-green-200 transition-all pr-12\",required:true,minLength:6}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setMostrarPassword(!mostrarPassword),className:\"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700 transition\",children:mostrarPassword?/*#__PURE__*/_jsx(EyeOff,{className:\"w-5 h-5\"}):/*#__PURE__*/_jsx(Eye,{className:\"w-5 h-5\"})})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 mt-1 ml-1\",children:\"Usa letras, n\\xFAmeros y s\\xEDmbolos\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-center gap-2 text-sm font-bold text-gray-700 mb-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-green-600\",children:\"\\u2705\"}),\" Confirmar Contrase\\xF1a\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"input\",{type:mostrarConfirmarPassword?\"text\":\"password\",placeholder:\"Repite tu contrase\\xF1a\",value:confirmarPassword,onChange:e=>setConfirmarPassword(e.target.value),className:\"w-full px-4 py-3 border-2 border-gray-300 rounded-xl focus:outline-none focus:border-green-500 focus:ring-2 focus:ring-green-200 transition-all pr-12\",required:true}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setMostrarConfirmarPassword(!mostrarConfirmarPassword),className:\"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700 transition\",children:mostrarConfirmarPassword?/*#__PURE__*/_jsx(EyeOff,{className:\"w-5 h-5\"}):/*#__PURE__*/_jsx(Eye,{className:\"w-5 h-5\"})})]})]})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:cargandoAuth,className:\"w-full mt-8 py-4 rounded-xl font-bold text-lg shadow-lg transition-all \".concat(cargandoAuth?'bg-gray-400 cursor-not-allowed':'bg-gradient-to-r from-green-600 to-teal-600 hover:from-green-700 hover:to-teal-700 hover:shadow-xl transform hover:scale-[1.02]',\" text-white\"),children:cargandoAuth?'Creando cuenta...':'Crear Cuenta'}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>{setMostrarRegistro(false);limpiarFormulariosAuth();},className:\"w-full mt-3 bg-gray-100 text-gray-700 py-3 rounded-xl hover:bg-gray-200 transition font-semibold\",children:\"Cancelar\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6 text-center\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 text-sm mb-2\",children:\"\\xBFYa tienes cuenta?\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>{setMostrarRegistro(false);setMostrarLogin(true);},className:\"text-green-600 hover:text-green-800 font-bold text-lg hover:underline\",children:\"Inicia sesi\\xF3n aqu\\xED\"})]})]})]})});};// Componente de Barra de Búsqueda de ESTUDIANTES MEJORADO con sugerencias\nconst BarraBusquedaEstudiantes=_ref5=>{let{estudiantes,onBuscarEstudiante,busquedaEstudiante,setBusquedaEstudiante}=_ref5;const[sugerencias,setSugerencias]=useState([]);const[mostrarSugerencias,setMostrarSugerencias]=useState(false);// Normalizar texto para búsqueda (minúsculas, sin tildes, sin comas)\nconst normalizarTexto=texto=>{return texto.toLowerCase().normalize(\"NFD\").replace(/[\\u0300-\\u036f]/g,\"\")// eliminar tildes\n.replace(/[.,]/g,\"\");// eliminar comas y puntos\n};// Filtrar sugerencias en tiempo real\nuseEffect(()=>{if(busquedaEstudiante.length>=2){const textoBusqueda=normalizarTexto(busquedaEstudiante);const sugerenciasFiltradas=estudiantes.filter(estudiante=>normalizarTexto(estudiante.nombre).includes(textoBusqueda));setSugerencias(sugerenciasFiltradas);setMostrarSugerencias(true);}else{setSugerencias([]);setMostrarSugerencias(false);}},[busquedaEstudiante,estudiantes]);const buscarYRedirigirEstudiante=nombre=>{if(!nombre.trim())return;const estudianteEncontrado=estudiantes.find(e=>normalizarTexto(e.nombre).includes(normalizarTexto(nombre)));if(estudianteEncontrado){onBuscarEstudiante(estudianteEncontrado);setBusquedaEstudiante('');setMostrarSugerencias(false);}else{alert('Estudiante no encontrado');}};const seleccionarSugerencia=estudiante=>{onBuscarEstudiante(estudiante);setBusquedaEstudiante('');setMostrarSugerencias(false);};return/*#__PURE__*/_jsx(\"div\",{className:\"bg-gradient-to-r from-blue-100 to-purple-100 rounded-xl p-4 mb-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col md:flex-row gap-4 items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 w-full relative\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-bold text-gray-700 mb-2\",children:\"\\uD83D\\uDD0D Buscar Estudiante\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Escribe el nombre del estudiante...\",value:busquedaEstudiante,onChange:e=>setBusquedaEstudiante(e.target.value),onKeyPress:e=>e.key==='Enter'&&buscarYRedirigirEstudiante(busquedaEstudiante),className:\"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-purple-500 text-sm md:text-base\"}),mostrarSugerencias&&sugerencias.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto\",children:sugerencias.map(estudiante=>/*#__PURE__*/_jsx(\"div\",{onClick:()=>seleccionarSugerencia(estudiante),className:\"px-4 py-3 hover:bg-purple-50 cursor-pointer border-b border-gray-100 last:border-b-0\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-purple-600 text-white w-8 h-8 rounded-full flex items-center justify-center font-bold text-sm\",children:estudiante.nombre.charAt(0).toUpperCase()}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:estudiante.nombre})]})},estudiante.id))})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-600 mt-2\",children:\"\\uD83D\\uDCA1 Comienza a escribir para ver sugerencias. Ignora may\\xFAsculas, tildes y comas.\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-4 md:mt-6\",children:/*#__PURE__*/_jsxs(\"button\",{onClick:()=>buscarYRedirigirEstudiante(busquedaEstudiante),className:\"bg-purple-600 text-white px-4 md:px-6 py-3 rounded-lg hover:bg-purple-700 transition font-bold flex items-center gap-2 text-sm md:text-base\",children:[/*#__PURE__*/_jsx(Search,{className:\"w-4 h-4 md:w-5 md:h-5\"}),/*#__PURE__*/_jsx(\"span\",{className:\"hidden sm:inline\",children:\"Buscar\"})]})})]})});};// Componente para Cuadro de Porcentajes (En construcción)\nconst CuadroPorcentajes=()=>{return/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-2xl shadow-lg p-8 text-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-md mx-auto\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-yellow-100 border-2 border-yellow-300 rounded-xl p-6 mb-6\",children:[/*#__PURE__*/_jsx(PieChart,{className:\"w-16 h-16 text-yellow-600 mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-2xl font-bold text-yellow-800 mb-2\",children:\"En Construcci\\xF3n\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-yellow-700\",children:\"Estamos trabajando en el Cuadro de Porcentajes. Pronto tendr\\xE1s acceso a estad\\xEDsticas detalladas y an\\xE1lisis avanzados de rendimiento.\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-gray-100 rounded-lg p-4\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600\",children:[\"\\uD83D\\uDCCA \",/*#__PURE__*/_jsx(\"strong\",{children:\"Pr\\xF3ximamente:\"}),\" Gr\\xE1ficos de porcentajes, an\\xE1lisis comparativos, tendencias de rendimiento y m\\xE1s herramientas de an\\xE1lisis educativo.\"]})})]})});};// Utilidades comunes\nconst normalizarDatos=datosIn=>{try{if(typeof datosIn==='string')return JSON.parse(datosIn);return datosIn!==null&&datosIn!==void 0?datosIn:{};}catch(_unused){return datosIn;}};const objetoATabla=obj=>{return Object.entries(obj).map(_ref6=>{let[key,value]=_ref6;return{Campo:key,Valor:typeof value==='object'?JSON.stringify(value):String(value)};});};const descargarBlob=(blob,nombreArchivo)=>{const url=URL.createObjectURL(blob);const link=document.createElement('a');link.href=url;link.download=nombreArchivo;document.body.appendChild(link);link.click();document.body.removeChild(link);URL.revokeObjectURL(url);};// Exportar a Excel (arreglado)\nconst exportarAExcel=(datosIn,nombreArchivo)=>{try{const datos=normalizarDatos(datosIn);const workbook=XLSX.utils.book_new();let worksheet;if(Array.isArray(datos)){worksheet=XLSX.utils.json_to_sheet(datos);}else if(typeof datos==='object'&&datos){worksheet=XLSX.utils.json_to_sheet(objetoATabla(datos));}else{worksheet=XLSX.utils.json_to_sheet([{Valor:String(datos)}]);}XLSX.utils.book_append_sheet(workbook,worksheet,'Datos');XLSX.writeFile(workbook,\"\".concat(nombreArchivo,\".xlsx\"));console.log('✅ Archivo Excel generado exitosamente');}catch(error){console.error('❌ Error al exportar a Excel:',error);alert('Error al generar archivo Excel');}};// Exportar a PDF (arreglado)\nconst exportarAPDF=(datosIn,nombreArchivo)=>{try{const datos=normalizarDatos(datosIn);const doc=new jsPDF();doc.setFontSize(16);doc.setTextColor(40);doc.text('Reporte Bringo Edu',20,20);doc.setFontSize(10);doc.setTextColor(100);doc.text(\"Generado: \".concat(new Date().toLocaleDateString('es-PA')),20,30);let yPosition=45;const agregarTabla=(titulo,datosTabla)=>{var _datosTabla$;if(!Array.isArray(datosTabla)||datosTabla.length===0)return;if(yPosition>260){doc.addPage();yPosition=20;}doc.setFontSize(12);doc.setTextColor(40);doc.text(titulo,20,yPosition);yPosition+=6;const headers=Object.keys((_datosTabla$=datosTabla[0])!==null&&_datosTabla$!==void 0?_datosTabla$:{});const body=datosTabla.map(row=>headers.map(h=>{const val=row[h];return typeof val==='object'?JSON.stringify(val):String(val!==null&&val!==void 0?val:'');}));doc.autoTable({startY:yPosition,head:[headers],body,styles:{fontSize:8},headStyles:{fillColor:[128,100,255]},margin:{left:20,right:20}});yPosition=doc.lastAutoTable.finalY+10;};if(Array.isArray(datos)){agregarTabla('Datos del Reporte',datos);}else if(typeof datos==='object'&&datos){agregarTabla('Resumen del Reporte',objetoATabla(datos));Object.entries(datos).forEach(_ref7=>{let[k,v]=_ref7;if(Array.isArray(v)&&v.length>0&&typeof v[0]==='object'){agregarTabla(String(k),v);}});}else{agregarTabla('Datos',[{Valor:String(datos)}]);}doc.save(\"\".concat(nombreArchivo,\".pdf\"));console.log('✅ Archivo PDF generado exitosamente');}catch(error){console.error('❌ Error al exportar a PDF:',error);alert('Error al generar archivo PDF');}};// Exportar a Word (arreglado)\nconst exportarAWord=async(datosIn,nombreArchivo)=>{try{const datos=normalizarDatos(datosIn);const children=[];children.push(new Paragraph({children:[new TextRun({text:'Reporte Bringo Edu',bold:true,size:32})],alignment:AlignmentType.CENTER,spacing:{after:400}}),new Paragraph({children:[new TextRun({text:\"Generado: \".concat(new Date().toLocaleDateString('es-PA')),italics:true,size:20})],alignment:AlignmentType.CENTER,spacing:{after:400}}));if(Array.isArray(datos)&&datos.length>0){const headers=Object.keys(datos[0]);const tableRows=[new TableRow({children:headers.map(key=>new TableCell({children:[new Paragraph({children:[new TextRun({text:key,bold:true})]})],shading:{fill:'D0C9FF'}}))}),...datos.map(row=>new TableRow({children:headers.map(key=>{var _row$key;return new TableCell({children:[new Paragraph({children:[new TextRun({text:typeof row[key]==='object'?JSON.stringify(row[key]):String((_row$key=row[key])!==null&&_row$key!==void 0?_row$key:'')})]})]});})}))];children.push(new Paragraph({children:[new TextRun({text:'Datos del Reporte',bold:true,size:24})],spacing:{after:200}}),new Table({width:{size:100,type:'pct'},rows:tableRows}));}else if(typeof datos==='object'&&datos){Object.entries(datos).forEach(_ref8=>{let[key,value]=_ref8;children.push(new Paragraph({children:[new TextRun({text:\"\".concat(key,\": \"),bold:true,size:20}),new TextRun({text:typeof value==='object'?JSON.stringify(value,null,2):String(value!==null&&value!==void 0?value:''),size:20})],spacing:{after:200}}));});}else{children.push(new Paragraph({children:[new TextRun({text:String(datos!==null&&datos!==void 0?datos:''),size:20})]}));}const doc=new Document({sections:[{properties:{},children}]});const buffer=await Packer.toBuffer(doc);const blob=new Blob([buffer],{type:'application/vnd.openxmlformats-officedocument.wordprocessingml.document'});descargarBlob(blob,\"\".concat(nombreArchivo,\".docx\"));console.log('✅ Archivo Word generado exitosamente');}catch(error){console.error('❌ Error al exportar a Word:',error);alert('Error al generar archivo Word');}};// Generar Blob por formato (útil también para Google Drive)\nconst generarBlobPorFormato=async(datosIn,formato)=>{const datos=normalizarDatos(datosIn);if(formato==='excel'){const workbook=XLSX.utils.book_new();let worksheet;if(Array.isArray(datos)){worksheet=XLSX.utils.json_to_sheet(datos);}else if(typeof datos==='object'&&datos){worksheet=XLSX.utils.json_to_sheet(objetoATabla(datos));}else{worksheet=XLSX.utils.json_to_sheet([{Valor:String(datos)}]);}XLSX.utils.book_append_sheet(workbook,worksheet,'Datos');const arrayBuffer=XLSX.write(workbook,{bookType:'xlsx',type:'array'});return{blob:new Blob([arrayBuffer],{type:'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet'}),ext:'xlsx',mime:'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet'};}if(formato==='pdf'){const pdfDoc=new jsPDF();pdfDoc.setFontSize(16);pdfDoc.text('Reporte Bringo Edu',20,20);pdfDoc.setFontSize(10);pdfDoc.text(\"Generado: \".concat(new Date().toLocaleDateString('es-PA')),20,30);let y=45;const agregarTabla=(titulo,arr)=>{var _arr$;if(!Array.isArray(arr)||arr.length===0)return;if(y>260){pdfDoc.addPage();y=20;}pdfDoc.setFontSize(12);pdfDoc.text(titulo,20,y);y+=6;const headers=Object.keys((_arr$=arr[0])!==null&&_arr$!==void 0?_arr$:{});const body=arr.map(r=>headers.map(h=>{var _r$h;return String((_r$h=r[h])!==null&&_r$h!==void 0?_r$h:'');}));pdfDoc.autoTable({startY:y,head:[headers],body,styles:{fontSize:8},headStyles:{fillColor:[128,100,255]},margin:{left:20,right:20}});y=pdfDoc.lastAutoTable.finalY+10;};if(Array.isArray(datos))agregarTabla('Datos del Reporte',datos);else if(typeof datos==='object'&&datos){agregarTabla('Resumen del Reporte',objetoATabla(datos));Object.entries(datos).forEach(_ref9=>{let[k,v]=_ref9;if(Array.isArray(v)&&v.length>0&&typeof v[0]==='object')agregarTabla(String(k),v);});}else{agregarTabla('Datos',[{Valor:String(datos)}]);}const blob=pdfDoc.output('blob');return{blob,ext:'pdf',mime:'application/pdf'};}if(formato==='word'){const children=[new Paragraph({children:[new TextRun({text:'Reporte Bringo Edu',bold:true,size:32})],alignment:AlignmentType.CENTER,spacing:{after:400}}),new Paragraph({children:[new TextRun({text:\"Generado: \".concat(new Date().toLocaleDateString('es-PA')),italics:true,size:20})],alignment:AlignmentType.CENTER,spacing:{after:400}})];if(Array.isArray(datos)&&datos.length>0){const headers=Object.keys(datos[0]);const rows=[new TableRow({children:headers.map(k=>new TableCell({children:[new Paragraph({children:[new TextRun({text:k,bold:true})]})],shading:{fill:'D0C9FF'}}))}),...datos.map(row=>new TableRow({children:headers.map(k=>{var _row$k;return new TableCell({children:[new Paragraph({children:[new TextRun({text:typeof row[k]==='object'?JSON.stringify(row[k]):String((_row$k=row[k])!==null&&_row$k!==void 0?_row$k:'')})]})]});})}))];children.push(new Paragraph({children:[new TextRun({text:'Datos del Reporte',bold:true,size:24})],spacing:{after:200}}),new Table({width:{size:100,type:'pct'},rows}));}else if(typeof datos==='object'&&datos){Object.entries(datos).forEach(_ref0=>{let[key,value]=_ref0;children.push(new Paragraph({children:[new TextRun({text:\"\".concat(key,\": \"),bold:true,size:20}),new TextRun({text:typeof value==='object'?JSON.stringify(value,null,2):String(value!==null&&value!==void 0?value:''),size:20})],spacing:{after:200}}));});}else{children.push(new Paragraph({children:[new TextRun({text:String(datos!==null&&datos!==void 0?datos:''),size:20})]}));}const docx=new Document({sections:[{properties:{},children}]});const buffer=await Packer.toBuffer(docx);const blob=new Blob([buffer],{type:'application/vnd.openxmlformats-officedocument.wordprocessingml.document'});return{blob,ext:'docx',mime:'application/vnd.openxmlformats-officedocument.wordprocessingml.document'};}throw new Error('Formato no soportado');};// Subir a Google Drive (REAL con backend)\nconst subirAGoogleDrive=async function(datosIn,nombreArchivoBase){let formato=arguments.length>2&&arguments[2]!==undefined?arguments[2]:'pdf';try{const{blob,ext,mime}=await generarBlobPorFormato(datosIn,formato);const nombreArchivo=\"\".concat(nombreArchivoBase,\".\").concat(ext);const formData=new FormData();formData.append('file',blob,nombreArchivo);formData.append('filename',nombreArchivo);formData.append('mimeType',mime);let authHeaders={};if(auth!==null&&auth!==void 0&&auth.currentUser){const token=await auth.currentUser.getIdToken(false);authHeaders={Authorization:\"Bearer \".concat(token)};}const DRIVE_UPLOAD_URL='https://bringo-edu-backend-2.onrender.com/api/drive/upload';const res=await fetch(DRIVE_UPLOAD_URL,{method:'POST',headers:authHeaders,body:formData});if(!res.ok){const err=await res.json().catch(()=>({}));throw new Error(err.error||\"Error \".concat(res.status,\" al subir a Google Drive\"));}const result=await res.json().catch(()=>({}));console.log('✅ Subida a Drive exitosa',result);alert('Archivo subido a Google Drive correctamente');return result;}catch(error){console.error('❌ Error al subir a Google Drive:',error);alert(\"Error al subir a Google Drive: \".concat(error.message));}};// [El resto del código se mantiene igual hasta el final...]\nexport default function AsistenteProfesor(){const[usuario,setUsuario]=useState(null);const[mostrarLogin,setMostrarLogin]=useState(false);const[mostrarRegistro,setMostrarRegistro]=useState(false);const[email,setEmail]=useState('');const[password,setPassword]=useState('');const[nombreUsuario,setNombreUsuario]=useState('');const[confirmarPassword,setConfirmarPassword]=useState('');const[errorAuth,setErrorAuth]=useState('');const[cargandoAuth,setCargandoAuth]=useState(false);const[view,setView]=useState('home');const[clases,setClases]=useState([]);const[claseSeleccionada,setClaseSeleccionada]=useState(null);const[nombreClase,setNombreClase]=useState('');const[grado,setGrado]=useState('');const[seccion,setSeccion]=useState('');const[nombreProfesorClase,setNombreProfesorClase]=useState('');const[institucionClase,setInstitucionClase]=useState('');const[estudiantes,setEstudiantes]=useState([]);const[nombreEstudiante,setNombreEstudiante]=useState('');const[expandido,setExpandido]=useState({});const[fechaActual,setFechaActual]=useState(new Date().toISOString().split('T')[0]);const[nombreProfesor,setNombreProfesor]=useState('');const[institucion,setInstitucion]=useState('');const[gradoPlan,setGradoPlan]=useState('');const[materia,setMateria]=useState('');const[trimestre,setTrimestre]=useState('Primer Trimestre');const[planGenerado,setPlanGenerado]=useState(null);const[generandoPlan,setGenerandoPlan]=useState(false);// Estado para búsqueda de estudiantes - MANTENIDO\nconst[busquedaEstudiante,setBusquedaEstudiante]=useState('');// Efecto para manejar el estado de autenticación\nuseEffect(()=>{const unsubscribe=onAuthStateChanged(auth,user=>{if(user){setUsuario({email:user.email,nombre:user.displayName||user.email.split('@')[0],uid:user.uid});cargarClases(user.uid);}else{setUsuario(null);setClases([]);}});return()=>unsubscribe();},[]);// Cargar clases desde Firestore\nconst cargarClases=async userId=>{try{const q=query(collection(db,'clases'),where('userId','==',userId));const querySnapshot=await getDocs(q);const clasesData=[];querySnapshot.forEach(doc=>{clasesData.push(_objectSpread({id:doc.id},doc.data()));});setClases(clasesData);}catch(error){console.error('Error cargando clases:',error);}};const registrarUsuario=async()=>{setErrorAuth('');if(!email||!password||!nombreUsuario){setErrorAuth('Por favor completa todos los campos');return;}if(password!==confirmarPassword){setErrorAuth('Las contraseñas no coinciden');return;}if(password.length<6){setErrorAuth('La contraseña debe tener al menos 6 caracteres');return;}setCargandoAuth(true);try{const userCredential=await createUserWithEmailAndPassword(auth,email,password);setUsuario({email:userCredential.user.email,nombre:nombreUsuario,uid:userCredential.user.uid});setMostrarRegistro(false);limpiarFormulariosAuth();}catch(error){if(error.code==='auth/email-already-in-use'){setErrorAuth('Este correo ya está registrado');}else if(error.code==='auth/weak-password'){setErrorAuth('La contraseña es muy débil');}else{setErrorAuth('Error al registrar: '+error.message);}}finally{setCargandoAuth(false);}};const iniciarSesion=async()=>{setErrorAuth('');if(!email||!password){setErrorAuth('Por favor ingresa email y contraseña');return;}setCargandoAuth(true);try{const userCredential=await signInWithEmailAndPassword(auth,email,password);setUsuario({email:userCredential.user.email,nombre:userCredential.user.displayName||userCredential.user.email.split('@')[0],uid:userCredential.user.uid});setMostrarLogin(false);limpiarFormulariosAuth();}catch(error){if(error.code==='auth/user-not-found'){setErrorAuth('Usuario no encontrado');}else if(error.code==='auth/wrong-password'){setErrorAuth('Contraseña incorrecta');}else{setErrorAuth('Error al iniciar sesión: '+error.message);}}finally{setCargandoAuth(false);}};const cerrarSesion=async()=>{try{await signOut(auth);setUsuario(null);setView('home');setClaseSeleccionada(null);setClases([]);}catch(error){console.error('Error al cerrar sesión:',error);}};const limpiarFormulariosAuth=()=>{setEmail('');setPassword('');setNombreUsuario('');setConfirmarPassword('');setErrorAuth('');};// FUNCIÓN MEJORADA: Generar plan trimestral\nconst generarPlanConOpenAI=async()=>{if(!nombreProfesor.trim()||!institucion.trim()||!gradoPlan.trim()||!materia.trim()||!trimestre.trim()){alert('Por favor completa todos los campos');return;}setGenerandoPlan(true);try{const BACKEND_URL='https://bringo-edu-backend-2.onrender.com/api/generate-plan';const response=await fetch(BACKEND_URL,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({nombreProfesor,institucion,gradoPlan,materia,trimestre,incluirDesarrolloClases:true})});if(!response.ok){const errorData=await response.json().catch(()=>({error:'Error desconocido'}));throw new Error(errorData.error||\"Error \".concat(response.status,\" del servidor\"));}const data=await response.json();if(!data.contenidos||!Array.isArray(data.contenidos)||data.contenidos.length===0){alert('El servicio de IA no generó contenido. Intenta nuevamente.');return;}setPlanGenerado(_objectSpread(_objectSpread({},data),{},{fecha:data.fecha||new Date().toLocaleDateString('es-PA'),generadoPorIA:true}));}catch(error){console.error('❌ Error al generar plan:',error);alert(\"Error al generar el plan: \".concat(error.message));}finally{setGenerandoPlan(false);}};// FUNCIÓN MEJORADA: Descargar plan trimestral con múltiples formatos\nconst descargarPlan=function(){let formato=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'txt';if(!planGenerado)return;let contenido=\"PLAN TRIMESTRAL - BRINGO EDU\\n\";contenido+=\"\".concat('='.repeat(80),\"\\n\\n\");contenido+=\"INFORMACI\\xD3N GENERAL\\n\";contenido+=\"-\".repeat(80)+\"\\n\";contenido+=\"Profesor: \".concat(planGenerado.docente||planGenerado.profesor||nombreProfesor,\"\\n\");contenido+=\"Instituci\\xF3n: \".concat(planGenerado.institucion,\"\\n\");contenido+=\"Grado: \".concat(planGenerado.grado||gradoPlan,\"\\n\");contenido+=\"Asignatura: \".concat(planGenerado.asignatura||planGenerado.materia||materia,\"\\n\");contenido+=\"Trimestre: \".concat(planGenerado.trimestre,\"\\n\");contenido+=\"A\\xF1o Escolar: \".concat(planGenerado.anioEscolar||new Date().getFullYear(),\"\\n\");contenido+=\"Duraci\\xF3n: \".concat(planGenerado.duracionSemanas||'10-12',\" semanas\\n\");contenido+=\"Fecha de generaci\\xF3n: \".concat(planGenerado.fecha||new Date().toLocaleDateString('es-PA'),\"\\n\\n\");if(planGenerado.contenidos&&planGenerado.contenidos.length>0){contenido+=\"CONTENIDOS DEL TRIMESTRE\\n\";contenido+=\"-\".repeat(80)+\"\\n\";planGenerado.contenidos.forEach((cont,i)=>{contenido+=\"\".concat(i+1,\". \").concat(cont,\"\\n\");});contenido+=\"\\n\";}// Desarrollo del Contenido para Clases\nif(planGenerado.desarrolloClases&&Object.keys(planGenerado.desarrolloClases).length>0){contenido+=\"DESARROLLO DEL CONTENIDO PARA CLASES\\n\";contenido+=\"-\".repeat(80)+\"\\n\";Object.entries(planGenerado.desarrolloClases).forEach(_ref1=>{let[contenidoKey,desarrollo]=_ref1;contenido+=\"\\n\\uD83D\\uDCDD \".concat(contenidoKey,\":\\n\");contenido+=\"Duraci\\xF3n: \".concat(desarrollo.duracion||'3 sesiones de 45 minutos',\"\\n\\n\");if(desarrollo.objetivos&&desarrollo.objetivos.length>0){contenido+=\"Objetivos de Aprendizaje:\\n\";desarrollo.objetivos.forEach(objetivo=>{contenido+=\"- \".concat(objetivo,\"\\n\");});contenido+=\"\\n\";}if(desarrollo.materiales&&desarrollo.materiales.length>0){contenido+=\"Materiales necesarios:\\n\";desarrollo.materiales.forEach(material=>{contenido+=\"- \".concat(material,\"\\n\");});contenido+=\"\\n\";}if(desarrollo.fases&&desarrollo.fases.length>0){contenido+=\"Fases de la actividad:\\n\";desarrollo.fases.forEach((fase,index)=>{contenido+=\"\\nSESI\\xD3N \".concat(index+1,\" - \").concat(fase.titulo||'Desarrollo',\"\\n\");if(fase.actividades){fase.actividades.forEach(actividad=>{contenido+=\"\".concat(actividad.tiempo,\": \").concat(actividad.descripcion,\"\\n\");});}});contenido+=\"\\n\";}contenido+=\"-\".repeat(40)+\"\\n\";});}if(planGenerado.competencias&&planGenerado.competencias.length>0){contenido+=\"COMPETENCIAS A DESARROLLAR\\n\";contenido+=\"-\".repeat(80)+\"\\n\";planGenerado.competencias.forEach((comp,i)=>{contenido+=\"\".concat(i+1,\". \").concat(comp,\"\\n\");});contenido+=\"\\n\";}if(planGenerado.indicadoresLogro&&planGenerado.indicadoresLogro.length>0){contenido+=\"INDICADORES DE LOGRO\\n\";contenido+=\"-\".repeat(80)+\"\\n\";planGenerado.indicadoresLogro.forEach((ind,i)=>{contenido+=\"\\u2022 \".concat(ind,\"\\n\");});contenido+=\"\\n\";}if(planGenerado.metodologia){contenido+=\"ESTRATEGIAS METODOL\\xD3GICAS\\n\";contenido+=\"-\".repeat(80)+\"\\n\";contenido+=\"\".concat(planGenerado.metodologia,\"\\n\\n\");}if(planGenerado.recursos&&planGenerado.recursos.length>0){contenido+=\"RECURSOS EDUCATIVOS\\n\";contenido+=\"-\".repeat(80)+\"\\n\";planGenerado.recursos.forEach((rec,i)=>{contenido+=\"\\u2022 \".concat(rec,\"\\n\");});contenido+=\"\\n\";}if(planGenerado.evaluacion&&Array.isArray(planGenerado.evaluacion)&&planGenerado.evaluacion.length>0){contenido+=\"INSTRUMENTOS DE EVALUACI\\xD3N\\n\";contenido+=\"-\".repeat(80)+\"\\n\";planGenerado.evaluacion.forEach((evalItem,i)=>{contenido+=\"\\u2022 \".concat(evalItem,\"\\n\");});contenido+=\"\\n\";}if(planGenerado.adaptaciones&&planGenerado.adaptaciones.length>0){contenido+=\"ADAPTACIONES CURRICULARES\\n\";contenido+=\"-\".repeat(80)+\"\\n\";planGenerado.adaptaciones.forEach((adap,i)=>{contenido+=\"\\u2022 \".concat(adap,\"\\n\");});contenido+=\"\\n\";}if(planGenerado.observaciones){contenido+=\"OBSERVACIONES\\n\";contenido+=\"-\".repeat(80)+\"\\n\";contenido+=\"\".concat(planGenerado.observaciones,\"\\n\\n\");}contenido+=\"\\n\".concat('='.repeat(80),\"\\n\");contenido+=\"Generado con Bringo Edu - Asistente Inteligente para Profesores\\n\";contenido+=\"Fecha: \".concat(new Date().toLocaleDateString('es-PA'),\"\\n\");const elemento=document.createElement('a');const archivo=new Blob([contenido],{type:'text/plain;charset=utf-8'});elemento.href=URL.createObjectURL(archivo);elemento.download=\"Plan_Trimestral_\".concat(planGenerado.asignatura||materia,\"_\").concat(planGenerado.trimestre.replace(/\\s+/g,'_'),\".txt\");document.body.appendChild(elemento);elemento.click();document.body.removeChild(elemento);};// FUNCIÓN MEJORADA: Agregar clase con nuevos campos\nconst agregarClase=async()=>{if(!usuario){alert('Debes iniciar sesión para crear clases');setMostrarLogin(true);return;}if(!nombreClase.trim()||!grado.trim()||!seccion.trim()||!nombreProfesorClase.trim()||!institucionClase.trim()){alert('Por favor completa todos los campos');return;}try{const nuevaClase={nombre:\"\".concat(nombreClase,\" \").concat(grado).concat(seccion),grado,seccion,materia:nombreClase,profesor:nombreProfesorClase,institucion:institucionClase,estudiantes:[],userId:usuario.uid,fechaCreacion:new Date().toISOString()};const docRef=await addDoc(collection(db,'clases'),nuevaClase);setClases([...clases,_objectSpread({id:docRef.id},nuevaClase)]);setNombreClase('');setGrado('');setSeccion('');setNombreProfesorClase('');setInstitucionClase('');}catch(error){console.error('❌ Error agregando clase:',error);alert(\"Error al crear la clase: \".concat(error.message));}};const eliminarClase=async id=>{if(window.confirm('¿Estás seguro de eliminar esta clase?')){try{await deleteDoc(doc(db,'clases',id));setClases(clases.filter(c=>c.id!==id));if((claseSeleccionada===null||claseSeleccionada===void 0?void 0:claseSeleccionada.id)===id){setClaseSeleccionada(null);setView('home');}}catch(error){console.error('Error eliminando clase:',error);alert('Error al eliminar la clase');}}};const seleccionarClase=clase=>{if(!usuario){alert('Debes iniciar sesión para acceder a las clases');setMostrarLogin(true);return;}setClaseSeleccionada(clase);setEstudiantes(clase.estudiantes||[]);setView('clase');};// FUNCIÓN MEJORADA: Agregar estudiante\nconst agregarEstudiante=async()=>{if(!nombreEstudiante.trim()){alert('Ingresa el nombre del estudiante');return;}try{const nuevoEstudiante={id:Date.now().toString(),nombre:nombreEstudiante,notasDiarias:[],apreciacion:[],examen:[],asistencia:{}};const nuevosEstudiantes=[...estudiantes,nuevoEstudiante];setEstudiantes(nuevosEstudiantes);// Actualizar en Firestore\nawait updateDoc(doc(db,'clases',claseSeleccionada.id),{estudiantes:nuevosEstudiantes});// Actualizar estado local\nconst clasesActualizadas=clases.map(c=>c.id===claseSeleccionada.id?_objectSpread(_objectSpread({},c),{},{estudiantes:nuevosEstudiantes}):c);setClases(clasesActualizadas);setNombreEstudiante('');}catch(error){console.error('Error agregando estudiante:',error);alert('Error al agregar estudiante');}};const marcarAsistencia=async(estudianteId,fecha,estado)=>{try{const nuevosEstudiantes=estudiantes.map(e=>{if(e.id===estudianteId){return _objectSpread(_objectSpread({},e),{},{asistencia:_objectSpread(_objectSpread({},e.asistencia),{},{[fecha]:estado})});}return e;});setEstudiantes(nuevosEstudiantes);// Actualizar en Firestore\nawait updateDoc(doc(db,'clases',claseSeleccionada.id),{estudiantes:nuevosEstudiantes});// Actualizar estado local\nconst clasesActualizadas=clases.map(c=>c.id===claseSeleccionada.id?_objectSpread(_objectSpread({},c),{},{estudiantes:nuevosEstudiantes}):c);setClases(clasesActualizadas);}catch(error){console.error('Error marcando asistencia:',error);}};// FUNCIÓN CORREGIDA: Agregar nota - AHORA FUNCIONA CORRECTAMENTE\nconst agregarNota=async function(estudianteId,seccion){let valor=arguments.length>2&&arguments[2]!==undefined?arguments[2]:'';let fecha=arguments.length>3&&arguments[3]!==undefined?arguments[3]:new Date().toISOString().split('T')[0];try{const nuevosEstudiantes=estudiantes.map(e=>{if(e.id===estudianteId){const nuevaNota={valor:valor?parseFloat(valor):'',fecha:fecha};return _objectSpread(_objectSpread({},e),{},{[seccion]:[...e[seccion],nuevaNota]});}return e;});setEstudiantes(nuevosEstudiantes);// Actualizar en Firestore\nawait updateDoc(doc(db,'clases',claseSeleccionada.id),{estudiantes:nuevosEstudiantes});// Actualizar estado local\nconst clasesActualizadas=clases.map(c=>c.id===claseSeleccionada.id?_objectSpread(_objectSpread({},c),{},{estudiantes:nuevosEstudiantes}):c);setClases(clasesActualizadas);}catch(error){console.error('Error agregando nota:',error);alert('Error al agregar nota');}};const actualizarNota=async(estudianteId,seccion,indice,campo,valor)=>{try{const nuevosEstudiantes=estudiantes.map(e=>{if(e.id===estudianteId){const nuevasNotas=[...e[seccion]];nuevasNotas[indice]=_objectSpread(_objectSpread({},nuevasNotas[indice]),{},{[campo]:valor});return _objectSpread(_objectSpread({},e),{},{[seccion]:nuevasNotas});}return e;});setEstudiantes(nuevosEstudiantes);// Actualizar en Firestore\nawait updateDoc(doc(db,'clases',claseSeleccionada.id),{estudiantes:nuevosEstudiantes});// Actualizar estado local\nconst clasesActualizadas=clases.map(c=>c.id===claseSeleccionada.id?_objectSpread(_objectSpread({},c),{},{estudiantes:nuevosEstudiantes}):c);setClases(clasesActualizadas);}catch(error){console.error('Error actualizando nota:',error);}};const eliminarNota=async(estudianteId,seccion,indice)=>{try{const nuevosEstudiantes=estudiantes.map(e=>{if(e.id===estudianteId){const nuevasNotas=e[seccion].filter((_,i)=>i!==indice);return _objectSpread(_objectSpread({},e),{},{[seccion]:nuevasNotas});}return e;});setEstudiantes(nuevosEstudiantes);// Actualizar en Firestore\nawait updateDoc(doc(db,'clases',claseSeleccionada.id),{estudiantes:nuevosEstudiantes});// Actualizar estado local\nconst clasesActualizadas=clases.map(c=>c.id===claseSeleccionada.id?_objectSpread(_objectSpread({},c),{},{estudiantes:nuevosEstudiantes}):c);setClases(clasesActualizadas);}catch(error){console.error('Error eliminando nota:',error);}};const eliminarEstudiante=async id=>{try{const nuevosEstudiantes=estudiantes.filter(e=>e.id!==id);setEstudiantes(nuevosEstudiantes);// Actualizar en Firestore\nawait updateDoc(doc(db,'clases',claseSeleccionada.id),{estudiantes:nuevosEstudiantes});// Actualizar estado local\nconst clasesActualizadas=clases.map(c=>c.id===claseSeleccionada.id?_objectSpread(_objectSpread({},c),{},{estudiantes:nuevosEstudiantes}):c);setClases(clasesActualizadas);}catch(error){console.error('Error eliminando estudiante:',error);alert('Error al eliminar estudiante');}};const contarAsistencias=estudiante=>{const registros=estudiante.asistencia||{};const presente=Object.values(registros).filter(v=>v==='presente').length;const ausente=Object.values(registros).filter(v=>v==='ausente').length;const tardanza=Object.values(registros).filter(v=>v==='tardanza').length;return{presente,ausente,tardanza};};const calcularTotalSeccion=notas=>{if(!notas||notas.length===0)return 0;const numeros=notas.map(n=>{const valor=typeof n==='object'?parseFloat(n.valor):parseFloat(n);return isNaN(valor)?0:valor;}).filter(v=>v>0);if(numeros.length===0)return 0;return(numeros.reduce((a,b)=>a+b,0)/numeros.length).toFixed(2);};const calcularPromedioFinal=estudiante=>{const totalDiarias=parseFloat(calcularTotalSeccion(estudiante.notasDiarias));const totalApreciacion=parseFloat(calcularTotalSeccion(estudiante.apreciacion));const totalExamen=parseFloat(calcularTotalSeccion(estudiante.examen));const totales=[totalDiarias,totalApreciacion,totalExamen].filter(t=>t>0);if(totales.length===0)return 0;return((totalDiarias+totalApreciacion+totalExamen)/3).toFixed(2);};const toggleExpansion=estudianteId=>{setExpandido(prev=>_objectSpread(_objectSpread({},prev),{},{[estudianteId]:!prev[estudianteId]}));};// FUNCIÓN CORREGIDA: Buscar y redirigir estudiante - AHORA EN HOME\nconst buscarYRedirigirEstudiante=estudiante=>{// Si estamos en home, vamos a notas\nif(view==='home'){setView('notas');}// Expandir la sección del estudiante\nsetExpandido(prev=>_objectSpread(_objectSpread({},prev),{},{[estudiante.id]:true}));// Scroll a la sección del estudiante\nsetTimeout(()=>{const elemento=document.getElementById(\"estudiante-\".concat(estudiante.id));if(elemento){elemento.scrollIntoView({behavior:'smooth',block:'center'});// Resaltar temporalmente\nelemento.classList.add('bg-yellow-100');setTimeout(()=>{elemento.classList.remove('bg-yellow-100');},2000);}},500);setBusquedaEstudiante('');};const estudiantesEnRiesgo=estudiantes.filter(e=>parseFloat(calcularPromedioFinal(e))<3.0&&parseFloat(calcularPromedioFinal(e))>0);const promedioGeneral=()=>{const promedios=estudiantes.map(e=>parseFloat(calcularPromedioFinal(e))).filter(p=>p>0);if(promedios.length===0)return 0;return(promedios.reduce((a,b)=>a+b,0)/promedios.length).toFixed(1);};// FUNCIONES PARA LA VISTA DE PROGRESO\nconst obtenerRankingEstudiantes=()=>{return estudiantes.map(estudiante=>_objectSpread(_objectSpread({},estudiante),{},{promedio:parseFloat(calcularPromedioFinal(estudiante))})).filter(e=>e.promedio>0).sort((a,b)=>b.promedio-a.promedio).slice(0,5);// Top 5\n};// FUNCIÓN MEJORADA: Exportar datos de progreso\nconst exportarProgreso=formato=>{const datosProgreso={clase:claseSeleccionada===null||claseSeleccionada===void 0?void 0:claseSeleccionada.nombre,profesor:(claseSeleccionada===null||claseSeleccionada===void 0?void 0:claseSeleccionada.profesor)||nombreProfesorClase,institucion:(claseSeleccionada===null||claseSeleccionada===void 0?void 0:claseSeleccionada.institucion)||institucionClase,fecha:new Date().toLocaleDateString('es-PA'),promedioGeneral:promedioGeneral(),totalEstudiantes:estudiantes.length,estudiantesEnRiesgo:estudiantesEnRiesgo.length,ranking:obtenerRankingEstudiantes(),distribucion:calcularDistribucionNotas()};const nombreArchivo=\"Tablero_Progreso_\".concat(claseSeleccionada===null||claseSeleccionada===void 0?void 0:claseSeleccionada.nombre.replace(/\\s+/g,'_'));switch(formato){case'excel':exportarAExcel(JSON.stringify(datosProgreso),nombreArchivo);break;case'pdf':exportarAPDF(JSON.stringify(datosProgreso),nombreArchivo);break;case'word':exportarAWord(JSON.stringify(datosProgreso),nombreArchivo);break;case'drive':subirAGoogleDrive(JSON.stringify(datosProgreso),nombreArchivo);break;default:break;}};const calcularDistribucionNotas=()=>{const distribucion={excelente:0,// 4.5 - 5.0\nbueno:0,// 3.5 - 4.4\nregular:0,// 3.0 - 3.4\nriesgo:0// 0 - 2.9\n};estudiantes.forEach(estudiante=>{const promedio=parseFloat(calcularPromedioFinal(estudiante));if(promedio>=4.5)distribucion.excelente++;else if(promedio>=3.5)distribucion.bueno++;else if(promedio>=3.0)distribucion.regular++;else if(promedio>0)distribucion.riesgo++;});return distribucion;};return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50\",children:[/*#__PURE__*/_jsx(ModalLogin,{mostrarLogin:mostrarLogin,setMostrarLogin:setMostrarLogin,email:email,setEmail:setEmail,password:password,setPassword:setPassword,errorAuth:errorAuth,cargandoAuth:cargandoAuth,iniciarSesion:iniciarSesion,limpiarFormulariosAuth:limpiarFormulariosAuth,setMostrarRegistro:setMostrarRegistro}),/*#__PURE__*/_jsx(ModalRegistro,{mostrarRegistro:mostrarRegistro,setMostrarRegistro:setMostrarRegistro,email:email,setEmail:setEmail,password:password,setPassword:setPassword,nombreUsuario:nombreUsuario,setNombreUsuario:setNombreUsuario,confirmarPassword:confirmarPassword,setConfirmarPassword:setConfirmarPassword,errorAuth:errorAuth,cargandoAuth:cargandoAuth,registrarUsuario:registrarUsuario,limpiarFormulariosAuth:limpiarFormulariosAuth,setMostrarLogin:setMostrarLogin}),/*#__PURE__*/_jsx(\"header\",{className:\"bg-gradient-to-r from-purple-600 to-blue-600 text-white shadow-lg\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container mx-auto px-4 py-4 flex justify-between items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-4xl\",children:\"\\uD83D\\uDCDA\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold\",children:\"Bringo Edu\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-purple-100\",children:\"Asistente Inteligente para Profesores\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center gap-4\",children:usuario?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-right mr-4 hidden md:block\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"font-semibold text-sm\",children:[\"\\uD83D\\uDC4B Hola, \",usuario.nombre]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-purple-200\",children:usuario.email})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:cerrarSesion,className:\"flex items-center gap-2 bg-red-500 hover:bg-red-600 px-4 py-2 rounded-lg transition font-semibold\",children:[/*#__PURE__*/_jsx(LogOut,{className:\"w-4 h-4\"}),/*#__PURE__*/_jsx(\"span\",{className:\"hidden sm:inline\",children:\"Salir\"})]})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setMostrarLogin(true),className:\"flex items-center gap-2 bg-white text-purple-600 hover:bg-purple-50 px-4 py-2 rounded-lg transition font-semibold\",children:[/*#__PURE__*/_jsx(LogIn,{className:\"w-4 h-4\"}),/*#__PURE__*/_jsx(\"span\",{className:\"hidden sm:inline\",children:\"Iniciar Sesi\\xF3n\"})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setMostrarRegistro(true),className:\"flex items-center gap-2 bg-green-500 hover:bg-green-600 px-4 py-2 rounded-lg transition font-semibold\",children:[/*#__PURE__*/_jsx(User,{className:\"w-4 h-4\"}),/*#__PURE__*/_jsx(\"span\",{className:\"hidden sm:inline\",children:\"Registrarse\"})]})]})})]})}),/*#__PURE__*/_jsx(\"nav\",{className:\"bg-white shadow-md sticky top-0 z-40\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container mx-auto px-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-1 overflow-x-auto py-2\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setView('home'),className:\"flex items-center gap-2 px-4 md:px-6 py-3 rounded-lg font-semibold transition whitespace-nowrap \".concat(view==='home'?'bg-purple-600 text-white':'bg-gray-100 text-gray-700 hover:bg-gray-200'),children:[/*#__PURE__*/_jsx(Home,{className:\"w-5 h-5\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm md:text-base\",children:\"Inicio\"})]}),usuario&&claseSeleccionada&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setView('clase'),className:\"flex items-center gap-2 px-4 md:px-6 py-3 rounded-lg font-semibold transition whitespace-nowrap \".concat(view==='clase'?'bg-purple-600 text-white':'bg-gray-100 text-gray-700 hover:bg-gray-200'),children:[/*#__PURE__*/_jsx(Users,{className:\"w-5 h-5\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm md:text-base\",children:\"Estudiantes\"})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setView('asistencia'),className:\"flex items-center gap-2 px-4 md:px-6 py-3 rounded-lg font-semibold transition whitespace-nowrap \".concat(view==='asistencia'?'bg-purple-600 text-white':'bg-gray-100 text-gray-700 hover:bg-gray-200'),children:[/*#__PURE__*/_jsx(Calendar,{className:\"w-5 h-5\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm md:text-base\",children:\"Asistencia\"})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setView('notas'),className:\"flex items-center gap-2 px-4 md:px-6 py-3 rounded-lg font-semibold transition whitespace-nowrap \".concat(view==='notas'?'bg-purple-600 text-white':'bg-gray-100 text-gray-700 hover:bg-gray-200'),children:[/*#__PURE__*/_jsx(ClipboardList,{className:\"w-5 h-5\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm md:text-base\",children:\"Notas\"})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setView('porcentajes'),className:\"flex items-center gap-2 px-4 md:px-6 py-3 rounded-lg font-semibold transition whitespace-nowrap \".concat(view==='porcentajes'?'bg-purple-600 text-white':'bg-gray-100 text-gray-700 hover:bg-gray-200'),children:[/*#__PURE__*/_jsx(PieChart,{className:\"w-5 h-5\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm md:text-base\",children:\"Cuadro de %\"})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setView('progreso'),className:\"flex items-center gap-2 px-4 md:px-6 py-3 rounded-lg font-semibold transition whitespace-nowrap \".concat(view==='progreso'?'bg-purple-600 text-white':'bg-gray-100 text-gray-700 hover:bg-gray-200'),children:[/*#__PURE__*/_jsx(TrendingUp,{className:\"w-5 h-5\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm md:text-base\",children:\"Progreso\"})]})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setView('planificacion'),className:\"flex items-center gap-2 px-4 md:px-6 py-3 rounded-lg font-semibold transition whitespace-nowrap \".concat(view==='planificacion'?'bg-purple-600 text-white':'bg-gray-100 text-gray-700 hover:bg-gray-200'),children:[/*#__PURE__*/_jsx(Sparkles,{className:\"w-5 h-5\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm md:text-base\",children:\"Plan IA\"})]})]})})}),/*#__PURE__*/_jsxs(\"main\",{className:\"container mx-auto px-4 py-8\",children:[view==='home'&&/*#__PURE__*/_jsx(\"div\",{className:\"space-y-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl shadow-lg p-6 md:p-8\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-2xl md:text-3xl font-bold text-gray-800 mb-6 flex items-center gap-3\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-4xl\",children:\"\\uD83C\\uDFEB\"}),\"Mis Clases\"]}),usuario&&claseSeleccionada&&estudiantes.length>0&&/*#__PURE__*/_jsx(BarraBusquedaEstudiantes,{estudiantes:estudiantes,onBuscarEstudiante:buscarYRedirigirEstudiante,busquedaEstudiante:busquedaEstudiante,setBusquedaEstudiante:setBusquedaEstudiante}),!usuario&&/*#__PURE__*/_jsx(\"div\",{className:\"bg-yellow-50 border-2 border-yellow-200 rounded-xl p-6 mb-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start gap-4\",children:[/*#__PURE__*/_jsx(AlertCircle,{className:\"w-6 h-6 text-yellow-600 flex-shrink-0 mt-1\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-bold text-yellow-900 mb-2\",children:\"Inicia sesi\\xF3n para acceder\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-yellow-800 mb-4\",children:\"Crea una cuenta o inicia sesi\\xF3n para gestionar tus clases, estudiantes y generar planes de estudio con IA.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-3 flex-wrap\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setMostrarLogin(true),className:\"bg-purple-600 text-white px-6 py-2 rounded-lg hover:bg-purple-700 transition font-semibold\",children:\"Iniciar Sesi\\xF3n\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setMostrarRegistro(true),className:\"bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700 transition font-semibold\",children:\"Registrarse\"})]})]})]})}),usuario&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-r from-purple-100 to-blue-100 rounded-xl p-6 mb-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold text-gray-800 mb-4\",children:\"Crear Nueva Clase\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Materia (ej: Matem\\xE1ticas)\",value:nombreClase,onChange:e=>setNombreClase(e.target.value),className:\"px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-purple-500\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Grado (ej: 5to)\",value:grado,onChange:e=>setGrado(e.target.value),className:\"px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-purple-500\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Secci\\xF3n (ej: A)\",value:seccion,onChange:e=>setSeccion(e.target.value),className:\"px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-purple-500\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Nombre del Profesor\",value:nombreProfesorClase,onChange:e=>setNombreProfesorClase(e.target.value),className:\"px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-purple-500\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Instituci\\xF3n Educativa\",value:institucionClase,onChange:e=>setInstitucionClase(e.target.value),className:\"px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-purple-500\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:agregarClase,className:\"bg-gradient-to-r from-purple-600 to-blue-600 text-white px-6 py-3 rounded-lg hover:from-purple-700 hover:to-blue-700 transition font-bold flex items-center justify-center gap-2\",children:[/*#__PURE__*/_jsx(Plus,{className:\"w-5 h-5\"}),\"Crear Clase\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:[clases.length===0&&usuario&&/*#__PURE__*/_jsxs(\"div\",{className:\"col-span-full text-center py-12 text-gray-500\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-lg\",children:\"No tienes clases creadas a\\xFAn\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm mt-2\",children:\"Crea tu primera clase usando el formulario arriba\"})]}),clases.map(clase=>{var _clase$estudiantes;return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-br from-purple-500 to-blue-600 rounded-xl shadow-lg p-6 text-white hover:shadow-2xl transition-all transform hover:scale-105 cursor-pointer\",onClick:()=>seleccionarClase(clase),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-start mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-2xl font-bold mb-2\",children:clase.nombre}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-purple-100\",children:[((_clase$estudiantes=clase.estudiantes)===null||_clase$estudiantes===void 0?void 0:_clase$estudiantes.length)||0,\" estudiantes\"]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-purple-100 text-sm mt-1\",children:[\"Prof: \",clase.profesor]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-purple-100 text-sm\",children:[\"Inst: \",clase.institucion]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:e=>{e.stopPropagation();eliminarClase(clase.id);},className:\"bg-red-500 hover:bg-red-600 p-2 rounded-lg transition\",children:/*#__PURE__*/_jsx(Trash2,{className:\"w-5 h-5\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-4 pt-4 border-t border-purple-400\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-purple-100\",children:\"Click para gestionar\"})})]},clase.id);})]})]})}),view==='clase'&&claseSeleccionada&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl shadow-lg p-6 md:p-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-6\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-2xl md:text-3xl font-bold text-gray-800 flex items-center gap-3\",children:[/*#__PURE__*/_jsx(Users,{className:\"w-8 h-8 text-purple-600\"}),claseSeleccionada.nombre]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setClaseSeleccionada(null);setView('home');},className:\"bg-gray-200 hover:bg-gray-300 px-4 py-2 rounded-lg transition font-semibold\",children:\"Volver\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-r from-green-100 to-teal-100 rounded-xl p-6 mb-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold text-gray-800 mb-4\",children:\"Agregar Estudiante\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col md:flex-row gap-4\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Nombre completo del estudiante\",value:nombreEstudiante,onChange:e=>setNombreEstudiante(e.target.value),onKeyPress:e=>e.key==='Enter'&&agregarEstudiante(),className:\"flex-1 px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-green-500\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:agregarEstudiante,className:\"bg-gradient-to-r from-green-600 to-teal-600 text-white px-6 py-3 rounded-lg hover:from-green-700 hover:to-teal-700 transition font-bold flex items-center justify-center gap-2\",children:[/*#__PURE__*/_jsx(Plus,{className:\"w-5 h-5\"}),\"Agregar\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[estudiantes.length===0&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-12 text-gray-500\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-lg\",children:\"No hay estudiantes en esta clase\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm mt-2\",children:\"Agrega tu primer estudiante usando el formulario arriba\"})]}),estudiantes.map(estudiante=>/*#__PURE__*/_jsx(\"div\",{className:\"bg-gray-50 rounded-xl p-6 hover:bg-gray-100 transition\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-purple-600 text-white w-12 h-12 rounded-full flex items-center justify-center font-bold text-lg\",children:estudiante.nombre.charAt(0).toUpperCase()}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-xl font-bold text-gray-800\",children:estudiante.nombre}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600\",children:[\"Promedio: \",calcularPromedioFinal(estudiante),\"/5\"]})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{if(window.confirm(\"\\xBFEliminar a \".concat(estudiante.nombre,\"?\"))){eliminarEstudiante(estudiante.id);}},className:\"bg-red-500 hover:bg-red-600 text-white p-2 rounded-lg transition mt-4 md:mt-0\",children:/*#__PURE__*/_jsx(Trash2,{className:\"w-5 h-5\"})})]})},estudiante.id))]})]}),view==='asistencia'&&claseSeleccionada&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl shadow-lg p-6 md:p-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-6\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-2xl md:text-3xl font-bold text-gray-800 flex items-center gap-3\",children:[/*#__PURE__*/_jsx(Calendar,{className:\"w-8 h-8 text-purple-600\"}),\"Asistencia - \",claseSeleccionada.nombre]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-4\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:fechaActual,onChange:e=>setFechaActual(e.target.value),className:\"px-4 py-2 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-purple-500\"}),/*#__PURE__*/_jsx(OpcionesExportacion,{datos:JSON.stringify({clase:claseSeleccionada.nombre,profesor:claseSeleccionada.profesor,institucion:claseSeleccionada.institucion,fecha:fechaActual,estudiantes:estudiantes.map(e=>{var _e$asistencia;return{nombre:e.nombre,asistencia:((_e$asistencia=e.asistencia)===null||_e$asistencia===void 0?void 0:_e$asistencia[fechaActual])||'No registrada',historial:contarAsistencias(e)};})}),nombreArchivo:\"Asistencia_\".concat(claseSeleccionada.nombre.replace(/\\s+/g,'_'),\"_\").concat(fechaActual)})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[estudiantes.length===0&&/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-12 text-gray-500\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-lg\",children:\"No hay estudiantes en esta clase\"})}),estudiantes.map(estudiante=>{var _estudiante$asistenci;const asist=contarAsistencias(estudiante);const estadoHoy=(_estudiante$asistenci=estudiante.asistencia)===null||_estudiante$asistenci===void 0?void 0:_estudiante$asistenci[fechaActual];return/*#__PURE__*/_jsx(\"div\",{className:\"bg-gray-50 rounded-xl p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-xl font-bold text-gray-800 mb-2\",children:estudiante.nombre}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-4 text-sm\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-green-600 font-semibold\",children:[\"\\u2713 \",asist.presente,\"P\"]}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-yellow-600 font-semibold\",children:[\"\\u23F0 \",asist.tardanza,\"T\"]}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-red-600 font-semibold\",children:[\"\\u2717 \",asist.ausente,\"A\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2 flex-wrap mt-4 md:mt-0\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>marcarAsistencia(estudiante.id,fechaActual,'presente'),className:\"px-4 md:px-6 py-3 rounded-lg font-semibold transition text-sm md:text-base \".concat(estadoHoy==='presente'?'bg-green-600 text-white':'bg-green-100 text-green-700 hover:bg-green-200'),children:\"Presente\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>marcarAsistencia(estudiante.id,fechaActual,'tardanza'),className:\"px-4 md:px-6 py-3 rounded-lg font-semibold transition text-sm md:text-base \".concat(estadoHoy==='tardanza'?'bg-yellow-600 text-white':'bg-yellow-100 text-yellow-700 hover:bg-yellow-200'),children:\"Tardanza\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>marcarAsistencia(estudiante.id,fechaActual,'ausente'),className:\"px-4 md:px-6 py-3 rounded-lg font-semibold transition text-sm md:text-base \".concat(estadoHoy==='ausente'?'bg-red-600 text-white':'bg-red-100 text-red-700 hover:bg-red-200'),children:\"Ausente\"})]})]})},estudiante.id);})]})]}),view==='notas'&&claseSeleccionada&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl shadow-lg p-6 md:p-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-6\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-2xl md:text-3xl font-bold text-gray-800 flex items-center gap-3\",children:[/*#__PURE__*/_jsx(ClipboardList,{className:\"w-8 h-8 text-purple-600\"}),\"Notas - \",claseSeleccionada.nombre]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-4 flex-wrap\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-purple-100 px-4 md:px-6 py-3 rounded-lg\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-xs md:text-sm text-purple-600 font-semibold\",children:\"Promedio:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"ml-2 text-xl md:text-2xl font-bold text-purple-800\",children:[promedioGeneral(),\"/5\"]})]}),/*#__PURE__*/_jsx(OpcionesExportacion,{datos:JSON.stringify({clase:claseSeleccionada.nombre,profesor:claseSeleccionada.profesor,institucion:claseSeleccionada.institucion,fecha:new Date().toLocaleDateString('es-PA'),promedioGeneral:promedioGeneral(),estudiantes:estudiantes.map(e=>({nombre:e.nombre,notasDiarias:e.notasDiarias,apreciacion:e.apreciacion,examen:e.examen,promedioFinal:calcularPromedioFinal(e)}))}),nombreArchivo:\"Notas_\".concat(claseSeleccionada.nombre.replace(/\\s+/g,'_'))})]})]}),estudiantesEnRiesgo.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"bg-red-50 border-2 border-red-200 rounded-xl p-6 mb-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start gap-4\",children:[/*#__PURE__*/_jsx(AlertCircle,{className:\"w-6 h-6 text-red-600 flex-shrink-0 mt-1\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"font-bold text-red-900 mb-2\",children:[\"\\u26A0\\uFE0F Estudiantes en Riesgo (\",estudiantesEnRiesgo.length,\")\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-wrap gap-2\",children:estudiantesEnRiesgo.map(e=>/*#__PURE__*/_jsxs(\"span\",{className:\"bg-red-200 text-red-800 px-3 py-1 rounded-lg text-sm font-semibold\",children:[e.nombre,\": \",calcularPromedioFinal(e),\"/5\"]},e.id))})]})]})}),estudiantes.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl shadow-lg p-6 mb-6 border-2 border-purple-200\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-xl font-bold text-gray-800 mb-4 flex items-center gap-2\",children:[\"\\uD83D\\uDCCA Registro R\\xE1pido de Notas - \",new Date().toLocaleDateString('es-PA')]}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"w-full min-w-full\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-purple-600 text-white\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-left font-semibold\",children:\"Estudiante\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-center font-semibold\",children:\"Notas Diarias\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-center font-semibold\",children:\"Apreciaci\\xF3n\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-center font-semibold\",children:\"Examen\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-center font-semibold\",children:\"Promedio\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-center font-semibold\",children:\"Compartir\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:estudiantes.map(estudiante=>/*#__PURE__*/_jsx(FilaNotasRapidas,{estudiante:estudiante,onAgregarNota:agregarNota,calcularPromedioFinal:calcularPromedioFinal,claseSeleccionada:claseSeleccionada,usuario:usuario,actualizarNota:actualizarNota},estudiante.id))})]})}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 mt-3 text-center\",children:\"\\uD83D\\uDCA1 Ingresa las notas (0-5) y presiona \\\"+\\\" para agregar. Las notas se guardan autom\\xE1ticamente.\"})]}),estudiantes.length===0&&/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-12 text-gray-500\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-lg\",children:\"No hay estudiantes en esta clase\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-6\",children:estudiantes.map(estudiante=>/*#__PURE__*/_jsxs(\"div\",{id:\"estudiante-\".concat(estudiante.id),className:\"border-2 border-gray-200 rounded-xl overflow-hidden transition-all duration-300\",children:[/*#__PURE__*/_jsx(\"div\",{onClick:()=>toggleExpansion(estudiante.id),className:\"bg-gradient-to-r from-purple-100 to-blue-100 p-6 cursor-pointer hover:from-purple-200 hover:to-blue-200 transition\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-4 flex-1\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-purple-600 text-white w-12 h-12 rounded-full flex items-center justify-center font-bold text-lg flex-shrink-0\",children:estudiante.nombre.charAt(0).toUpperCase()}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-xl font-bold text-gray-800\",children:estudiante.nombre}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap gap-2 md:gap-4 mt-1 text-xs md:text-sm\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"Diarias: \",calcularTotalSeccion(estudiante.notasDiarias)]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Apreciaci\\xF3n: \",calcularTotalSeccion(estudiante.apreciacion)]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Examen: \",calcularTotalSeccion(estudiante.examen)]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-4 mt-4 md:mt-0\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-right\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xs md:text-sm text-gray-600\",children:\"Promedio\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-2xl md:text-3xl font-bold \".concat(parseFloat(calcularPromedioFinal(estudiante))>=3.5?'text-green-600':parseFloat(calcularPromedioFinal(estudiante))>=3.0?'text-yellow-600':'text-red-600'),children:[calcularPromedioFinal(estudiante),\"/5\"]})]}),expandido[estudiante.id]?/*#__PURE__*/_jsx(ChevronUp,{className:\"w-6 h-6 text-gray-600\"}):/*#__PURE__*/_jsx(ChevronDown,{className:\"w-6 h-6 text-gray-600\"})]})]})}),expandido[estudiante.id]&&/*#__PURE__*/_jsxs(\"div\",{className:\"p-6 space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-4\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"font-bold text-lg text-gray-800\",children:\"\\uD83D\\uDCDD Notas Diarias\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>agregarNota(estudiante.id,'notasDiarias'),className:\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition text-sm font-semibold flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Plus,{className:\"w-4 h-4\"}),\"Agregar\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:estudiante.notasDiarias.map((nota,idx)=>/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 p-4 rounded-lg flex gap-3\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.1\",min:\"0\",max:\"5\",placeholder:\"Nota\",value:nota.valor||'',onChange:e=>actualizarNota(estudiante.id,'notasDiarias',idx,'valor',e.target.value),className:\"flex-1 px-3 py-2 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-blue-500\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:nota.fecha||'',onChange:e=>actualizarNota(estudiante.id,'notasDiarias',idx,'fecha',e.target.value),className:\"px-3 py-2 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-blue-500\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>eliminarNota(estudiante.id,'notasDiarias',idx),className:\"bg-red-500 text-white p-2 rounded-lg hover:bg-red-600 transition\",children:/*#__PURE__*/_jsx(Trash2,{className:\"w-4 h-4\"})})]},idx))}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-2 text-right\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-600\",children:\"Promedio: \"}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-bold text-lg text-blue-600\",children:[calcularTotalSeccion(estudiante.notasDiarias),\"/5\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-4\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"font-bold text-lg text-gray-800\",children:\"\\u2B50 Apreciaci\\xF3n\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>agregarNota(estudiante.id,'apreciacion'),className:\"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition text-sm font-semibold flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Plus,{className:\"w-4 h-4\"}),\"Agregar\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:estudiante.apreciacion.map((nota,idx)=>/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 p-4 rounded-lg flex gap-3\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.1\",min:\"0\",max:\"5\",placeholder:\"Nota\",value:nota.valor||'',onChange:e=>actualizarNota(estudiante.id,'apreciacion',idx,'valor',e.target.value),className:\"flex-1 px-3 py-2 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-green-500\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:nota.fecha||'',onChange:e=>actualizarNota(estudiante.id,'apreciacion',idx,'fecha',e.target.value),className:\"px-3 py-2 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-green-500\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>eliminarNota(estudiante.id,'apreciacion',idx),className:\"bg-red-500 text-white p-2 rounded-lg hover:bg-red-600 transition\",children:/*#__PURE__*/_jsx(Trash2,{className:\"w-4 h-4\"})})]},idx))}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-2 text-right\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-600\",children:\"Promedio: \"}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-bold text-lg text-green-600\",children:[calcularTotalSeccion(estudiante.apreciacion),\"/5\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-4\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"font-bold text-lg text-gray-800\",children:\"\\uD83D\\uDCCB Examen\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>agregarNota(estudiante.id,'examen'),className:\"bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition text-sm font-semibold flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Plus,{className:\"w-4 h-4\"}),\"Agregar\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:estudiante.examen.map((nota,idx)=>/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 p-4 rounded-lg flex gap-3\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.1\",min:\"0\",max:\"5\",placeholder:\"Nota\",value:nota.valor||'',onChange:e=>actualizarNota(estudiante.id,'examen',idx,'valor',e.target.value),className:\"flex-1 px-3 py-2 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-purple-500\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:nota.fecha||'',onChange:e=>actualizarNota(estudiante.id,'examen',idx,'fecha',e.target.value),className:\"px-3 py-2 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-purple-500\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>eliminarNota(estudiante.id,'examen',idx),className:\"bg-red-500 text-white p-2 rounded-lg hover:bg-red-600 transition\",children:/*#__PURE__*/_jsx(Trash2,{className:\"w-4 h-4\"})})]},idx))}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-2 text-right\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-600\",children:\"Promedio: \"}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-bold text-lg text-purple-600\",children:[calcularTotalSeccion(estudiante.examen),\"/5\"]})]})]})]})]},estudiante.id))})]}),view==='porcentajes'&&claseSeleccionada&&/*#__PURE__*/_jsx(CuadroPorcentajes,{}),view==='progreso'&&claseSeleccionada&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl shadow-lg p-6 md:p-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-8\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-2xl md:text-3xl font-bold text-gray-800 flex items-center gap-3\",children:[/*#__PURE__*/_jsx(TrendingUp,{className:\"w-8 h-8 text-purple-600\"}),\"Tablero de Progreso - \",claseSeleccionada.nombre]}),/*#__PURE__*/_jsx(OpcionesExportacion,{datos:JSON.stringify({clase:claseSeleccionada.nombre,profesor:claseSeleccionada.profesor,institucion:claseSeleccionada.institucion,fecha:new Date().toLocaleDateString('es-PA'),promedioGeneral:promedioGeneral(),totalEstudiantes:estudiantes.length,estudiantesEnRiesgo:estudiantesEnRiesgo.length,ranking:obtenerRankingEstudiantes(),distribucion:calcularDistribucionNotas()}),nombreArchivo:\"Tablero_Progreso_\".concat(claseSeleccionada.nombre.replace(/\\s+/g,'_')),onExportar:exportarProgreso})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-xl p-6 text-center\",children:[/*#__PURE__*/_jsx(BarChart3,{className:\"w-8 h-8 mx-auto mb-2\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm opacity-90\",children:\"Promedio General\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-3xl font-bold\",children:[promedioGeneral(),\"/5\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-r from-green-500 to-green-600 text-white rounded-xl p-6 text-center\",children:[/*#__PURE__*/_jsx(Target,{className:\"w-8 h-8 mx-auto mb-2\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm opacity-90\",children:\"Total Estudiantes\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-3xl font-bold\",children:estudiantes.length})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-r from-yellow-500 to-yellow-600 text-white rounded-xl p-6 text-center\",children:[/*#__PURE__*/_jsx(AlertTriangle,{className:\"w-8 h-8 mx-auto mb-2\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm opacity-90\",children:\"En Riesgo\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-3xl font-bold\",children:estudiantesEnRiesgo.length})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-r from-purple-500 to-purple-600 text-white rounded-xl p-6 text-center\",children:[/*#__PURE__*/_jsx(Award,{className:\"w-8 h-8 mx-auto mb-2\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm opacity-90\",children:\"Mejor Promedio\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-3xl font-bold\",children:[estudiantes.length>0?Math.max(...estudiantes.map(e=>parseFloat(calcularPromedioFinal(e)))).toFixed(1):0,\"/5\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 rounded-xl p-6\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-xl font-bold text-gray-800 mb-4 flex items-center gap-2\",children:[/*#__PURE__*/_jsx(BarChart3,{className:\"w-6 h-6 text-purple-600\"}),\"Distribuci\\xF3n de Rendimiento\"]}),/*#__PURE__*/_jsx(DistribucionNotas,{estudiantes:estudiantes,calcularPromedioFinal:calcularPromedioFinal})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 rounded-xl p-6\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-xl font-bold text-gray-800 mb-4 flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Award,{className:\"w-6 h-6 text-purple-600\"}),\"Ranking de Estudiantes\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3\",children:[obtenerRankingEstudiantes().map((estudiante,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between bg-white p-4 rounded-lg border-2 border-gray-200\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-8 h-8 rounded-full flex items-center justify-center font-bold text-white \".concat(index===0?'bg-yellow-500':index===1?'bg-gray-400':index===2?'bg-orange-500':'bg-purple-500'),children:index+1}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-semibold text-gray-800\",children:estudiante.nombre}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600\",children:[estudiante.notasDiarias.length+estudiante.apreciacion.length+estudiante.examen.length,\" notas\"]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-right\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"text-xl font-bold \".concat(estudiante.promedio>=4.5?'text-green-600':estudiante.promedio>=3.5?'text-blue-600':estudiante.promedio>=3.0?'text-yellow-600':'text-red-600'),children:[estudiante.promedio.toFixed(1),\"/5\"]})})]},estudiante.id)),obtenerRankingEstudiantes().length===0&&/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-8 text-gray-500\",children:/*#__PURE__*/_jsx(\"p\",{children:\"No hay datos suficientes para ranking\"})})]})]})]}),estudiantesEnRiesgo.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-red-50 border-2 border-red-200 rounded-xl p-6 mb-8\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-xl font-bold text-red-900 mb-4 flex items-center gap-2\",children:[/*#__PURE__*/_jsx(AlertTriangle,{className:\"w-6 h-6 text-red-600\"}),\"Alertas de Bajo Rendimiento (\",estudiantesEnRiesgo.length,\")\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\",children:estudiantesEnRiesgo.map(estudiante=>{const asistencia=contarAsistencias(estudiante);return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg p-4 border-2 border-red-300\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3 mb-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-red-600 text-white w-10 h-10 rounded-full flex items-center justify-center font-bold\",children:estudiante.nombre.charAt(0).toUpperCase()}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-bold text-red-800\",children:estudiante.nombre}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-red-600\",children:[\"Promedio: \",calcularPromedioFinal(estudiante),\"/5\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-600\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"Asistencia: \",asistencia.presente,\"P \",asistencia.tardanza,\"T \",asistencia.ausente,\"A\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Total notas: \",estudiante.notasDiarias.length+estudiante.apreciacion.length+estudiante.examen.length]})]})]},estudiante.id);})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 rounded-xl p-6\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-xl font-bold text-gray-800 mb-4 flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Users,{className:\"w-6 h-6 text-purple-600\"}),\"M\\xE9tricas por Estudiante\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"w-full bg-white rounded-lg overflow-hidden\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-purple-600 text-white\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-left\",children:\"Estudiante\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-center\",children:\"Promedio\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-center\",children:\"Notas Diarias\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-center\",children:\"Apreciaci\\xF3n\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-center\",children:\"Examen\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-center\",children:\"Asistencia\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:estudiantes.map(estudiante=>{const asistencia=contarAsistencias(estudiante);const totalAsistencias=asistencia.presente+asistencia.tardanza+asistencia.ausente;const porcentajeAsistencia=totalAsistencias>0?Math.round(asistencia.presente/totalAsistencias*100):0;return/*#__PURE__*/_jsxs(\"tr\",{className:\"border-b border-gray-200 hover:bg-gray-50\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-3 font-semibold\",children:estudiante.nombre}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-3 text-center\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"font-bold \".concat(parseFloat(calcularPromedioFinal(estudiante))>=4.5?'text-green-600':parseFloat(calcularPromedioFinal(estudiante))>=3.5?'text-blue-600':parseFloat(calcularPromedioFinal(estudiante))>=3.0?'text-yellow-600':'text-red-600'),children:[calcularPromedioFinal(estudiante),\"/5\"]})}),/*#__PURE__*/_jsxs(\"td\",{className:\"px-4 py-3 text-center text-sm\",children:[calcularTotalSeccion(estudiante.notasDiarias),\" (\",estudiante.notasDiarias.length,\")\"]}),/*#__PURE__*/_jsxs(\"td\",{className:\"px-4 py-3 text-center text-sm\",children:[calcularTotalSeccion(estudiante.apreciacion),\" (\",estudiante.apreciacion.length,\")\"]}),/*#__PURE__*/_jsxs(\"td\",{className:\"px-4 py-3 text-center text-sm\",children:[calcularTotalSeccion(estudiante.examen),\" (\",estudiante.examen.length,\")\"]}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-3 text-center\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"font-semibold \".concat(porcentajeAsistencia>=90?'text-green-600':porcentajeAsistencia>=80?'text-yellow-600':'text-red-600'),children:[porcentajeAsistencia,\"%\"]})})]},estudiante.id);})})]})}),estudiantes.length===0&&/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-8 text-gray-500\",children:/*#__PURE__*/_jsx(\"p\",{children:\"No hay estudiantes en esta clase\"})})]})]}),view==='planificacion'&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl shadow-lg p-6 md:p-8\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-2xl md:text-3xl font-bold text-gray-800 mb-6 flex items-center gap-3\",children:[/*#__PURE__*/_jsx(Sparkles,{className:\"w-8 h-8 text-purple-600\"}),\"Generador de Planes Trimestrales con IA\"]}),!planGenerado?/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-gradient-to-br from-purple-50 to-pink-50 border-2 border-purple-200 rounded-xl p-6 mb-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start gap-4\",children:[/*#__PURE__*/_jsx(Sparkles,{className:\"w-8 h-8 text-purple-600 flex-shrink-0 mt-1\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-bold text-purple-900 text-lg mb-2\",children:\"\\u2728 Planes Trimestrales con IA\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-purple-800 text-sm\",children:\"Genera planes trimestrales completos alineados con el curr\\xEDculo del MEDUCA de Panam\\xE1. Nuestra IA crea contenido detallado con contenidos, competencias, metodolog\\xEDas y evaluaciones espec\\xEDficas para cada trimestre.\"})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-r from-purple-100 to-pink-100 rounded-xl p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold text-gray-800 mb-4\",children:\"Informaci\\xF3n del Plan Trimestral\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Nombre del Profesor\",value:nombreProfesor,onChange:e=>setNombreProfesor(e.target.value),className:\"px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-purple-500\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Instituci\\xF3n Educativa\",value:institucion,onChange:e=>setInstitucion(e.target.value),className:\"px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-purple-500\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Grado (ej: 5to)\",value:gradoPlan,onChange:e=>setGradoPlan(e.target.value),className:\"px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-purple-500\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Materia (ej: Matem\\xE1ticas)\",value:materia,onChange:e=>setMateria(e.target.value),className:\"px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-purple-500\"}),/*#__PURE__*/_jsxs(\"select\",{value:trimestre,onChange:e=>setTrimestre(e.target.value),className:\"px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-purple-500\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"Primer Trimestre\",children:\"Primer Trimestre\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Segundo Trimestre\",children:\"Segundo Trimestre\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Tercer Trimestre\",children:\"Tercer Trimestre\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"md:col-span-2\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 mb-2\",children:\"\\uD83D\\uDCA1 Selecciona el trimestre para el cual deseas generar el plan de estudios completo.\"})})]}),/*#__PURE__*/_jsx(\"button\",{onClick:generarPlanConOpenAI,disabled:generandoPlan||!nombreProfesor||!institucion||!gradoPlan||!materia||!trimestre,className:\"w-full mt-6 py-4 rounded-lg font-bold text-lg flex items-center justify-center gap-3 transition \".concat(generandoPlan||!nombreProfesor||!institucion||!gradoPlan||!materia||!trimestre?'bg-gray-400 cursor-not-allowed':'bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white shadow-lg hover:shadow-xl'),children:generandoPlan?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-6 w-6 border-b-2 border-white\"}),\"Generando Plan Trimestral...\"]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Sparkles,{className:\"w-6 h-6\"}),\"Generar Plan Trimestral con IA\"]})})]})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col md:flex-row justify-between items-start gap-4 mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-2xl font-bold text-gray-800\",children:[\"Plan \",planGenerado.trimestre]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-600 mt-1\",children:[planGenerado.asignatura||planGenerado.materia||materia,\" - \",planGenerado.grado||gradoPlan,\" | \",planGenerado.institucion||institucion]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-500 mt-1\",children:[\"Profesor: \",planGenerado.docente||planGenerado.profesor||nombreProfesor]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-500\",children:[\"Trimestre: \",planGenerado.trimestre,\" | Fecha: \",planGenerado.fecha]}),planGenerado.duracionSemanas&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-500\",children:[\"Duraci\\xF3n: \",planGenerado.duracionSemanas,\" semanas\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-3 flex-wrap\",children:[/*#__PURE__*/_jsx(OpcionesExportacion,{datos:JSON.stringify(planGenerado),nombreArchivo:\"Plan_Trimestral_\".concat(planGenerado.asignatura||materia,\"_\").concat(planGenerado.trimestre.replace(/\\s+/g,'_'))}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setPlanGenerado(null),className:\"bg-gray-600 text-white px-6 py-3 rounded-lg hover:bg-gray-700 transition font-bold\",children:\"Nuevo Plan\"})]})]}),planGenerado.contenidos&&Array.isArray(planGenerado.contenidos)&&planGenerado.contenidos.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-blue-50 rounded-xl p-6\",children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"text-xl font-bold text-blue-900 mb-4 flex items-center gap-2\",children:[\"\\uD83D\\uDCDA Contenidos del \",planGenerado.trimestre]}),/*#__PURE__*/_jsx(\"ul\",{className:\"space-y-2\",children:planGenerado.contenidos.map((cont,i)=>/*#__PURE__*/_jsxs(\"li\",{className:\"flex gap-3\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-blue-600 font-bold\",children:[i+1,\".\"]}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-800\",children:cont})]},i))})]}),planGenerado.desarrolloClases&&Object.keys(planGenerado.desarrolloClases).length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-r from-teal-50 to-cyan-50 rounded-xl p-6 border-2 border-teal-200\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-xl font-bold text-teal-900 mb-4 flex items-center gap-2\",children:\"\\uD83C\\uDFAF Desarrollo del Contenido para Clases\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-6\",children:Object.entries(planGenerado.desarrolloClases).map(_ref10=>{let[contenidoKey,desarrollo]=_ref10;return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg p-4 border border-teal-100\",children:[/*#__PURE__*/_jsxs(\"h5\",{className:\"font-bold text-lg text-teal-800 mb-3\",children:[\"\\uD83D\\uDCDD \",contenidoKey]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-3\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold text-gray-700\",children:\"Duraci\\xF3n:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"ml-2 text-teal-600\",children:desarrollo.duracion||'3 sesiones de 45 minutos'})]})}),desarrollo.objetivos&&desarrollo.objetivos.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"h6\",{className:\"font-semibold text-gray-700 mb-2\",children:\"Objetivos de Aprendizaje:\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"space-y-1\",children:desarrollo.objetivos.map((objetivo,idx)=>/*#__PURE__*/_jsxs(\"li\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-teal-500\",children:\"\\u2022\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-700\",children:objetivo})]},idx))})]}),desarrollo.materiales&&desarrollo.materiales.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"h6\",{className:\"font-semibold text-gray-700 mb-2\",children:\"Materiales necesarios:\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"space-y-1\",children:desarrollo.materiales.map((material,idx)=>/*#__PURE__*/_jsxs(\"li\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-teal-500\",children:\"\\u2022\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-700\",children:material})]},idx))})]}),desarrollo.fases&&desarrollo.fases.length>0&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h6\",{className:\"font-semibold text-gray-700 mb-2\",children:\"Fases de la actividad:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-3\",children:desarrollo.fases.map((fase,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 rounded-lg p-3\",children:[/*#__PURE__*/_jsxs(\"h7\",{className:\"font-semibold text-gray-800 mb-2\",children:[\"SESI\\xD3N \",index+1,\" - \",fase.titulo||'Desarrollo']}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-2\",children:fase.actividades&&fase.actividades.map((actividad,actIdx)=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2 text-sm\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"font-medium text-teal-600 whitespace-nowrap\",children:[actividad.tiempo,\":\"]}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-700\",children:actividad.descripcion})]},actIdx))})]},index))})]})]},contenidoKey);})})]}),planGenerado.competencias&&Array.isArray(planGenerado.competencias)&&planGenerado.competencias.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-purple-50 rounded-xl p-6\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-xl font-bold text-purple-900 mb-4 flex items-center gap-2\",children:\"\\uD83D\\uDCAA Competencias a Desarrollar\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"space-y-2\",children:planGenerado.competencias.map((comp,i)=>/*#__PURE__*/_jsxs(\"li\",{className:\"flex gap-3\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-purple-600\",children:[i+1,\".\"]}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-800\",children:comp})]},i))})]}),planGenerado.indicadoresLogro&&Array.isArray(planGenerado.indicadoresLogro)&&planGenerado.indicadoresLogro.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-teal-50 rounded-xl p-6\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-xl font-bold text-teal-900 mb-4 flex items-center gap-2\",children:\"\\u2705 Indicadores de Logro\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"space-y-2\",children:planGenerado.indicadoresLogro.map((ind,i)=>/*#__PURE__*/_jsxs(\"li\",{className:\"flex gap-3\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-teal-600\",children:\"\\u2022\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-800\",children:ind})]},i))})]}),planGenerado.metodologia&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-green-50 rounded-xl p-6\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-xl font-bold text-green-900 mb-4 flex items-center gap-2\",children:\"\\uD83D\\uDCD6 Estrategias Metodol\\xF3gicas\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-800\",children:planGenerado.metodologia})]}),planGenerado.recursos&&Array.isArray(planGenerado.recursos)&&planGenerado.recursos.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-indigo-50 rounded-xl p-6\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-xl font-bold text-indigo-900 mb-4 flex items-center gap-2\",children:\"\\uD83D\\uDEE0\\uFE0F Recursos Educativos\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-2\",children:planGenerado.recursos.forEach((rec,i)=>/*#__PURE__*/_jsxs(\"li\",{className:\"flex gap-2 items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-indigo-600\",children:\"\\u2022\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-800\",children:rec})]},i))})]}),planGenerado.evaluacion&&Array.isArray(planGenerado.evaluacion)&&planGenerado.evaluacion.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-red-50 rounded-xl p-6\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-xl font-bold text-red-900 mb-4 flex items-center gap-2\",children:\"\\uD83D\\uDCCA Instrumentos de Evaluaci\\xF3n\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"space-y-2\",children:planGenerado.evaluacion.map((evalItem,i)=>/*#__PURE__*/_jsxs(\"li\",{className:\"flex gap-3\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-red-600\",children:\"\\u2022\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-800\",children:evalItem})]},i))})]}),planGenerado.adaptaciones&&Array.isArray(planGenerado.adaptaciones)&&planGenerado.adaptaciones.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-orange-50 rounded-xl p-6\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-xl font-bold text-orange-900 mb-4 flex items-center gap-2\",children:\"\\u267F Adaptaciones Curriculares\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"space-y-2\",children:planGenerado.adaptaciones.map((adap,i)=>/*#__PURE__*/_jsxs(\"li\",{className:\"flex gap-3\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-orange-600\",children:\"\\u2022\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-800\",children:adap})]},i))})]}),planGenerado.observaciones&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-100 rounded-xl p-6\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-xl font-bold text-gray-900 mb-4 flex items-center gap-2\",children:\"\\uD83D\\uDCDD Observaciones\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-800\",children:planGenerado.observaciones})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-r from-purple-100 to-pink-100 rounded-xl p-6 text-center\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-purple-800 font-semibold\",children:\"\\u2705 Plan trimestral generado exitosamente con IA\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-purple-600 mt-1\",children:\"Puedes descargar este plan en formato de texto para guardarlo o imprimirlo.\"})]})]})]})]}),/*#__PURE__*/_jsx(\"footer\",{className:\"bg-gray-800 text-white py-6 mt-12\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container mx-auto px-4 text-center\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm\",children:\"\\xA9 2025 Bringo Edu - Asistente Inteligente para Profesores\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-400 mt-2\",children:\"Desarrollado por GermanApp | Potenciado por IA\"})]})})]});}","map":{"version":3,"names":["React","useState","useEffect","Plus","Trash2","Download","AlertCircle","Users","Home","ChevronDown","ChevronUp","ClipboardList","Calendar","Sparkles","User","LogOut","LogIn","TrendingUp","BarChart3","Target","Award","AlertTriangle","Search","Share","Eye","EyeOff","PieChart","initializeApp","getAuth","createUserWithEmailAndPassword","signInWithEmailAndPassword","signOut","onAuthStateChanged","getFirestore","collection","addDoc","getDocs","updateDoc","deleteDoc","doc","query","where","XLSX","jsPDF","Document","Packer","Paragraph","TextRun","Table","TableCell","TableRow","HeadingLevel","AlignmentType","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","firebaseConfig","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","app","auth","db","DistribucionNotas","_ref","estudiantes","calcularPromedioFinal","calcularDistribucion","distribucion","excelente","bueno","regular","riesgo","forEach","estudiante","promedio","parseFloat","total","length","className","children","Math","round","style","width","concat","FilaNotasRapidas","_ref2","onAgregarNota","claseSeleccionada","usuario","actualizarNota","notaDiaria","setNotaDiaria","notaApreciacion","setNotaApreciacion","notaExamen","setNotaExamen","fecha","setFecha","Date","toISOString","split","handleAgregarNota","tipo","valor","id","error","console","alert","compartirPorWhatsApp","formatoNotas","notas","filter","n","map","join","mensaje","nombre","institucion","toLocaleDateString","notasDiarias","apreciacion","examen","url","encodeURIComponent","window","open","charAt","toUpperCase","type","step","min","max","placeholder","value","onChange","e","target","onClick","ModalLogin","_ref3","mostrarLogin","setMostrarLogin","email","setEmail","password","setPassword","errorAuth","cargandoAuth","iniciarSesion","limpiarFormulariosAuth","setMostrarRegistro","mostrarPassword","setMostrarPassword","handleSubmit","preventDefault","onSubmit","required","disabled","ModalRegistro","_ref4","mostrarRegistro","nombreUsuario","setNombreUsuario","confirmarPassword","setConfirmarPassword","registrarUsuario","mostrarConfirmarPassword","setMostrarConfirmarPassword","minLength","BarraBusquedaEstudiantes","_ref5","onBuscarEstudiante","busquedaEstudiante","setBusquedaEstudiante","sugerencias","setSugerencias","mostrarSugerencias","setMostrarSugerencias","normalizarTexto","texto","toLowerCase","normalize","replace","textoBusqueda","sugerenciasFiltradas","includes","buscarYRedirigirEstudiante","trim","estudianteEncontrado","find","seleccionarSugerencia","onKeyPress","key","CuadroPorcentajes","normalizarDatos","datosIn","JSON","parse","_unused","objetoATabla","obj","Object","entries","_ref6","Campo","Valor","stringify","String","descargarBlob","blob","nombreArchivo","URL","createObjectURL","link","document","createElement","href","download","body","appendChild","click","removeChild","revokeObjectURL","exportarAExcel","datos","workbook","utils","book_new","worksheet","Array","isArray","json_to_sheet","book_append_sheet","writeFile","log","exportarAPDF","setFontSize","setTextColor","text","yPosition","agregarTabla","titulo","datosTabla","_datosTabla$","addPage","headers","keys","row","h","val","autoTable","startY","head","styles","fontSize","headStyles","fillColor","margin","left","right","lastAutoTable","finalY","_ref7","k","v","save","exportarAWord","push","bold","size","alignment","CENTER","spacing","after","italics","tableRows","shading","fill","_row$key","rows","_ref8","sections","properties","buffer","toBuffer","Blob","generarBlobPorFormato","formato","arrayBuffer","write","bookType","ext","mime","pdfDoc","y","arr","_arr$","r","_r$h","_ref9","output","_row$k","_ref0","docx","Error","subirAGoogleDrive","nombreArchivoBase","arguments","undefined","formData","FormData","append","authHeaders","currentUser","token","getIdToken","Authorization","DRIVE_UPLOAD_URL","res","fetch","method","ok","err","json","catch","status","result","message","AsistenteProfesor","setUsuario","setErrorAuth","setCargandoAuth","view","setView","clases","setClases","setClaseSeleccionada","nombreClase","setNombreClase","grado","setGrado","seccion","setSeccion","nombreProfesorClase","setNombreProfesorClase","institucionClase","setInstitucionClase","setEstudiantes","nombreEstudiante","setNombreEstudiante","expandido","setExpandido","fechaActual","setFechaActual","nombreProfesor","setNombreProfesor","setInstitucion","gradoPlan","setGradoPlan","materia","setMateria","trimestre","setTrimestre","planGenerado","setPlanGenerado","generandoPlan","setGenerandoPlan","unsubscribe","user","displayName","uid","cargarClases","userId","q","querySnapshot","clasesData","_objectSpread","data","userCredential","code","cerrarSesion","generarPlanConOpenAI","BACKEND_URL","response","incluirDesarrolloClases","errorData","contenidos","generadoPorIA","descargarPlan","contenido","repeat","docente","profesor","asignatura","anioEscolar","getFullYear","duracionSemanas","cont","i","desarrolloClases","_ref1","contenidoKey","desarrollo","duracion","objetivos","objetivo","materiales","material","fases","fase","index","actividades","actividad","tiempo","descripcion","competencias","comp","indicadoresLogro","ind","metodologia","recursos","rec","evaluacion","evalItem","adaptaciones","adap","observaciones","elemento","archivo","agregarClase","nuevaClase","fechaCreacion","docRef","eliminarClase","confirm","c","seleccionarClase","clase","agregarEstudiante","nuevoEstudiante","now","toString","asistencia","nuevosEstudiantes","clasesActualizadas","marcarAsistencia","estudianteId","estado","agregarNota","nuevaNota","indice","campo","nuevasNotas","eliminarNota","_","eliminarEstudiante","contarAsistencias","registros","presente","values","ausente","tardanza","calcularTotalSeccion","numeros","isNaN","reduce","a","b","toFixed","totalDiarias","totalApreciacion","totalExamen","totales","t","toggleExpansion","prev","setTimeout","getElementById","scrollIntoView","behavior","block","classList","add","remove","estudiantesEnRiesgo","promedioGeneral","promedios","p","obtenerRankingEstudiantes","sort","slice","exportarProgreso","datosProgreso","totalEstudiantes","ranking","calcularDistribucionNotas","_clase$estudiantes","stopPropagation","OpcionesExportacion","_e$asistencia","historial","_estudiante$asistenci","asist","estadoHoy","promedioFinal","nota","idx","onExportar","totalAsistencias","porcentajeAsistencia","_ref10","actIdx"],"sources":["C:/bringo-edu/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Plus, Trash2, Download, AlertCircle, Users, Home, ChevronDown, ChevronUp, ClipboardList, Calendar, Sparkles, User, LogOut, LogIn, TrendingUp, BarChart3, Target, Award, AlertTriangle, Search, Share, Eye, EyeOff, PieChart } from 'lucide-react';\r\nimport { initializeApp } from 'firebase/app';\r\nimport { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, signOut, onAuthStateChanged } from 'firebase/auth';\r\nimport { getFirestore, collection, addDoc, getDocs, updateDoc, deleteDoc, doc, query, where } from 'firebase/firestore';\r\n\r\n// Importar librerías REALES de exportación\r\nimport * as XLSX from 'xlsx';\r\nimport jsPDF from 'jspdf';\r\nimport 'jspdf-autotable';\r\nimport { Document, Packer, Paragraph, TextRun, Table, TableCell, TableRow, HeadingLevel, AlignmentType } from 'docx';\r\n\r\n// Configuración de Firebase\r\nconst firebaseConfig = {\r\n  apiKey: \"AIzaSyCdRpj7y3L4PIwWiJgzYRHDU3XxcIVfmW4\",\r\n  authDomain: \"bringoedu.firebaseapp.com\",\r\n  projectId: \"bringoedu\",\r\n  storageBucket: \"bringoedu.firebasestorage.app\", \r\n  messagingSenderId: \"667720262345\",\r\n  appId: \"1:667720262345:web:ad55dd71c19ffcb73fa318\"\r\n};\r\n\r\n// Inicializar Firebase\r\nconst app = initializeApp(firebaseConfig);\r\nconst auth = getAuth(app);\r\nconst db = getFirestore(app);\r\n\r\n// Componente para gráfico de distribución\r\nconst DistribucionNotas = ({ estudiantes, calcularPromedioFinal }) => {\r\n  const calcularDistribucion = () => {\r\n    const distribucion = {\r\n      excelente: 0, // 4.5 - 5.0\r\n      bueno: 0,     // 3.5 - 4.4\r\n      regular: 0,   // 3.0 - 3.4\r\n      riesgo: 0     // 0 - 2.9\r\n    };\r\n\r\n    estudiantes.forEach(estudiante => {\r\n      const promedio = parseFloat(calcularPromedioFinal(estudiante));\r\n      if (promedio >= 4.5) distribucion.excelente++;\r\n      else if (promedio >= 3.5) distribucion.bueno++;\r\n      else if (promedio >= 3.0) distribucion.regular++;\r\n      else if (promedio > 0) distribucion.riesgo++;\r\n    });\r\n\r\n    return distribucion;\r\n  };\r\n\r\n  const distribucion = calcularDistribucion();\r\n  const total = estudiantes.length;\r\n  \r\n  if (total === 0) {\r\n    return (\r\n      <div className=\"text-center py-8 text-gray-500\">\r\n        <p>No hay datos suficientes</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      <div className=\"flex items-center justify-between\">\r\n        <span className=\"text-sm font-semibold text-green-600\">Excelente (4.5-5.0)</span>\r\n        <span className=\"text-sm font-bold\">{distribucion.excelente} ({Math.round((distribucion.excelente/total)*100)}%)</span>\r\n      </div>\r\n      <div className=\"w-full bg-gray-200 rounded-full h-3\">\r\n        <div \r\n          className=\"bg-green-500 h-3 rounded-full transition-all duration-500\"\r\n          style={{ width: `${(distribucion.excelente/total)*100}%` }}\r\n        ></div>\r\n      </div>\r\n\r\n      <div className=\"flex items-center justify-between\">\r\n        <span className=\"text-sm font-semibold text-blue-600\">Bueno (3.5-4.4)</span>\r\n        <span className=\"text-sm font-bold\">{distribucion.bueno} ({Math.round((distribucion.bueno/total)*100)}%)</span>\r\n      </div>\r\n      <div className=\"w-full bg-gray-200 rounded-full h-3\">\r\n        <div \r\n          className=\"bg-blue-500 h-3 rounded-full transition-all duration-500\"\r\n          style={{ width: `${(distribucion.bueno/total)*100}%` }}\r\n        ></div>\r\n      </div>\r\n\r\n      <div className=\"flex items-center justify-between\">\r\n        <span className=\"text-sm font-semibold text-yellow-600\">Regular (3.0-3.4)</span>\r\n        <span className=\"text-sm font-bold\">{distribucion.regular} ({Math.round((distribucion.regular/total)*100)}%)</span>\r\n      </div>\r\n      <div className=\"w-full bg-gray-200 rounded-full h-3\">\r\n        <div \r\n          className=\"bg-yellow-500 h-3 rounded-full transition-all duration-500\"\r\n          style={{ width: `${(distribucion.regular/total)*100}%` }}\r\n        ></div>\r\n      </div>\r\n\r\n      <div className=\"flex items-center justify-between\">\r\n        <span className=\"text-sm font-semibold text-red-600\">En Riesgo (0-2.9)</span>\r\n        <span className=\"text-sm font-bold\">{distribucion.riesgo} ({Math.round((distribucion.riesgo/total)*100)}%)</span>\r\n      </div>\r\n      <div className=\"w-full bg-gray-200 rounded-full h-3\">\r\n        <div \r\n          className=\"bg-red-500 h-3 rounded-full transition-all duration-500\"\r\n          style={{ width: `${(distribucion.riesgo/total)*100}%` }}\r\n        ></div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n// Componente para Fila de Notas Rápidas\r\nconst FilaNotasRapidas = ({ estudiante, onAgregarNota, calcularPromedioFinal, claseSeleccionada, usuario, actualizarNota }) => {\r\n  const [notaDiaria, setNotaDiaria] = useState('');\r\n  const [notaApreciacion, setNotaApreciacion] = useState('');\r\n  const [notaExamen, setNotaExamen] = useState('');\r\n  const [fecha, setFecha] = useState(new Date().toISOString().split('T')[0]);\r\n\r\n  const handleAgregarNota = async (tipo, valor) => {\r\n    if (valor && parseFloat(valor) >= 0 && parseFloat(valor) <= 5) {\r\n      try {\r\n        await onAgregarNota(estudiante.id, tipo, parseFloat(valor), fecha);\r\n        \r\n        // Limpiar el campo\r\n        if (tipo === 'notasDiarias') setNotaDiaria('');\r\n        if (tipo === 'apreciacion') setNotaApreciacion('');\r\n        if (tipo === 'examen') setNotaExamen('');\r\n\r\n      } catch (error) {\r\n        console.error('Error agregando nota:', error);\r\n        alert('Error al agregar la nota');\r\n      }\r\n    } else {\r\n      alert('Por favor ingresa una nota válida entre 0 y 5');\r\n    }\r\n  };\r\n\r\n  const compartirPorWhatsApp = () => {\r\n    const formatoNotas = (notas) => {\r\n      return notas\r\n        .filter(n => n.valor && parseFloat(n.valor) > 0)\r\n        .map(n => `📅 ${n.fecha}: ${n.valor}/5.0`)\r\n        .join('\\n') || '📭 Sin notas registradas';\r\n    };\r\n\r\n    const mensaje = `📊 *REPORTE DE NOTAS - ${claseSeleccionada?.nombre}*\r\n\r\n*Estudiante:* ${estudiante.nombre}\r\n*Profesor:* ${usuario?.nombre}\r\n*Institución:* ${claseSeleccionada?.institucion || 'Bringo Edu'}\r\n*Fecha de reporte:* ${new Date().toLocaleDateString('es-PA')}\r\n\r\n*📝 NOTAS DIARIAS:*\r\n${formatoNotas(estudiante.notasDiarias)}\r\n\r\n*⭐ APRECIACIÓN:*\r\n${formatoNotas(estudiante.apreciacion)}\r\n\r\n*📋 EXAMEN:*\r\n${formatoNotas(estudiante.examen)}\r\n\r\n*🏆 PROMEDIO FINAL:* ${calcularPromedioFinal(estudiante)}/5.0\r\n\r\n---\r\nGenerado con Bringo Edu 📚 | Transparente y Confiable`;\r\n\r\n    const url = `https://wa.me/?text=${encodeURIComponent(mensaje)}`;\r\n    window.open(url, '_blank');\r\n  };\r\n\r\n  return (\r\n    <tr className=\"border-b border-gray-200 hover:bg-gray-50\">\r\n      <td className=\"px-4 py-3 font-semibold\">\r\n        <div className=\"flex items-center gap-3\">\r\n          <div className=\"bg-purple-600 text-white w-8 h-8 rounded-full flex items-center justify-center font-bold text-sm\">\r\n            {estudiante.nombre.charAt(0).toUpperCase()}\r\n          </div>\r\n          <span>{estudiante.nombre}</span>\r\n        </div>\r\n      </td>\r\n      \r\n      <td className=\"px-4 py-3\">\r\n        <div className=\"flex gap-2\">\r\n          <input\r\n            type=\"number\"\r\n            step=\"0.1\"\r\n            min=\"0\"\r\n            max=\"5\"\r\n            placeholder=\"0-5\"\r\n            value={notaDiaria}\r\n            onChange={(e) => setNotaDiaria(e.target.value)}\r\n            className=\"w-20 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500 text-center\"\r\n          />\r\n          <button\r\n            onClick={() => handleAgregarNota('notasDiarias', notaDiaria)}\r\n            className=\"bg-blue-600 text-white px-3 py-2 rounded-lg hover:bg-blue-700 transition text-sm font-semibold\"\r\n          >\r\n            +\r\n          </button>\r\n        </div>\r\n      </td>\r\n      \r\n      <td className=\"px-4 py-3\">\r\n        <div className=\"flex gap-2\">\r\n          <input\r\n            type=\"number\"\r\n            step=\"0.1\"\r\n            min=\"0\"\r\n            max=\"5\"\r\n            placeholder=\"0-5\"\r\n            value={notaApreciacion}\r\n            onChange={(e) => setNotaApreciacion(e.target.value)}\r\n            className=\"w-20 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-green-500 text-center\"\r\n          />\r\n          <button\r\n            onClick={() => handleAgregarNota('apreciacion', notaApreciacion)}\r\n            className=\"bg-green-600 text-white px-3 py-2 rounded-lg hover:bg-green-700 transition text-sm font-semibold\"\r\n          >\r\n            +\r\n          </button>\r\n        </div>\r\n      </td>\r\n      \r\n      <td className=\"px-4 py-3\">\r\n        <div className=\"flex gap-2\">\r\n          <input\r\n            type=\"number\"\r\n            step=\"0.1\"\r\n            min=\"0\"\r\n            max=\"5\"\r\n            placeholder=\"0-5\"\r\n            value={notaExamen}\r\n            onChange={(e) => setNotaExamen(e.target.value)}\r\n            className=\"w-20 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-purple-500 text-center\"\r\n          />\r\n          <button\r\n            onClick={() => handleAgregarNota('examen', notaExamen)}\r\n            className=\"bg-purple-600 text-white px-3 py-2 rounded-lg hover:bg-purple-700 transition text-sm font-semibold\"\r\n          >\r\n            +\r\n          </button>\r\n        </div>\r\n      </td>\r\n      \r\n      <td className=\"px-4 py-3 text-center\">\r\n        <span className={`text-xl font-bold ${\r\n          parseFloat(calcularPromedioFinal(estudiante)) >= 4.5 ? 'text-green-600' :\r\n          parseFloat(calcularPromedioFinal(estudiante)) >= 3.5 ? 'text-blue-600' :\r\n          parseFloat(calcularPromedioFinal(estudiante)) >= 3.0 ? 'text-yellow-600' : 'text-red-600'\r\n        }`}>\r\n          {calcularPromedioFinal(estudiante)}\r\n        </span>\r\n      </td>\r\n      \r\n      <td className=\"px-4 py-3 text-center\">\r\n        <button\r\n          onClick={compartirPorWhatsApp}\r\n          className=\"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition font-semibold flex items-center gap-2 text-sm\"\r\n        >\r\n          <Share className=\"w-4 h-4\" />\r\n          WhatsApp\r\n        </button>\r\n      </td>\r\n    </tr>\r\n  );\r\n};\r\n\r\n// Componente de Modal Login\r\nconst ModalLogin = ({ \r\n  mostrarLogin, \r\n  setMostrarLogin, \r\n  email, \r\n  setEmail, \r\n  password, \r\n  setPassword, \r\n  errorAuth, \r\n  cargandoAuth, \r\n  iniciarSesion, \r\n  limpiarFormulariosAuth,\r\n  setMostrarRegistro \r\n}) => {\r\n  const [mostrarPassword, setMostrarPassword] = useState(false);\r\n\r\n  if (!mostrarLogin) return null;\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    iniciarSesion();\r\n  };\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-gradient-to-br from-purple-900/95 via-blue-900/95 to-indigo-900/95 backdrop-blur-sm flex items-center justify-center z-50 p-4\">\r\n      <div className=\"bg-white rounded-3xl shadow-2xl max-w-md w-full overflow-hidden transform transition-all\">\r\n        <div className=\"bg-gradient-to-r from-purple-600 via-blue-600 to-indigo-600 p-8 text-center\">\r\n          <div className=\"inline-block bg-white rounded-full p-4 mb-4 shadow-lg\">\r\n            <LogIn className=\"w-8 h-8 text-purple-600\" />\r\n          </div>\r\n          <h3 className=\"text-3xl font-bold text-white mb-2\">¡Bienvenido de nuevo!</h3>\r\n          <p className=\"text-purple-100 text-sm\">Ingresa a tu cuenta de Bringo Edu</p>\r\n        </div>\r\n        \r\n        <form onSubmit={handleSubmit} className=\"p-8\">\r\n          {errorAuth && (\r\n            <div className=\"bg-red-50 border-2 border-red-200 rounded-lg p-3 mb-4\">\r\n              <p className=\"text-red-800 text-sm font-semibold\">{errorAuth}</p>\r\n            </div>\r\n          )}\r\n          \r\n          <div className=\"space-y-5\">\r\n            <div>\r\n              <label className=\"flex items-center gap-2 text-sm font-bold text-gray-700 mb-2\">\r\n                <span className=\"text-purple-600\">📧</span> Email\r\n              </label>\r\n              <input\r\n                type=\"email\"\r\n                placeholder=\"profesor@ejemplo.com\"\r\n                value={email}\r\n                onChange={(e) => setEmail(e.target.value)}\r\n                className=\"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:border-purple-500 focus:ring-2 focus:ring-purple-200 transition-all\"\r\n                required\r\n              />\r\n            </div>\r\n            \r\n            <div>\r\n              <label className=\"flex items-center gap-2 text-sm font-bold text-gray-700 mb-2\">\r\n                <span className=\"text-purple-600\">🔒</span> Contraseña\r\n              </label>\r\n              <div className=\"relative\">\r\n                <input\r\n                  type={mostrarPassword ? \"text\" : \"password\"}\r\n                  placeholder=\"••••••••\"\r\n                  value={password}\r\n                  onChange={(e) => setPassword(e.target.value)}\r\n                  className=\"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:border-purple-500 focus:ring-2 focus:ring-purple-200 transition-all pr-12\"\r\n                  required\r\n                />\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={() => setMostrarPassword(!mostrarPassword)}\r\n                  className=\"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700 transition\"\r\n                >\r\n                  {mostrarPassword ? <EyeOff className=\"w-5 h-5\" /> : <Eye className=\"w-5 h-5\" />}\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          \r\n          <button\r\n            type=\"submit\"\r\n            disabled={cargandoAuth}\r\n            className={`w-full mt-8 py-4 rounded-xl font-bold text-lg shadow-lg transition-all ${\r\n              cargandoAuth\r\n                ? 'bg-gray-400 cursor-not-allowed'\r\n                : 'bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 hover:shadow-xl transform hover:scale-[1.02]'\r\n            } text-white`}\r\n          >\r\n            {cargandoAuth ? 'Iniciando sesión...' : 'Iniciar Sesión'}\r\n          </button>\r\n          \r\n          <button\r\n            type=\"button\"\r\n            onClick={() => {\r\n              setMostrarLogin(false);\r\n              limpiarFormulariosAuth();\r\n            }}\r\n            className=\"w-full mt-3 bg-gray-100 text-gray-700 py-3 rounded-xl hover:bg-gray-200 transition font-semibold\"\r\n          >\r\n            Cancelar\r\n          </button>\r\n          \r\n          <div className=\"mt-6 text-center\">\r\n            <p className=\"text-gray-600 text-sm mb-2\">¿No tienes cuenta?</p>\r\n            <button\r\n              type=\"button\"\r\n              onClick={() => {\r\n                setMostrarLogin(false);\r\n                setMostrarRegistro(true);\r\n              }}\r\n              className=\"text-purple-600 hover:text-purple-800 font-bold text-lg hover:underline\"\r\n            >\r\n              Regístrate aquí\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n// Componente de Modal Registro\r\nconst ModalRegistro = ({ \r\n  mostrarRegistro, \r\n  setMostrarRegistro, \r\n  email, \r\n  setEmail, \r\n  password, \r\n  setPassword, \r\n  nombreUsuario, \r\n  setNombreUsuario, \r\n  confirmarPassword, \r\n  setConfirmarPassword, \r\n  errorAuth, \r\n  cargandoAuth, \r\n  registrarUsuario, \r\n  limpiarFormulariosAuth,\r\n  setMostrarLogin \r\n}) => {\r\n  const [mostrarPassword, setMostrarPassword] = useState(false);\r\n  const [mostrarConfirmarPassword, setMostrarConfirmarPassword] = useState(false);\r\n\r\n  if (!mostrarRegistro) return null;\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    registrarUsuario();\r\n  };\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-gradient-to-br from-green-900/95 via-teal-900/95 to-blue-900/95 backdrop-blur-sm flex items-center justify-center z-50 p-4\">\r\n      <div className=\"bg-white rounded-3xl shadow-2xl max-w-md w-full overflow-hidden transform transition-all\">\r\n        <div className=\"bg-gradient-to-r from-green-600 via-teal-600 to-blue-600 p-8 text-center\">\r\n          <div className=\"inline-block bg-white rounded-full p-4 mb-4 shadow-lg\">\r\n            <User className=\"w-8 h-8 text-green-600\" />\r\n          </div>\r\n          <h3 className=\"text-3xl font-bold text-white mb-2\">¡Únete a Bringo Edu!</h3>\r\n          <p className=\"text-green-100 text-sm\">Crea tu cuenta y comienza a gestionar tus clases</p>\r\n        </div>\r\n        \r\n        <form onSubmit={handleSubmit} className=\"p-8\">\r\n          {errorAuth && (\r\n            <div className=\"bg-red-50 border-2 border-red-200 rounded-lg p-3 mb-4\">\r\n              <p className=\"text-red-800 text-sm font-semibold\">{errorAuth}</p>\r\n            </div>\r\n          )}\r\n          \r\n          <div className=\"space-y-5\">\r\n            <div>\r\n              <label className=\"flex items-center gap-2 text-sm font-bold text-gray-700 mb-2\">\r\n                <span className=\"text-green-600\">👤</span> Nombre Completo\r\n              </label>\r\n              <input\r\n                type=\"text\"\r\n                placeholder=\"Prof. Juan Pérez\"\r\n                value={nombreUsuario}\r\n                onChange={(e) => setNombreUsuario(e.target.value)}\r\n                className=\"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:border-green-500 focus:ring-2 focus:ring-green-200 transition-all\"\r\n                required\r\n              />\r\n            </div>\r\n            \r\n            <div>\r\n              <label className=\"flex items-center gap-2 text-sm font-bold text-gray-700 mb-2\">\r\n                <span className=\"text-green-600\">📧</span> Email\r\n              </label>\r\n              <input\r\n                type=\"email\"\r\n                placeholder=\"profesor@escuela.edu\"\r\n                value={email}\r\n                onChange={(e) => setEmail(e.target.value)}\r\n                className=\"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:border-green-500 focus:ring-2 focus:ring-green-200 transition-all\"\r\n                required\r\n              />\r\n            </div>\r\n            \r\n            <div>\r\n              <label className=\"flex items-center gap-2 text-sm font-bold text-gray-700 mb-2\">\r\n                <span className=\"text-green-600\">🔒</span> Contraseña\r\n              </label>\r\n              <div className=\"relative\">\r\n                <input\r\n                  type={mostrarPassword ? \"text\" : \"password\"}\r\n                  placeholder=\"Mínimo 6 caracteres\"\r\n                  value={password}\r\n                  onChange={(e) => setPassword(e.target.value)}\r\n                  className=\"w-full px-4 py-3 border-2 border-gray-300 rounded-xl focus:outline-none focus:border-green-500 focus:ring-2 focus:ring-green-200 transition-all pr-12\"\r\n                  required\r\n                  minLength={6}\r\n                />\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={() => setMostrarPassword(!mostrarPassword)}\r\n                  className=\"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700 transition\"\r\n                >\r\n                  {mostrarPassword ? <EyeOff className=\"w-5 h-5\" /> : <Eye className=\"w-5 h-5\" />}\r\n                </button>\r\n              </div>\r\n              <p className=\"text-xs text-gray-500 mt-1 ml-1\">Usa letras, números y símbolos</p>\r\n            </div>\r\n            \r\n            <div>\r\n              <label className=\"flex items-center gap-2 text-sm font-bold text-gray-700 mb-2\">\r\n                <span className=\"text-green-600\">✅</span> Confirmar Contraseña\r\n              </label>\r\n              <div className=\"relative\">\r\n                <input\r\n                  type={mostrarConfirmarPassword ? \"text\" : \"password\"}\r\n                  placeholder=\"Repite tu contraseña\"\r\n                  value={confirmarPassword}\r\n                  onChange={(e) => setConfirmarPassword(e.target.value)}\r\n                  className=\"w-full px-4 py-3 border-2 border-gray-300 rounded-xl focus:outline-none focus:border-green-500 focus:ring-2 focus:ring-green-200 transition-all pr-12\"\r\n                  required\r\n                />\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={() => setMostrarConfirmarPassword(!mostrarConfirmarPassword)}\r\n                  className=\"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700 transition\"\r\n                >\r\n                  {mostrarConfirmarPassword ? <EyeOff className=\"w-5 h-5\" /> : <Eye className=\"w-5 h-5\" />}\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          \r\n          <button\r\n            type=\"submit\"\r\n            disabled={cargandoAuth}\r\n            className={`w-full mt-8 py-4 rounded-xl font-bold text-lg shadow-lg transition-all ${\r\n              cargandoAuth\r\n                ? 'bg-gray-400 cursor-not-allowed'\r\n                : 'bg-gradient-to-r from-green-600 to-teal-600 hover:from-green-700 hover:to-teal-700 hover:shadow-xl transform hover:scale-[1.02]'\r\n            } text-white`}\r\n          >\r\n            {cargandoAuth ? 'Creando cuenta...' : 'Crear Cuenta'}\r\n          </button>\r\n          \r\n          <button\r\n            type=\"button\"\r\n            onClick={() => {\r\n              setMostrarRegistro(false);\r\n              limpiarFormulariosAuth();\r\n            }}\r\n            className=\"w-full mt-3 bg-gray-100 text-gray-700 py-3 rounded-xl hover:bg-gray-200 transition font-semibold\"\r\n          >\r\n            Cancelar\r\n          </button>\r\n          \r\n          <div className=\"mt-6 text-center\">\r\n            <p className=\"text-gray-600 text-sm mb-2\">¿Ya tienes cuenta?</p>\r\n            <button\r\n              type=\"button\"\r\n              onClick={() => {\r\n                setMostrarRegistro(false);\r\n                setMostrarLogin(true);\r\n              }}\r\n              className=\"text-green-600 hover:text-green-800 font-bold text-lg hover:underline\"\r\n            >\r\n              Inicia sesión aquí\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n// Componente de Barra de Búsqueda de ESTUDIANTES MEJORADO con sugerencias\r\nconst BarraBusquedaEstudiantes = ({ estudiantes, onBuscarEstudiante, busquedaEstudiante, setBusquedaEstudiante }) => {\r\n  const [sugerencias, setSugerencias] = useState([]);\r\n  const [mostrarSugerencias, setMostrarSugerencias] = useState(false);\r\n\r\n  // Normalizar texto para búsqueda (minúsculas, sin tildes, sin comas)\r\n  const normalizarTexto = (texto) => {\r\n    return texto\r\n      .toLowerCase()\r\n      .normalize(\"NFD\").replace(/[\\u0300-\\u036f]/g, \"\") // eliminar tildes\r\n      .replace(/[.,]/g, \"\"); // eliminar comas y puntos\r\n  };\r\n\r\n  // Filtrar sugerencias en tiempo real\r\n  useEffect(() => {\r\n    if (busquedaEstudiante.length >= 2) {\r\n      const textoBusqueda = normalizarTexto(busquedaEstudiante);\r\n      const sugerenciasFiltradas = estudiantes.filter(estudiante => \r\n        normalizarTexto(estudiante.nombre).includes(textoBusqueda)\r\n      );\r\n      setSugerencias(sugerenciasFiltradas);\r\n      setMostrarSugerencias(true);\r\n    } else {\r\n      setSugerencias([]);\r\n      setMostrarSugerencias(false);\r\n    }\r\n  }, [busquedaEstudiante, estudiantes]);\r\n\r\n  const buscarYRedirigirEstudiante = (nombre) => {\r\n    if (!nombre.trim()) return;\r\n    \r\n    const estudianteEncontrado = estudiantes.find(e => \r\n      normalizarTexto(e.nombre).includes(normalizarTexto(nombre))\r\n    );\r\n    \r\n    if (estudianteEncontrado) {\r\n      onBuscarEstudiante(estudianteEncontrado);\r\n      setBusquedaEstudiante('');\r\n      setMostrarSugerencias(false);\r\n    } else {\r\n      alert('Estudiante no encontrado');\r\n    }\r\n  };\r\n\r\n  const seleccionarSugerencia = (estudiante) => {\r\n    onBuscarEstudiante(estudiante);\r\n    setBusquedaEstudiante('');\r\n    setMostrarSugerencias(false);\r\n  };\r\n\r\n  return (\r\n    <div className=\"bg-gradient-to-r from-blue-100 to-purple-100 rounded-xl p-4 mb-6\">\r\n      <div className=\"flex flex-col md:flex-row gap-4 items-center\">\r\n        <div className=\"flex-1 w-full relative\">\r\n          <label className=\"block text-sm font-bold text-gray-700 mb-2\">\r\n            🔍 Buscar Estudiante\r\n          </label>\r\n          <div className=\"relative\">\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Escribe el nombre del estudiante...\"\r\n              value={busquedaEstudiante}\r\n              onChange={(e) => setBusquedaEstudiante(e.target.value)}\r\n              onKeyPress={(e) => e.key === 'Enter' && buscarYRedirigirEstudiante(busquedaEstudiante)}\r\n              className=\"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-purple-500 text-sm md:text-base\"\r\n            />\r\n            \r\n            {/* Lista de sugerencias */}\r\n            {mostrarSugerencias && sugerencias.length > 0 && (\r\n              <div className=\"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto\">\r\n                {sugerencias.map((estudiante) => (\r\n                  <div\r\n                    key={estudiante.id}\r\n                    onClick={() => seleccionarSugerencia(estudiante)}\r\n                    className=\"px-4 py-3 hover:bg-purple-50 cursor-pointer border-b border-gray-100 last:border-b-0\"\r\n                  >\r\n                    <div className=\"flex items-center gap-3\">\r\n                      <div className=\"bg-purple-600 text-white w-8 h-8 rounded-full flex items-center justify-center font-bold text-sm\">\r\n                        {estudiante.nombre.charAt(0).toUpperCase()}\r\n                      </div>\r\n                      <span className=\"font-medium\">{estudiante.nombre}</span>\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            )}\r\n          </div>\r\n          <p className=\"text-xs text-gray-600 mt-2\">\r\n            💡 Comienza a escribir para ver sugerencias. Ignora mayúsculas, tildes y comas.\r\n          </p>\r\n        </div>\r\n        \r\n        <div className=\"mt-4 md:mt-6\">\r\n          <button\r\n            onClick={() => buscarYRedirigirEstudiante(busquedaEstudiante)}\r\n            className=\"bg-purple-600 text-white px-4 md:px-6 py-3 rounded-lg hover:bg-purple-700 transition font-bold flex items-center gap-2 text-sm md:text-base\"\r\n          >\r\n            <Search className=\"w-4 h-4 md:w-5 md:h-5\" />\r\n            <span className=\"hidden sm:inline\">Buscar</span>\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n// Componente para Cuadro de Porcentajes (En construcción)\r\nconst CuadroPorcentajes = () => {\r\n  return (\r\n    <div className=\"bg-white rounded-2xl shadow-lg p-8 text-center\">\r\n      <div className=\"max-w-md mx-auto\">\r\n        <div className=\"bg-yellow-100 border-2 border-yellow-300 rounded-xl p-6 mb-6\">\r\n          <PieChart className=\"w-16 h-16 text-yellow-600 mx-auto mb-4\" />\r\n          <h3 className=\"text-2xl font-bold text-yellow-800 mb-2\">En Construcción</h3>\r\n          <p className=\"text-yellow-700\">\r\n            Estamos trabajando en el Cuadro de Porcentajes. Pronto tendrás acceso a estadísticas \r\n            detalladas y análisis avanzados de rendimiento.\r\n          </p>\r\n        </div>\r\n        <div className=\"bg-gray-100 rounded-lg p-4\">\r\n          <p className=\"text-sm text-gray-600\">\r\n            📊 <strong>Próximamente:</strong> Gráficos de porcentajes, análisis comparativos, \r\n            tendencias de rendimiento y más herramientas de análisis educativo.\r\n          </p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n// Utilidades comunes\r\nconst normalizarDatos = (datosIn) => {\r\n  try {\r\n    if (typeof datosIn === 'string') return JSON.parse(datosIn);\r\n    return datosIn ?? {};\r\n  } catch {\r\n    return datosIn;\r\n  }\r\n};\r\n\r\nconst objetoATabla = (obj) => {\r\n  return Object.entries(obj).map(([key, value]) => ({\r\n    Campo: key,\r\n    Valor: typeof value === 'object' ? JSON.stringify(value) : String(value),\r\n  }));\r\n};\r\n\r\nconst descargarBlob = (blob, nombreArchivo) => {\r\n  const url = URL.createObjectURL(blob);\r\n  const link = document.createElement('a');\r\n  link.href = url;\r\n  link.download = nombreArchivo;\r\n  document.body.appendChild(link);\r\n  link.click();\r\n  document.body.removeChild(link);\r\n  URL.revokeObjectURL(url);\r\n};\r\n\r\n// Exportar a Excel (arreglado)\r\nconst exportarAExcel = (datosIn, nombreArchivo) => {\r\n  try {\r\n    const datos = normalizarDatos(datosIn);\r\n    const workbook = XLSX.utils.book_new();\r\n\r\n    let worksheet;\r\n    if (Array.isArray(datos)) {\r\n      worksheet = XLSX.utils.json_to_sheet(datos);\r\n    } else if (typeof datos === 'object' && datos) {\r\n      worksheet = XLSX.utils.json_to_sheet(objetoATabla(datos));\r\n    } else {\r\n      worksheet = XLSX.utils.json_to_sheet([{ Valor: String(datos) }]);\r\n    }\r\n\r\n    XLSX.utils.book_append_sheet(workbook, worksheet, 'Datos');\r\n    XLSX.writeFile(workbook, `${nombreArchivo}.xlsx`);\r\n    console.log('✅ Archivo Excel generado exitosamente');\r\n  } catch (error) {\r\n    console.error('❌ Error al exportar a Excel:', error);\r\n    alert('Error al generar archivo Excel');\r\n  }\r\n};\r\n\r\n// Exportar a PDF (arreglado)\r\nconst exportarAPDF = (datosIn, nombreArchivo) => {\r\n  try {\r\n    const datos = normalizarDatos(datosIn);\r\n    const doc = new jsPDF();\r\n\r\n    doc.setFontSize(16);\r\n    doc.setTextColor(40);\r\n    doc.text('Reporte Bringo Edu', 20, 20);\r\n\r\n    doc.setFontSize(10);\r\n    doc.setTextColor(100);\r\n    doc.text(`Generado: ${new Date().toLocaleDateString('es-PA')}`, 20, 30);\r\n\r\n    let yPosition = 45;\r\n\r\n    const agregarTabla = (titulo, datosTabla) => {\r\n      if (!Array.isArray(datosTabla) || datosTabla.length === 0) return;\r\n      if (yPosition > 260) {\r\n        doc.addPage();\r\n        yPosition = 20;\r\n      }\r\n      doc.setFontSize(12);\r\n      doc.setTextColor(40);\r\n      doc.text(titulo, 20, yPosition);\r\n      yPosition += 6;\r\n\r\n      const headers = Object.keys(datosTabla[0] ?? {});\r\n      const body = datosTabla.map((row) =>\r\n        headers.map((h) => {\r\n          const val = row[h];\r\n          return typeof val === 'object' ? JSON.stringify(val) : String(val ?? '');\r\n        })\r\n      );\r\n\r\n      doc.autoTable({\r\n        startY: yPosition,\r\n        head: [headers],\r\n        body,\r\n        styles: { fontSize: 8 },\r\n        headStyles: { fillColor: [128, 100, 255] },\r\n        margin: { left: 20, right: 20 },\r\n      });\r\n\r\n      yPosition = doc.lastAutoTable.finalY + 10;\r\n    };\r\n\r\n    if (Array.isArray(datos)) {\r\n      agregarTabla('Datos del Reporte', datos);\r\n    } else if (typeof datos === 'object' && datos) {\r\n      agregarTabla('Resumen del Reporte', objetoATabla(datos));\r\n      Object.entries(datos).forEach(([k, v]) => {\r\n        if (Array.isArray(v) && v.length > 0 && typeof v[0] === 'object') {\r\n          agregarTabla(String(k), v);\r\n        }\r\n      });\r\n    } else {\r\n      agregarTabla('Datos', [{ Valor: String(datos) }]);\r\n    }\r\n\r\n    doc.save(`${nombreArchivo}.pdf`);\r\n    console.log('✅ Archivo PDF generado exitosamente');\r\n  } catch (error) {\r\n    console.error('❌ Error al exportar a PDF:', error);\r\n    alert('Error al generar archivo PDF');\r\n  }\r\n};\r\n\r\n// Exportar a Word (arreglado)\r\nconst exportarAWord = async (datosIn, nombreArchivo) => {\r\n  try {\r\n    const datos = normalizarDatos(datosIn);\r\n    const children = [];\r\n\r\n    children.push(\r\n      new Paragraph({\r\n        children: [new TextRun({ text: 'Reporte Bringo Edu', bold: true, size: 32 })],\r\n        alignment: AlignmentType.CENTER,\r\n        spacing: { after: 400 },\r\n      }),\r\n      new Paragraph({\r\n        children: [new TextRun({ text: `Generado: ${new Date().toLocaleDateString('es-PA')}`, italics: true, size: 20 })],\r\n        alignment: AlignmentType.CENTER,\r\n        spacing: { after: 400 },\r\n      })\r\n    );\r\n\r\n    if (Array.isArray(datos) && datos.length > 0) {\r\n      const headers = Object.keys(datos[0]);\r\n      const tableRows = [\r\n        new TableRow({\r\n          children: headers.map((key) =>\r\n            new TableCell({\r\n              children: [new Paragraph({ children: [new TextRun({ text: key, bold: true })] })],\r\n              shading: { fill: 'D0C9FF' },\r\n            })\r\n          ),\r\n        }),\r\n        ...datos.map(\r\n          (row) =>\r\n            new TableRow({\r\n              children: headers.map((key) =>\r\n                new TableCell({\r\n                  children: [\r\n                    new Paragraph({\r\n                      children: [\r\n                        new TextRun({\r\n                          text: typeof row[key] === 'object' ? JSON.stringify(row[key]) : String(row[key] ?? ''),\r\n                        }),\r\n                      ],\r\n                    }),\r\n                  ],\r\n                })\r\n              ),\r\n            })\r\n        ),\r\n      ];\r\n\r\n      children.push(\r\n        new Paragraph({\r\n          children: [new TextRun({ text: 'Datos del Reporte', bold: true, size: 24 })],\r\n          spacing: { after: 200 },\r\n        }),\r\n        new Table({ width: { size: 100, type: 'pct' }, rows: tableRows })\r\n      );\r\n    } else if (typeof datos === 'object' && datos) {\r\n      Object.entries(datos).forEach(([key, value]) => {\r\n        children.push(\r\n          new Paragraph({\r\n            children: [\r\n              new TextRun({ text: `${key}: `, bold: true, size: 20 }),\r\n              new TextRun({ text: typeof value === 'object' ? JSON.stringify(value, null, 2) : String(value ?? ''), size: 20 }),\r\n            ],\r\n            spacing: { after: 200 },\r\n          })\r\n        );\r\n      });\r\n    } else {\r\n      children.push(new Paragraph({ children: [new TextRun({ text: String(datos ?? ''), size: 20 })] }));\r\n    }\r\n\r\n    const doc = new Document({ sections: [{ properties: {}, children }] });\r\n    const buffer = await Packer.toBuffer(doc);\r\n    const blob = new Blob([buffer], { type: 'application/vnd.openxmlformats-officedocument.wordprocessingml.document' });\r\n    descargarBlob(blob, `${nombreArchivo}.docx`);\r\n    console.log('✅ Archivo Word generado exitosamente');\r\n  } catch (error) {\r\n    console.error('❌ Error al exportar a Word:', error);\r\n    alert('Error al generar archivo Word');\r\n  }\r\n};\r\n\r\n// Generar Blob por formato (útil también para Google Drive)\r\nconst generarBlobPorFormato = async (datosIn, formato) => {\r\n  const datos = normalizarDatos(datosIn);\r\n\r\n  if (formato === 'excel') {\r\n    const workbook = XLSX.utils.book_new();\r\n    let worksheet;\r\n    if (Array.isArray(datos)) {\r\n      worksheet = XLSX.utils.json_to_sheet(datos);\r\n    } else if (typeof datos === 'object' && datos) {\r\n      worksheet = XLSX.utils.json_to_sheet(objetoATabla(datos));\r\n    } else {\r\n      worksheet = XLSX.utils.json_to_sheet([{ Valor: String(datos) }]);\r\n    }\r\n    XLSX.utils.book_append_sheet(workbook, worksheet, 'Datos');\r\n    const arrayBuffer = XLSX.write(workbook, { bookType: 'xlsx', type: 'array' });\r\n    return {\r\n      blob: new Blob([arrayBuffer], { type: 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet' }),\r\n      ext: 'xlsx',\r\n      mime: 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',\r\n    };\r\n  }\r\n\r\n  if (formato === 'pdf') {\r\n    const pdfDoc = new jsPDF();\r\n    pdfDoc.setFontSize(16);\r\n    pdfDoc.text('Reporte Bringo Edu', 20, 20);\r\n    pdfDoc.setFontSize(10);\r\n    pdfDoc.text(`Generado: ${new Date().toLocaleDateString('es-PA')}`, 20, 30);\r\n    let y = 45;\r\n\r\n    const agregarTabla = (titulo, arr) => {\r\n      if (!Array.isArray(arr) || arr.length === 0) return;\r\n      if (y > 260) {\r\n        pdfDoc.addPage();\r\n        y = 20;\r\n      }\r\n      pdfDoc.setFontSize(12);\r\n      pdfDoc.text(titulo, 20, y);\r\n      y += 6;\r\n      const headers = Object.keys(arr[0] ?? {});\r\n      const body = arr.map((r) => headers.map((h) => String(r[h] ?? '')));\r\n      pdfDoc.autoTable({\r\n        startY: y,\r\n        head: [headers],\r\n        body,\r\n        styles: { fontSize: 8 },\r\n        headStyles: { fillColor: [128, 100, 255] },\r\n        margin: { left: 20, right: 20 },\r\n      });\r\n      y = pdfDoc.lastAutoTable.finalY + 10;\r\n    };\r\n\r\n    if (Array.isArray(datos)) agregarTabla('Datos del Reporte', datos);\r\n    else if (typeof datos === 'object' && datos) {\r\n      agregarTabla('Resumen del Reporte', objetoATabla(datos));\r\n      Object.entries(datos).forEach(([k, v]) => {\r\n        if (Array.isArray(v) && v.length > 0 && typeof v[0] === 'object') agregarTabla(String(k), v);\r\n      });\r\n    } else {\r\n      agregarTabla('Datos', [{ Valor: String(datos) }]);\r\n    }\r\n\r\n    const blob = pdfDoc.output('blob');\r\n    return { blob, ext: 'pdf', mime: 'application/pdf' };\r\n  }\r\n\r\n  if (formato === 'word') {\r\n    const children = [\r\n      new Paragraph({\r\n        children: [new TextRun({ text: 'Reporte Bringo Edu', bold: true, size: 32 })],\r\n        alignment: AlignmentType.CENTER,\r\n        spacing: { after: 400 },\r\n      }),\r\n      new Paragraph({\r\n        children: [new TextRun({ text: `Generado: ${new Date().toLocaleDateString('es-PA')}`, italics: true, size: 20 })],\r\n        alignment: AlignmentType.CENTER,\r\n        spacing: { after: 400 },\r\n      }),\r\n    ];\r\n\r\n    if (Array.isArray(datos) && datos.length > 0) {\r\n      const headers = Object.keys(datos[0]);\r\n      const rows = [\r\n        new TableRow({\r\n          children: headers.map((k) =>\r\n            new TableCell({\r\n              children: [new Paragraph({ children: [new TextRun({ text: k, bold: true })] })],\r\n              shading: { fill: 'D0C9FF' },\r\n            })\r\n          ),\r\n        }),\r\n        ...datos.map(\r\n          (row) =>\r\n            new TableRow({\r\n              children: headers.map((k) =>\r\n                new TableCell({\r\n                  children: [new Paragraph({ children: [new TextRun({ text: typeof row[k] === 'object' ? JSON.stringify(row[k]) : String(row[k] ?? '') })] })],\r\n                })\r\n              ),\r\n            })\r\n        ),\r\n      ];\r\n      children.push(\r\n        new Paragraph({ children: [new TextRun({ text: 'Datos del Reporte', bold: true, size: 24 })], spacing: { after: 200 } }),\r\n        new Table({ width: { size: 100, type: 'pct' }, rows })\r\n      );\r\n    } else if (typeof datos === 'object' && datos) {\r\n      Object.entries(datos).forEach(([key, value]) => {\r\n        children.push(\r\n          new Paragraph({\r\n            children: [\r\n              new TextRun({ text: `${key}: `, bold: true, size: 20 }),\r\n              new TextRun({ text: typeof value === 'object' ? JSON.stringify(value, null, 2) : String(value ?? ''), size: 20 }),\r\n            ],\r\n            spacing: { after: 200 },\r\n          })\r\n        );\r\n      });\r\n    } else {\r\n      children.push(new Paragraph({ children: [new TextRun({ text: String(datos ?? ''), size: 20 })] }));\r\n    }\r\n\r\n    const docx = new Document({ sections: [{ properties: {}, children }] });\r\n    const buffer = await Packer.toBuffer(docx);\r\n    const blob = new Blob([buffer], { type: 'application/vnd.openxmlformats-officedocument.wordprocessingml.document' });\r\n    return { blob, ext: 'docx', mime: 'application/vnd.openxmlformats-officedocument.wordprocessingml.document' };\r\n  }\r\n\r\n  throw new Error('Formato no soportado');\r\n};\r\n\r\n// Subir a Google Drive (REAL con backend)\r\nconst subirAGoogleDrive = async (datosIn, nombreArchivoBase, formato = 'pdf') => {\r\n  try {\r\n    const { blob, ext, mime } = await generarBlobPorFormato(datosIn, formato);\r\n    const nombreArchivo = `${nombreArchivoBase}.${ext}`;\r\n\r\n    const formData = new FormData();\r\n    formData.append('file', blob, nombreArchivo);\r\n    formData.append('filename', nombreArchivo);\r\n    formData.append('mimeType', mime);\r\n\r\n    let authHeaders = {};\r\n    if (auth?.currentUser) {\r\n      const token = await auth.currentUser.getIdToken(false);\r\n      authHeaders = { Authorization: `Bearer ${token}` };\r\n    }\r\n\r\n    const DRIVE_UPLOAD_URL = 'https://bringo-edu-backend-2.onrender.com/api/drive/upload';\r\n\r\n    const res = await fetch(DRIVE_UPLOAD_URL, {\r\n      method: 'POST',\r\n      headers: authHeaders,\r\n      body: formData,\r\n    });\r\n\r\n    if (!res.ok) {\r\n      const err = await res.json().catch(() => ({}));\r\n      throw new Error(err.error || `Error ${res.status} al subir a Google Drive`);\r\n    }\r\n\r\n    const result = await res.json().catch(() => ({}));\r\n    console.log('✅ Subida a Drive exitosa', result);\r\n    alert('Archivo subido a Google Drive correctamente');\r\n    return result;\r\n  } catch (error) {\r\n    console.error('❌ Error al subir a Google Drive:', error);\r\n    alert(`Error al subir a Google Drive: ${error.message}`);\r\n  }\r\n};\r\n\r\n\r\n// [El resto del código se mantiene igual hasta el final...]\r\n\r\nexport default function AsistenteProfesor() {\r\n  const [usuario, setUsuario] = useState(null);\r\n  const [mostrarLogin, setMostrarLogin] = useState(false);\r\n  const [mostrarRegistro, setMostrarRegistro] = useState(false);\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [nombreUsuario, setNombreUsuario] = useState('');\r\n  const [confirmarPassword, setConfirmarPassword] = useState('');\r\n  const [errorAuth, setErrorAuth] = useState('');\r\n  const [cargandoAuth, setCargandoAuth] = useState(false);\r\n  \r\n  const [view, setView] = useState('home');\r\n  const [clases, setClases] = useState([]);\r\n  const [claseSeleccionada, setClaseSeleccionada] = useState(null);\r\n  const [nombreClase, setNombreClase] = useState('');\r\n  const [grado, setGrado] = useState('');\r\n  const [seccion, setSeccion] = useState('');\r\n  const [nombreProfesorClase, setNombreProfesorClase] = useState('');\r\n  const [institucionClase, setInstitucionClase] = useState('');\r\n  const [estudiantes, setEstudiantes] = useState([]);\r\n  const [nombreEstudiante, setNombreEstudiante] = useState('');\r\n  const [expandido, setExpandido] = useState({});\r\n  const [fechaActual, setFechaActual] = useState(new Date().toISOString().split('T')[0]);\r\n  \r\n  const [nombreProfesor, setNombreProfesor] = useState('');\r\n  const [institucion, setInstitucion] = useState('');\r\n  const [gradoPlan, setGradoPlan] = useState('');\r\n  const [materia, setMateria] = useState('');\r\n  const [trimestre, setTrimestre] = useState('Primer Trimestre');\r\n  const [planGenerado, setPlanGenerado] = useState(null);\r\n  const [generandoPlan, setGenerandoPlan] = useState(false);\r\n\r\n  // Estado para búsqueda de estudiantes - MANTENIDO\r\n  const [busquedaEstudiante, setBusquedaEstudiante] = useState('');\r\n\r\n  // Efecto para manejar el estado de autenticación\r\n  useEffect(() => {\r\n    const unsubscribe = onAuthStateChanged(auth, (user) => {\r\n      if (user) {\r\n        setUsuario({ \r\n          email: user.email, \r\n          nombre: user.displayName || user.email.split('@')[0],\r\n          uid: user.uid \r\n        });\r\n        cargarClases(user.uid);\r\n      } else {\r\n        setUsuario(null);\r\n        setClases([]);\r\n      }\r\n    });\r\n    return () => unsubscribe();\r\n  }, []);\r\n\r\n  // Cargar clases desde Firestore\r\n  const cargarClases = async (userId) => {\r\n    try {\r\n      const q = query(collection(db, 'clases'), where('userId', '==', userId));\r\n      const querySnapshot = await getDocs(q);\r\n      const clasesData = [];\r\n      querySnapshot.forEach((doc) => {\r\n        clasesData.push({ id: doc.id, ...doc.data() });\r\n      });\r\n      setClases(clasesData);\r\n    } catch (error) {\r\n      console.error('Error cargando clases:', error);\r\n    }\r\n  };\r\n\r\n  const registrarUsuario = async () => {\r\n    setErrorAuth('');\r\n    \r\n    if (!email || !password || !nombreUsuario) {\r\n      setErrorAuth('Por favor completa todos los campos');\r\n      return;\r\n    }\r\n    \r\n    if (password !== confirmarPassword) {\r\n      setErrorAuth('Las contraseñas no coinciden');\r\n      return;\r\n    }\r\n    \r\n    if (password.length < 6) {\r\n      setErrorAuth('La contraseña debe tener al menos 6 caracteres');\r\n      return;\r\n    }\r\n\r\n    setCargandoAuth(true);\r\n    \r\n    try {\r\n      const userCredential = await createUserWithEmailAndPassword(auth, email, password);\r\n      setUsuario({ \r\n        email: userCredential.user.email, \r\n        nombre: nombreUsuario,\r\n        uid: userCredential.user.uid \r\n      });\r\n      setMostrarRegistro(false);\r\n      limpiarFormulariosAuth();\r\n    } catch (error) {\r\n      if (error.code === 'auth/email-already-in-use') {\r\n        setErrorAuth('Este correo ya está registrado');\r\n      } else if (error.code === 'auth/weak-password') {\r\n        setErrorAuth('La contraseña es muy débil');\r\n      } else {\r\n        setErrorAuth('Error al registrar: ' + error.message);\r\n      }\r\n    } finally {\r\n      setCargandoAuth(false);\r\n    }\r\n  };\r\n\r\n  const iniciarSesion = async () => {\r\n    setErrorAuth('');\r\n    \r\n    if (!email || !password) {\r\n      setErrorAuth('Por favor ingresa email y contraseña');\r\n      return;\r\n    }\r\n\r\n    setCargandoAuth(true);\r\n\r\n    try {\r\n      const userCredential = await signInWithEmailAndPassword(auth, email, password);\r\n      setUsuario({ \r\n        email: userCredential.user.email, \r\n        nombre: userCredential.user.displayName || userCredential.user.email.split('@')[0],\r\n        uid: userCredential.user.uid \r\n      });\r\n      setMostrarLogin(false);\r\n      limpiarFormulariosAuth();\r\n    } catch (error) {\r\n      if (error.code === 'auth/user-not-found') {\r\n        setErrorAuth('Usuario no encontrado');\r\n      } else if (error.code === 'auth/wrong-password') {\r\n        setErrorAuth('Contraseña incorrecta');\r\n      } else {\r\n        setErrorAuth('Error al iniciar sesión: ' + error.message);\r\n      }\r\n    } finally {\r\n      setCargandoAuth(false);\r\n    }\r\n  };\r\n\r\n  const cerrarSesion = async () => {\r\n    try {\r\n      await signOut(auth);\r\n      setUsuario(null);\r\n      setView('home');\r\n      setClaseSeleccionada(null);\r\n      setClases([]);\r\n    } catch (error) {\r\n      console.error('Error al cerrar sesión:', error);\r\n    }\r\n  };\r\n\r\n  const limpiarFormulariosAuth = () => {\r\n    setEmail('');\r\n    setPassword('');\r\n    setNombreUsuario('');\r\n    setConfirmarPassword('');\r\n    setErrorAuth('');\r\n  };\r\n\r\n  // FUNCIÓN MEJORADA: Generar plan trimestral\r\n  const generarPlanConOpenAI = async () => {\r\n    if (!nombreProfesor.trim() || !institucion.trim() || !gradoPlan.trim() || !materia.trim() || !trimestre.trim()) {\r\n      alert('Por favor completa todos los campos');\r\n      return;\r\n    }\r\n\r\n    setGenerandoPlan(true);\r\n\r\n    try {\r\n      const BACKEND_URL = 'https://bringo-edu-backend-2.onrender.com/api/generate-plan';\r\n\r\n      const response = await fetch(BACKEND_URL, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({\r\n          nombreProfesor,\r\n          institucion,\r\n          gradoPlan,\r\n          materia,\r\n          trimestre,\r\n          incluirDesarrolloClases: true\r\n        })\r\n      });\r\n\r\n      if (!response.ok) {\r\n        const errorData = await response.json().catch(() => ({ error: 'Error desconocido' }));\r\n        throw new Error(errorData.error || `Error ${response.status} del servidor`);\r\n      }\r\n\r\n      const data = await response.json();\r\n      \r\n      if (!data.contenidos || !Array.isArray(data.contenidos) || data.contenidos.length === 0) {\r\n        alert('El servicio de IA no generó contenido. Intenta nuevamente.');\r\n        return;\r\n      }\r\n      \r\n      setPlanGenerado({\r\n        ...data,\r\n        fecha: data.fecha || new Date().toLocaleDateString('es-PA'),\r\n        generadoPorIA: true\r\n      });\r\n\r\n    } catch (error) {\r\n      console.error('❌ Error al generar plan:', error);\r\n      alert(`Error al generar el plan: ${error.message}`);\r\n    } finally {\r\n      setGenerandoPlan(false);\r\n    }\r\n  };\r\n\r\n  // FUNCIÓN MEJORADA: Descargar plan trimestral con múltiples formatos\r\n  const descargarPlan = (formato = 'txt') => {\r\n    if (!planGenerado) return;\r\n\r\n    let contenido = `PLAN TRIMESTRAL - BRINGO EDU\\n`;\r\n    contenido += `${'='.repeat(80)}\\n\\n`;\r\n    \r\n    contenido += `INFORMACIÓN GENERAL\\n`;\r\n    contenido += `-`.repeat(80) + `\\n`;\r\n    contenido += `Profesor: ${planGenerado.docente || planGenerado.profesor || nombreProfesor}\\n`;\r\n    contenido += `Institución: ${planGenerado.institucion}\\n`;\r\n    contenido += `Grado: ${planGenerado.grado || gradoPlan}\\n`;\r\n    contenido += `Asignatura: ${planGenerado.asignatura || planGenerado.materia || materia}\\n`;\r\n    contenido += `Trimestre: ${planGenerado.trimestre}\\n`;\r\n    contenido += `Año Escolar: ${planGenerado.anioEscolar || new Date().getFullYear()}\\n`;\r\n    contenido += `Duración: ${planGenerado.duracionSemanas || '10-12'} semanas\\n`;\r\n    contenido += `Fecha de generación: ${planGenerado.fecha || new Date().toLocaleDateString('es-PA')}\\n\\n`;\r\n\r\n    if (planGenerado.contenidos && planGenerado.contenidos.length > 0) {\r\n      contenido += `CONTENIDOS DEL TRIMESTRE\\n`;\r\n      contenido += `-`.repeat(80) + `\\n`;\r\n      planGenerado.contenidos.forEach((cont, i) => {\r\n        contenido += `${i + 1}. ${cont}\\n`;\r\n      });\r\n      contenido += `\\n`;\r\n    }\r\n\r\n    // Desarrollo del Contenido para Clases\r\n    if (planGenerado.desarrolloClases && Object.keys(planGenerado.desarrolloClases).length > 0) {\r\n      contenido += `DESARROLLO DEL CONTENIDO PARA CLASES\\n`;\r\n      contenido += `-`.repeat(80) + `\\n`;\r\n      Object.entries(planGenerado.desarrolloClases).forEach(([contenidoKey, desarrollo]) => {\r\n        contenido += `\\n📝 ${contenidoKey}:\\n`;\r\n        contenido += `Duración: ${desarrollo.duracion || '3 sesiones de 45 minutos'}\\n\\n`;\r\n        \r\n        if (desarrollo.objetivos && desarrollo.objetivos.length > 0) {\r\n          contenido += `Objetivos de Aprendizaje:\\n`;\r\n          desarrollo.objetivos.forEach(objetivo => {\r\n            contenido += `- ${objetivo}\\n`;\r\n          });\r\n          contenido += `\\n`;\r\n        }\r\n\r\n        if (desarrollo.materiales && desarrollo.materiales.length > 0) {\r\n          contenido += `Materiales necesarios:\\n`;\r\n          desarrollo.materiales.forEach(material => {\r\n            contenido += `- ${material}\\n`;\r\n          });\r\n          contenido += `\\n`;\r\n        }\r\n\r\n        if (desarrollo.fases && desarrollo.fases.length > 0) {\r\n          contenido += `Fases de la actividad:\\n`;\r\n          desarrollo.fases.forEach((fase, index) => {\r\n            contenido += `\\nSESIÓN ${index + 1} - ${fase.titulo || 'Desarrollo'}\\n`;\r\n            if (fase.actividades) {\r\n              fase.actividades.forEach(actividad => {\r\n                contenido += `${actividad.tiempo}: ${actividad.descripcion}\\n`;\r\n              });\r\n            }\r\n          });\r\n          contenido += `\\n`;\r\n        }\r\n        contenido += `-`.repeat(40) + `\\n`;\r\n      });\r\n    }\r\n\r\n    if (planGenerado.competencias && planGenerado.competencias.length > 0) {\r\n      contenido += `COMPETENCIAS A DESARROLLAR\\n`;\r\n      contenido += `-`.repeat(80) + `\\n`;\r\n      planGenerado.competencias.forEach((comp, i) => {\r\n        contenido += `${i + 1}. ${comp}\\n`;\r\n      });\r\n      contenido += `\\n`;\r\n    }\r\n\r\n    if (planGenerado.indicadoresLogro && planGenerado.indicadoresLogro.length > 0) {\r\n      contenido += `INDICADORES DE LOGRO\\n`;\r\n      contenido += `-`.repeat(80) + `\\n`;\r\n      planGenerado.indicadoresLogro.forEach((ind, i) => {\r\n        contenido += `• ${ind}\\n`;\r\n      });\r\n      contenido += `\\n`;\r\n    }\r\n\r\n    if (planGenerado.metodologia) {\r\n      contenido += `ESTRATEGIAS METODOLÓGICAS\\n`;\r\n      contenido += `-`.repeat(80) + `\\n`;\r\n      contenido += `${planGenerado.metodologia}\\n\\n`;\r\n    }\r\n\r\n    if (planGenerado.recursos && planGenerado.recursos.length > 0) {\r\n      contenido += `RECURSOS EDUCATIVOS\\n`;\r\n      contenido += `-`.repeat(80) + `\\n`;\r\n      planGenerado.recursos.forEach((rec, i) => {\r\n        contenido += `• ${rec}\\n`;\r\n      });\r\n      contenido += `\\n`;\r\n    }\r\n\r\n    if (planGenerado.evaluacion && Array.isArray(planGenerado.evaluacion) && planGenerado.evaluacion.length > 0) {\r\n      contenido += `INSTRUMENTOS DE EVALUACIÓN\\n`;\r\n      contenido += `-`.repeat(80) + `\\n`;\r\n      planGenerado.evaluacion.forEach((evalItem, i) => {\r\n        contenido += `• ${evalItem}\\n`;\r\n      });\r\n      contenido += `\\n`;\r\n    }\r\n   \r\n    if (planGenerado.adaptaciones && planGenerado.adaptaciones.length > 0) {\r\n      contenido += `ADAPTACIONES CURRICULARES\\n`;\r\n      contenido += `-`.repeat(80) + `\\n`;\r\n      planGenerado.adaptaciones.forEach((adap, i) => {\r\n        contenido += `• ${adap}\\n`;\r\n      });\r\n      contenido += `\\n`;\r\n    }\r\n\r\n    if (planGenerado.observaciones) {\r\n      contenido += `OBSERVACIONES\\n`;\r\n      contenido += `-`.repeat(80) + `\\n`;\r\n      contenido += `${planGenerado.observaciones}\\n\\n`;\r\n    }\r\n\r\n    contenido += `\\n${'='.repeat(80)}\\n`;\r\n    contenido += `Generado con Bringo Edu - Asistente Inteligente para Profesores\\n`;\r\n    contenido += `Fecha: ${new Date().toLocaleDateString('es-PA')}\\n`;\r\n\r\n    const elemento = document.createElement('a');\r\n    const archivo = new Blob([contenido], { type: 'text/plain;charset=utf-8' });\r\n    elemento.href = URL.createObjectURL(archivo);\r\n    elemento.download = `Plan_Trimestral_${planGenerado.asignatura || materia}_${planGenerado.trimestre.replace(/\\s+/g, '_')}.txt`;\r\n    document.body.appendChild(elemento);\r\n    elemento.click();\r\n    document.body.removeChild(elemento);\r\n  };\r\n\r\n  // FUNCIÓN MEJORADA: Agregar clase con nuevos campos\r\n  const agregarClase = async () => {\r\n    if (!usuario) {\r\n      alert('Debes iniciar sesión para crear clases');\r\n      setMostrarLogin(true);\r\n      return;\r\n    }\r\n\r\n    if (!nombreClase.trim() || !grado.trim() || !seccion.trim() || !nombreProfesorClase.trim() || !institucionClase.trim()) {\r\n      alert('Por favor completa todos los campos');\r\n      return;\r\n    }\r\n    \r\n    try {\r\n      const nuevaClase = {\r\n        nombre: `${nombreClase} ${grado}${seccion}`,\r\n        grado,\r\n        seccion,\r\n        materia: nombreClase,\r\n        profesor: nombreProfesorClase,\r\n        institucion: institucionClase,\r\n        estudiantes: [],\r\n        userId: usuario.uid,\r\n        fechaCreacion: new Date().toISOString()\r\n      };\r\n      \r\n      const docRef = await addDoc(collection(db, 'clases'), nuevaClase);\r\n      setClases([...clases, { id: docRef.id, ...nuevaClase }]);\r\n      setNombreClase('');\r\n      setGrado('');\r\n      setSeccion('');\r\n      setNombreProfesorClase('');\r\n      setInstitucionClase('');\r\n      \r\n    } catch (error) {\r\n      console.error('❌ Error agregando clase:', error);\r\n      alert(`Error al crear la clase: ${error.message}`);\r\n    }\r\n  };\r\n\r\n  const eliminarClase = async (id) => {\r\n    if (window.confirm('¿Estás seguro de eliminar esta clase?')) {\r\n      try {\r\n        await deleteDoc(doc(db, 'clases', id));\r\n        setClases(clases.filter(c => c.id !== id));\r\n        if (claseSeleccionada?.id === id) {\r\n          setClaseSeleccionada(null);\r\n          setView('home');\r\n        }\r\n      } catch (error) {\r\n        console.error('Error eliminando clase:', error);\r\n        alert('Error al eliminar la clase');\r\n      }\r\n    }\r\n  };\r\n\r\n  const seleccionarClase = (clase) => {\r\n    if (!usuario) {\r\n      alert('Debes iniciar sesión para acceder a las clases');\r\n      setMostrarLogin(true);\r\n      return;\r\n    }\r\n    \r\n    setClaseSeleccionada(clase);\r\n    setEstudiantes(clase.estudiantes || []);\r\n    setView('clase');\r\n  };\r\n\r\n  // FUNCIÓN MEJORADA: Agregar estudiante\r\n  const agregarEstudiante = async () => {\r\n    if (!nombreEstudiante.trim()) {\r\n      alert('Ingresa el nombre del estudiante');\r\n      return;\r\n    }\r\n    \r\n    try {\r\n      const nuevoEstudiante = {\r\n        id: Date.now().toString(),\r\n        nombre: nombreEstudiante,\r\n        notasDiarias: [],\r\n        apreciacion: [],\r\n        examen: [],\r\n        asistencia: {}\r\n      };\r\n      \r\n      const nuevosEstudiantes = [...estudiantes, nuevoEstudiante];\r\n      setEstudiantes(nuevosEstudiantes);\r\n      \r\n      // Actualizar en Firestore\r\n      await updateDoc(doc(db, 'clases', claseSeleccionada.id), {\r\n        estudiantes: nuevosEstudiantes\r\n      });\r\n      \r\n      // Actualizar estado local\r\n      const clasesActualizadas = clases.map(c => \r\n        c.id === claseSeleccionada.id \r\n          ? { ...c, estudiantes: nuevosEstudiantes }\r\n          : c\r\n      );\r\n      setClases(clasesActualizadas);\r\n      setNombreEstudiante('');\r\n    } catch (error) {\r\n      console.error('Error agregando estudiante:', error);\r\n      alert('Error al agregar estudiante');\r\n    }\r\n  };\r\n\r\n  const marcarAsistencia = async (estudianteId, fecha, estado) => {\r\n    try {\r\n      const nuevosEstudiantes = estudiantes.map(e => {\r\n        if (e.id === estudianteId) {\r\n          return {\r\n            ...e,\r\n            asistencia: {\r\n              ...e.asistencia,\r\n              [fecha]: estado\r\n            }\r\n          };\r\n        }\r\n        return e;\r\n      });\r\n      setEstudiantes(nuevosEstudiantes);\r\n      \r\n      // Actualizar en Firestore\r\n      await updateDoc(doc(db, 'clases', claseSeleccionada.id), {\r\n        estudiantes: nuevosEstudiantes\r\n      });\r\n      \r\n      // Actualizar estado local\r\n      const clasesActualizadas = clases.map(c => \r\n        c.id === claseSeleccionada.id \r\n          ? { ...c, estudiantes: nuevosEstudiantes }\r\n          : c\r\n      );\r\n      setClases(clasesActualizadas);\r\n    } catch (error) {\r\n      console.error('Error marcando asistencia:', error);\r\n    }\r\n  };\r\n\r\n  // FUNCIÓN CORREGIDA: Agregar nota - AHORA FUNCIONA CORRECTAMENTE\r\n  const agregarNota = async (estudianteId, seccion, valor = '', fecha = new Date().toISOString().split('T')[0]) => {\r\n    try {\r\n      const nuevosEstudiantes = estudiantes.map(e => {\r\n        if (e.id === estudianteId) {\r\n          const nuevaNota = {\r\n            valor: valor ? parseFloat(valor) : '',\r\n            fecha: fecha\r\n          };\r\n          return {\r\n            ...e,\r\n            [seccion]: [...e[seccion], nuevaNota]\r\n          };\r\n        }\r\n        return e;\r\n      });\r\n      setEstudiantes(nuevosEstudiantes);\r\n      \r\n      // Actualizar en Firestore\r\n      await updateDoc(doc(db, 'clases', claseSeleccionada.id), {\r\n        estudiantes: nuevosEstudiantes\r\n      });\r\n      \r\n      // Actualizar estado local\r\n      const clasesActualizadas = clases.map(c => \r\n        c.id === claseSeleccionada.id \r\n          ? { ...c, estudiantes: nuevosEstudiantes }\r\n          : c\r\n      );\r\n      setClases(clasesActualizadas);\r\n    } catch (error) {\r\n      console.error('Error agregando nota:', error);\r\n      alert('Error al agregar nota');\r\n    }\r\n  };\r\n\r\n  const actualizarNota = async (estudianteId, seccion, indice, campo, valor) => {\r\n    try {\r\n      const nuevosEstudiantes = estudiantes.map(e => {\r\n        if (e.id === estudianteId) {\r\n          const nuevasNotas = [...e[seccion]];\r\n          nuevasNotas[indice] = { ...nuevasNotas[indice], [campo]: valor };\r\n          return {\r\n            ...e,\r\n            [seccion]: nuevasNotas\r\n          };\r\n        }\r\n        return e;\r\n      });\r\n      setEstudiantes(nuevosEstudiantes);\r\n      \r\n      // Actualizar en Firestore\r\n      await updateDoc(doc(db, 'clases', claseSeleccionada.id), {\r\n        estudiantes: nuevosEstudiantes\r\n      });\r\n      \r\n      // Actualizar estado local\r\n      const clasesActualizadas = clases.map(c => \r\n        c.id === claseSeleccionada.id \r\n          ? { ...c, estudiantes: nuevosEstudiantes }\r\n          : c\r\n      );\r\n      setClases(clasesActualizadas);\r\n    } catch (error) {\r\n      console.error('Error actualizando nota:', error);\r\n    }\r\n  };\r\n\r\n  const eliminarNota = async (estudianteId, seccion, indice) => {\r\n    try {\r\n      const nuevosEstudiantes = estudiantes.map(e => {\r\n        if (e.id === estudianteId) {\r\n          const nuevasNotas = e[seccion].filter((_, i) => i !== indice);\r\n          return {\r\n            ...e,\r\n            [seccion]: nuevasNotas\r\n          };\r\n        }\r\n        return e;\r\n      });\r\n      setEstudiantes(nuevosEstudiantes);\r\n      \r\n      // Actualizar en Firestore\r\n      await updateDoc(doc(db, 'clases', claseSeleccionada.id), {\r\n        estudiantes: nuevosEstudiantes\r\n      });\r\n      \r\n      // Actualizar estado local\r\n      const clasesActualizadas = clases.map(c => \r\n        c.id === claseSeleccionada.id \r\n          ? { ...c, estudiantes: nuevosEstudiantes }\r\n          : c\r\n      );\r\n      setClases(clasesActualizadas);\r\n    } catch (error) {\r\n      console.error('Error eliminando nota:', error);\r\n    }\r\n  };\r\n\r\n  const eliminarEstudiante = async (id) => {\r\n    try {\r\n      const nuevosEstudiantes = estudiantes.filter(e => e.id !== id);\r\n      setEstudiantes(nuevosEstudiantes);\r\n      \r\n      // Actualizar en Firestore\r\n      await updateDoc(doc(db, 'clases', claseSeleccionada.id), {\r\n        estudiantes: nuevosEstudiantes\r\n      });\r\n      \r\n      // Actualizar estado local\r\n      const clasesActualizadas = clases.map(c => \r\n        c.id === claseSeleccionada.id \r\n          ? { ...c, estudiantes: nuevosEstudiantes }\r\n          : c\r\n      );\r\n      setClases(clasesActualizadas);\r\n    } catch (error) {\r\n      console.error('Error eliminando estudiante:', error);\r\n      alert('Error al eliminar estudiante');\r\n    }\r\n  };\r\n\r\n  const contarAsistencias = (estudiante) => {\r\n    const registros = estudiante.asistencia || {};\r\n    const presente = Object.values(registros).filter(v => v === 'presente').length;\r\n    const ausente = Object.values(registros).filter(v => v === 'ausente').length;\r\n    const tardanza = Object.values(registros).filter(v => v === 'tardanza').length;\r\n    return { presente, ausente, tardanza };\r\n  };\r\n\r\n  const calcularTotalSeccion = (notas) => {\r\n    if (!notas || notas.length === 0) return 0;\r\n    const numeros = notas.map(n => {\r\n      const valor = typeof n === 'object' ? parseFloat(n.valor) : parseFloat(n);\r\n      return isNaN(valor) ? 0 : valor;\r\n    }).filter(v => v > 0);\r\n    if (numeros.length === 0) return 0;\r\n    return (numeros.reduce((a, b) => a + b, 0) / numeros.length).toFixed(2);\r\n  };\r\n\r\n  const calcularPromedioFinal = (estudiante) => {\r\n    const totalDiarias = parseFloat(calcularTotalSeccion(estudiante.notasDiarias));\r\n    const totalApreciacion = parseFloat(calcularTotalSeccion(estudiante.apreciacion));\r\n    const totalExamen = parseFloat(calcularTotalSeccion(estudiante.examen));\r\n    \r\n    const totales = [totalDiarias, totalApreciacion, totalExamen].filter(t => t > 0);\r\n    if (totales.length === 0) return 0;\r\n    \r\n    return ((totalDiarias + totalApreciacion + totalExamen) / 3).toFixed(2);\r\n  };\r\n\r\n  const toggleExpansion = (estudianteId) => {\r\n    setExpandido(prev => ({\r\n      ...prev,\r\n      [estudianteId]: !prev[estudianteId]\r\n    }));\r\n  };\r\n\r\n  // FUNCIÓN CORREGIDA: Buscar y redirigir estudiante - AHORA EN HOME\r\n  const buscarYRedirigirEstudiante = (estudiante) => {\r\n    // Si estamos en home, vamos a notas\r\n    if (view === 'home') {\r\n      setView('notas');\r\n    }\r\n    \r\n    // Expandir la sección del estudiante\r\n    setExpandido(prev => ({\r\n      ...prev,\r\n      [estudiante.id]: true\r\n    }));\r\n    \r\n    // Scroll a la sección del estudiante\r\n    setTimeout(() => {\r\n      const elemento = document.getElementById(`estudiante-${estudiante.id}`);\r\n      if (elemento) {\r\n        elemento.scrollIntoView({ behavior: 'smooth', block: 'center' });\r\n        // Resaltar temporalmente\r\n        elemento.classList.add('bg-yellow-100');\r\n        setTimeout(() => {\r\n          elemento.classList.remove('bg-yellow-100');\r\n        }, 2000);\r\n      }\r\n    }, 500);\r\n    \r\n    setBusquedaEstudiante('');\r\n  };\r\n\r\n  const estudiantesEnRiesgo = estudiantes.filter(e => parseFloat(calcularPromedioFinal(e)) < 3.0 && parseFloat(calcularPromedioFinal(e)) > 0);\r\n\r\n  const promedioGeneral = () => {\r\n    const promedios = estudiantes.map(e => parseFloat(calcularPromedioFinal(e))).filter(p => p > 0);\r\n    if (promedios.length === 0) return 0;\r\n    return (promedios.reduce((a, b) => a + b, 0) / promedios.length).toFixed(1);\r\n  };\r\n\r\n  // FUNCIONES PARA LA VISTA DE PROGRESO\r\n  const obtenerRankingEstudiantes = () => {\r\n    return estudiantes\r\n      .map(estudiante => ({\r\n        ...estudiante,\r\n        promedio: parseFloat(calcularPromedioFinal(estudiante))\r\n      }))\r\n      .filter(e => e.promedio > 0)\r\n      .sort((a, b) => b.promedio - a.promedio)\r\n      .slice(0, 5); // Top 5\r\n  };\r\n\r\n  // FUNCIÓN MEJORADA: Exportar datos de progreso\r\n  const exportarProgreso = (formato) => {\r\n    const datosProgreso = {\r\n      clase: claseSeleccionada?.nombre,\r\n      profesor: claseSeleccionada?.profesor || nombreProfesorClase,\r\n      institucion: claseSeleccionada?.institucion || institucionClase,\r\n      fecha: new Date().toLocaleDateString('es-PA'),\r\n      promedioGeneral: promedioGeneral(),\r\n      totalEstudiantes: estudiantes.length,\r\n      estudiantesEnRiesgo: estudiantesEnRiesgo.length,\r\n      ranking: obtenerRankingEstudiantes(),\r\n      distribucion: calcularDistribucionNotas()\r\n    };\r\n\r\n    const nombreArchivo = `Tablero_Progreso_${claseSeleccionada?.nombre.replace(/\\s+/g, '_')}`;\r\n\r\n    switch (formato) {\r\n      case 'excel':\r\n        exportarAExcel(JSON.stringify(datosProgreso), nombreArchivo);\r\n        break;\r\n      case 'pdf':\r\n        exportarAPDF(JSON.stringify(datosProgreso), nombreArchivo);\r\n        break;\r\n      case 'word':\r\n        exportarAWord(JSON.stringify(datosProgreso), nombreArchivo);\r\n        break;\r\n      case 'drive':\r\n        subirAGoogleDrive(JSON.stringify(datosProgreso), nombreArchivo);\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  };\r\n\r\n  const calcularDistribucionNotas = () => {\r\n    const distribucion = {\r\n      excelente: 0, // 4.5 - 5.0\r\n      bueno: 0,     // 3.5 - 4.4\r\n      regular: 0,   // 3.0 - 3.4\r\n      riesgo: 0     // 0 - 2.9\r\n    };\r\n\r\n    estudiantes.forEach(estudiante => {\r\n      const promedio = parseFloat(calcularPromedioFinal(estudiante));\r\n      if (promedio >= 4.5) distribucion.excelente++;\r\n      else if (promedio >= 3.5) distribucion.bueno++;\r\n      else if (promedio >= 3.0) distribucion.regular++;\r\n      else if (promedio > 0) distribucion.riesgo++;\r\n    });\r\n\r\n    return distribucion;\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50\">\r\n      <ModalLogin\r\n        mostrarLogin={mostrarLogin}\r\n        setMostrarLogin={setMostrarLogin}\r\n        email={email}\r\n        setEmail={setEmail}\r\n        password={password}\r\n        setPassword={setPassword}\r\n        errorAuth={errorAuth}\r\n        cargandoAuth={cargandoAuth}\r\n        iniciarSesion={iniciarSesion}\r\n        limpiarFormulariosAuth={limpiarFormulariosAuth}\r\n        setMostrarRegistro={setMostrarRegistro}\r\n      />\r\n\r\n      <ModalRegistro\r\n        mostrarRegistro={mostrarRegistro}\r\n        setMostrarRegistro={setMostrarRegistro}\r\n        email={email}\r\n        setEmail={setEmail}\r\n        password={password}\r\n        setPassword={setPassword}\r\n        nombreUsuario={nombreUsuario}\r\n        setNombreUsuario={setNombreUsuario}\r\n        confirmarPassword={confirmarPassword}\r\n        setConfirmarPassword={setConfirmarPassword}\r\n        errorAuth={errorAuth}\r\n        cargandoAuth={cargandoAuth}\r\n        registrarUsuario={registrarUsuario}\r\n        limpiarFormulariosAuth={limpiarFormulariosAuth}\r\n        setMostrarLogin={setMostrarLogin}\r\n      />\r\n\r\n      {/* HEADER MEJORADO */}\r\n      <header className=\"bg-gradient-to-r from-purple-600 to-blue-600 text-white shadow-lg\">\r\n        <div className=\"container mx-auto px-4 py-4 flex justify-between items-center\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <span className=\"text-4xl\">📚</span>\r\n            <div>\r\n              <h1 className=\"text-2xl font-bold\">Bringo Edu</h1>\r\n              <p className=\"text-sm text-purple-100\">Asistente Inteligente para Profesores</p>\r\n            </div>\r\n          </div>\r\n          \r\n          <div className=\"flex items-center gap-4\">\r\n            {usuario ? (\r\n              <>\r\n                <div className=\"text-right mr-4 hidden md:block\">\r\n                  <p className=\"font-semibold text-sm\">👋 Hola, {usuario.nombre}</p>\r\n                  <p className=\"text-xs text-purple-200\">{usuario.email}</p>\r\n                </div>\r\n                <button\r\n                  onClick={cerrarSesion}\r\n                  className=\"flex items-center gap-2 bg-red-500 hover:bg-red-600 px-4 py-2 rounded-lg transition font-semibold\"\r\n                >\r\n                  <LogOut className=\"w-4 h-4\" />\r\n                  <span className=\"hidden sm:inline\">Salir</span>\r\n                </button>\r\n              </>\r\n            ) : (\r\n              <>\r\n                <button\r\n                  onClick={() => setMostrarLogin(true)}\r\n                  className=\"flex items-center gap-2 bg-white text-purple-600 hover:bg-purple-50 px-4 py-2 rounded-lg transition font-semibold\"\r\n                >\r\n                  <LogIn className=\"w-4 h-4\" />\r\n                  <span className=\"hidden sm:inline\">Iniciar Sesión</span>\r\n                </button>\r\n                <button\r\n                  onClick={() => setMostrarRegistro(true)}\r\n                  className=\"flex items-center gap-2 bg-green-500 hover:bg-green-600 px-4 py-2 rounded-lg transition font-semibold\"\r\n                >\r\n                  <User className=\"w-4 h-4\" />\r\n                  <span className=\"hidden sm:inline\">Registrarse</span>\r\n                </button>\r\n              </>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </header>\r\n\r\n      {/* NAVEGACIÓN MEJORADA CON NUEVA PESTAÑA */}\r\n      <nav className=\"bg-white shadow-md sticky top-0 z-40\">\r\n        <div className=\"container mx-auto px-4\">\r\n          <div className=\"flex gap-1 overflow-x-auto py-2\">\r\n            <button\r\n              onClick={() => setView('home')}\r\n              className={`flex items-center gap-2 px-4 md:px-6 py-3 rounded-lg font-semibold transition whitespace-nowrap ${\r\n                view === 'home' ? 'bg-purple-600 text-white' : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\r\n              }`}\r\n            >\r\n              <Home className=\"w-5 h-5\" />\r\n              <span className=\"text-sm md:text-base\">Inicio</span>\r\n            </button>\r\n            \r\n            {usuario && claseSeleccionada && (\r\n              <>\r\n                <button\r\n                  onClick={() => setView('clase')}\r\n                  className={`flex items-center gap-2 px-4 md:px-6 py-3 rounded-lg font-semibold transition whitespace-nowrap ${\r\n                    view === 'clase' ? 'bg-purple-600 text-white' : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\r\n                  }`}\r\n                >\r\n                  <Users className=\"w-5 h-5\" />\r\n                  <span className=\"text-sm md:text-base\">Estudiantes</span>\r\n                </button>\r\n                <button\r\n                  onClick={() => setView('asistencia')}\r\n                  className={`flex items-center gap-2 px-4 md:px-6 py-3 rounded-lg font-semibold transition whitespace-nowrap ${\r\n                    view === 'asistencia' ? 'bg-purple-600 text-white' : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\r\n                  }`}\r\n                >\r\n                  <Calendar className=\"w-5 h-5\" />\r\n                  <span className=\"text-sm md:text-base\">Asistencia</span>\r\n                </button>\r\n                <button\r\n                  onClick={() => setView('notas')}\r\n                  className={`flex items-center gap-2 px-4 md:px-6 py-3 rounded-lg font-semibold transition whitespace-nowrap ${\r\n                    view === 'notas' ? 'bg-purple-600 text-white' : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\r\n                  }`}\r\n                >\r\n                  <ClipboardList className=\"w-5 h-5\" />\r\n                  <span className=\"text-sm md:text-base\">Notas</span>\r\n                </button>\r\n                <button\r\n                  onClick={() => setView('porcentajes')}\r\n                  className={`flex items-center gap-2 px-4 md:px-6 py-3 rounded-lg font-semibold transition whitespace-nowrap ${\r\n                    view === 'porcentajes' ? 'bg-purple-600 text-white' : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\r\n                  }`}\r\n                >\r\n                  <PieChart className=\"w-5 h-5\" />\r\n                  <span className=\"text-sm md:text-base\">Cuadro de %</span>\r\n                </button>\r\n                <button\r\n                  onClick={() => setView('progreso')}\r\n                  className={`flex items-center gap-2 px-4 md:px-6 py-3 rounded-lg font-semibold transition whitespace-nowrap ${\r\n                    view === 'progreso' ? 'bg-purple-600 text-white' : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\r\n                  }`}\r\n                >\r\n                  <TrendingUp className=\"w-5 h-5\" />\r\n                  <span className=\"text-sm md:text-base\">Progreso</span>\r\n                </button>\r\n              </>\r\n            )}\r\n            \r\n            <button\r\n              onClick={() => setView('planificacion')}\r\n              className={`flex items-center gap-2 px-4 md:px-6 py-3 rounded-lg font-semibold transition whitespace-nowrap ${\r\n                view === 'planificacion' ? 'bg-purple-600 text-white' : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\r\n              }`}\r\n            >\r\n              <Sparkles className=\"w-5 h-5\" />\r\n              <span className=\"text-sm md:text-base\">Plan IA</span>\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </nav>\r\n\r\n      <main className=\"container mx-auto px-4 py-8\">\r\n        {view === 'home' && (\r\n          <div className=\"space-y-6\">\r\n            <div className=\"bg-white rounded-2xl shadow-lg p-6 md:p-8\">\r\n              <h2 className=\"text-2xl md:text-3xl font-bold text-gray-800 mb-6 flex items-center gap-3\">\r\n                <span className=\"text-4xl\">🏫</span>\r\n                Mis Clases\r\n              </h2>\r\n              \r\n              {/* ✅ BARRA DE BÚSQUEDA DE ESTUDIANTES EN HOME - MEJORADA */}\r\n              {usuario && claseSeleccionada && estudiantes.length > 0 && (\r\n                <BarraBusquedaEstudiantes\r\n                  estudiantes={estudiantes}\r\n                  onBuscarEstudiante={buscarYRedirigirEstudiante}\r\n                  busquedaEstudiante={busquedaEstudiante}\r\n                  setBusquedaEstudiante={setBusquedaEstudiante}\r\n                />\r\n              )}\r\n              \r\n              {!usuario && (\r\n                <div className=\"bg-yellow-50 border-2 border-yellow-200 rounded-xl p-6 mb-6\">\r\n                  <div className=\"flex items-start gap-4\">\r\n                    <AlertCircle className=\"w-6 h-6 text-yellow-600 flex-shrink-0 mt-1\" />\r\n                    <div>\r\n                      <h3 className=\"font-bold text-yellow-900 mb-2\">Inicia sesión para acceder</h3>\r\n                      <p className=\"text-yellow-800 mb-4\">\r\n                        Crea una cuenta o inicia sesión para gestionar tus clases, estudiantes y generar planes de estudio con IA.\r\n                      </p>\r\n                      <div className=\"flex gap-3 flex-wrap\">\r\n                        <button\r\n                          onClick={() => setMostrarLogin(true)}\r\n                          className=\"bg-purple-600 text-white px-6 py-2 rounded-lg hover:bg-purple-700 transition font-semibold\"\r\n                        >\r\n                          Iniciar Sesión\r\n                        </button>\r\n                        <button\r\n                          onClick={() => setMostrarRegistro(true)}\r\n                          className=\"bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700 transition font-semibold\"\r\n                        >\r\n                          Registrarse\r\n                        </button>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              )}\r\n              \r\n              {usuario && (\r\n                <div className=\"bg-gradient-to-r from-purple-100 to-blue-100 rounded-xl p-6 mb-6\">\r\n                  <h3 className=\"text-xl font-bold text-gray-800 mb-4\">Crear Nueva Clase</h3>\r\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n                    <input\r\n                      type=\"text\"\r\n                      placeholder=\"Materia (ej: Matemáticas)\"\r\n                      value={nombreClase}\r\n                      onChange={(e) => setNombreClase(e.target.value)}\r\n                      className=\"px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-purple-500\"\r\n                    />\r\n                    <input\r\n                      type=\"text\"\r\n                      placeholder=\"Grado (ej: 5to)\"\r\n                      value={grado}\r\n                      onChange={(e) => setGrado(e.target.value)}\r\n                      className=\"px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-purple-500\"\r\n                    />\r\n                    <input\r\n                      type=\"text\"\r\n                      placeholder=\"Sección (ej: A)\"\r\n                      value={seccion}\r\n                      onChange={(e) => setSeccion(e.target.value)}\r\n                      className=\"px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-purple-500\"\r\n                    />\r\n                    <input\r\n                      type=\"text\"\r\n                      placeholder=\"Nombre del Profesor\"\r\n                      value={nombreProfesorClase}\r\n                      onChange={(e) => setNombreProfesorClase(e.target.value)}\r\n                      className=\"px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-purple-500\"\r\n                    />\r\n                    <input\r\n                      type=\"text\"\r\n                      placeholder=\"Institución Educativa\"\r\n                      value={institucionClase}\r\n                      onChange={(e) => setInstitucionClase(e.target.value)}\r\n                      className=\"px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-purple-500\"\r\n                    />\r\n                    <button\r\n                      onClick={agregarClase}\r\n                      className=\"bg-gradient-to-r from-purple-600 to-blue-600 text-white px-6 py-3 rounded-lg hover:from-purple-700 hover:to-blue-700 transition font-bold flex items-center justify-center gap-2\"\r\n                    >\r\n                      <Plus className=\"w-5 h-5\" />\r\n                      Crear Clase\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              )}\r\n              \r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n                {clases.length === 0 && usuario && (\r\n                  <div className=\"col-span-full text-center py-12 text-gray-500\">\r\n                    <p className=\"text-lg\">No tienes clases creadas aún</p>\r\n                    <p className=\"text-sm mt-2\">Crea tu primera clase usando el formulario arriba</p>\r\n                  </div>\r\n                )}\r\n                \r\n                {clases.map(clase => (\r\n                  <div\r\n                    key={clase.id}\r\n                    className=\"bg-gradient-to-br from-purple-500 to-blue-600 rounded-xl shadow-lg p-6 text-white hover:shadow-2xl transition-all transform hover:scale-105 cursor-pointer\"\r\n                    onClick={() => seleccionarClase(clase)}\r\n                  >\r\n                    <div className=\"flex justify-between items-start mb-4\">\r\n                      <div>\r\n                        <h3 className=\"text-2xl font-bold mb-2\">{clase.nombre}</h3>\r\n                        <p className=\"text-purple-100\">{clase.estudiantes?.length || 0} estudiantes</p>\r\n                        <p className=\"text-purple-100 text-sm mt-1\">Prof: {clase.profesor}</p>\r\n                        <p className=\"text-purple-100 text-sm\">Inst: {clase.institucion}</p>\r\n                      </div>\r\n                      <button\r\n                        onClick={(e) => {\r\n                          e.stopPropagation();\r\n                          eliminarClase(clase.id);\r\n                        }}\r\n                        className=\"bg-red-500 hover:bg-red-600 p-2 rounded-lg transition\"\r\n                      >\r\n                        <Trash2 className=\"w-5 h-5\" />\r\n                      </button>\r\n                    </div>\r\n                    <div className=\"mt-4 pt-4 border-t border-purple-400\">\r\n                      <p className=\"text-sm text-purple-100\">Click para gestionar</p>\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {view === 'clase' && claseSeleccionada && (\r\n          <div className=\"bg-white rounded-2xl shadow-lg p-6 md:p-8\">\r\n            <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-6\">\r\n              <h2 className=\"text-2xl md:text-3xl font-bold text-gray-800 flex items-center gap-3\">\r\n                <Users className=\"w-8 h-8 text-purple-600\" />\r\n                {claseSeleccionada.nombre}\r\n              </h2>\r\n              <button\r\n                onClick={() => {\r\n                  setClaseSeleccionada(null);\r\n                  setView('home');\r\n                }}\r\n                className=\"bg-gray-200 hover:bg-gray-300 px-4 py-2 rounded-lg transition font-semibold\"\r\n              >\r\n                Volver\r\n              </button>\r\n            </div>\r\n            \r\n            <div className=\"bg-gradient-to-r from-green-100 to-teal-100 rounded-xl p-6 mb-6\">\r\n              <h3 className=\"text-xl font-bold text-gray-800 mb-4\">Agregar Estudiante</h3>\r\n              <div className=\"flex flex-col md:flex-row gap-4\">\r\n                <input\r\n                  type=\"text\"\r\n                  placeholder=\"Nombre completo del estudiante\"\r\n                  value={nombreEstudiante}\r\n                  onChange={(e) => setNombreEstudiante(e.target.value)}\r\n                  onKeyPress={(e) => e.key === 'Enter' && agregarEstudiante()}\r\n                  className=\"flex-1 px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-green-500\"\r\n                />\r\n                <button\r\n                  onClick={agregarEstudiante}\r\n                  className=\"bg-gradient-to-r from-green-600 to-teal-600 text-white px-6 py-3 rounded-lg hover:from-green-700 hover:to-teal-700 transition font-bold flex items-center justify-center gap-2\"\r\n                >\r\n                  <Plus className=\"w-5 h-5\" />\r\n                  Agregar\r\n                </button>\r\n              </div>\r\n            </div>\r\n            \r\n            <div className=\"space-y-4\">\r\n              {estudiantes.length === 0 && (\r\n                <div className=\"text-center py-12 text-gray-500\">\r\n                  <p className=\"text-lg\">No hay estudiantes en esta clase</p>\r\n                  <p className=\"text-sm mt-2\">Agrega tu primer estudiante usando el formulario arriba</p>\r\n                </div>\r\n              )}\r\n              \r\n              {estudiantes.map(estudiante => (\r\n                <div key={estudiante.id} className=\"bg-gray-50 rounded-xl p-6 hover:bg-gray-100 transition\">\r\n                  <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4\">\r\n                    <div className=\"flex items-center gap-4\">\r\n                      <div className=\"bg-purple-600 text-white w-12 h-12 rounded-full flex items-center justify-center font-bold text-lg\">\r\n                        {estudiante.nombre.charAt(0).toUpperCase()}\r\n                      </div>\r\n                      <div>\r\n                        <h4 className=\"text-xl font-bold text-gray-800\">{estudiante.nombre}</h4>\r\n                        <p className=\"text-sm text-gray-600\">\r\n                          Promedio: {calcularPromedioFinal(estudiante)}/5\r\n                        </p>\r\n                      </div>\r\n                    </div>\r\n                    <button\r\n                      onClick={() => {\r\n                        if (window.confirm(`¿Eliminar a ${estudiante.nombre}?`)) {\r\n                          eliminarEstudiante(estudiante.id);\r\n                        }\r\n                      }}\r\n                      className=\"bg-red-500 hover:bg-red-600 text-white p-2 rounded-lg transition mt-4 md:mt-0\"\r\n                    >\r\n                      <Trash2 className=\"w-5 h-5\" />\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {view === 'asistencia' && claseSeleccionada && (\r\n          <div className=\"bg-white rounded-2xl shadow-lg p-6 md:p-8\">\r\n            <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-6\">\r\n              <h2 className=\"text-2xl md:text-3xl font-bold text-gray-800 flex items-center gap-3\">\r\n                <Calendar className=\"w-8 h-8 text-purple-600\" />\r\n                Asistencia - {claseSeleccionada.nombre}\r\n              </h2>\r\n              <div className=\"flex gap-4\">\r\n                <input\r\n                  type=\"date\"\r\n                  value={fechaActual}\r\n                  onChange={(e) => setFechaActual(e.target.value)}\r\n                  className=\"px-4 py-2 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-purple-500\"\r\n                />\r\n                <OpcionesExportacion\r\n                  datos={JSON.stringify({\r\n                    clase: claseSeleccionada.nombre,\r\n                    profesor: claseSeleccionada.profesor,\r\n                    institucion: claseSeleccionada.institucion,\r\n                    fecha: fechaActual,\r\n                    estudiantes: estudiantes.map(e => ({\r\n                      nombre: e.nombre,\r\n                      asistencia: e.asistencia?.[fechaActual] || 'No registrada',\r\n                      historial: contarAsistencias(e)\r\n                    }))\r\n                  })}\r\n                  nombreArchivo={`Asistencia_${claseSeleccionada.nombre.replace(/\\s+/g, '_')}_${fechaActual}`}\r\n                />\r\n              </div>\r\n            </div>\r\n            \r\n            <div className=\"space-y-4\">\r\n              {estudiantes.length === 0 && (\r\n                <div className=\"text-center py-12 text-gray-500\">\r\n                  <p className=\"text-lg\">No hay estudiantes en esta clase</p>\r\n                </div>\r\n              )}\r\n              \r\n              {estudiantes.map(estudiante => {\r\n                const asist = contarAsistencias(estudiante);\r\n                const estadoHoy = estudiante.asistencia?.[fechaActual];\r\n                \r\n                return (\r\n                  <div key={estudiante.id} className=\"bg-gray-50 rounded-xl p-6\">\r\n                    <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4\">\r\n                      <div className=\"flex-1\">\r\n                        <h4 className=\"text-xl font-bold text-gray-800 mb-2\">{estudiante.nombre}</h4>\r\n                        <div className=\"flex gap-4 text-sm\">\r\n                          <span className=\"text-green-600 font-semibold\">✓ {asist.presente}P</span>\r\n                          <span className=\"text-yellow-600 font-semibold\">⏰ {asist.tardanza}T</span>\r\n                          <span className=\"text-red-600 font-semibold\">✗ {asist.ausente}A</span>\r\n                        </div>\r\n                      </div>\r\n                      \r\n                      <div className=\"flex gap-2 flex-wrap mt-4 md:mt-0\">\r\n                        <button\r\n                          onClick={() => marcarAsistencia(estudiante.id, fechaActual, 'presente')}\r\n                          className={`px-4 md:px-6 py-3 rounded-lg font-semibold transition text-sm md:text-base ${\r\n                            estadoHoy === 'presente'\r\n                              ? 'bg-green-600 text-white'\r\n                              : 'bg-green-100 text-green-700 hover:bg-green-200'\r\n                          }`}\r\n                        >\r\n                          Presente\r\n                        </button>\r\n                        <button\r\n                          onClick={() => marcarAsistencia(estudiante.id, fechaActual, 'tardanza')}\r\n                          className={`px-4 md:px-6 py-3 rounded-lg font-semibold transition text-sm md:text-base ${\r\n                            estadoHoy === 'tardanza'\r\n                              ? 'bg-yellow-600 text-white'\r\n                              : 'bg-yellow-100 text-yellow-700 hover:bg-yellow-200'\r\n                          }`}\r\n                        >\r\n                          Tardanza\r\n                        </button>\r\n                        <button\r\n                          onClick={() => marcarAsistencia(estudiante.id, fechaActual, 'ausente')}\r\n                          className={`px-4 md:px-6 py-3 rounded-lg font-semibold transition text-sm md:text-base ${\r\n                            estadoHoy === 'ausente'\r\n                              ? 'bg-red-600 text-white'\r\n                              : 'bg-red-100 text-red-700 hover:bg-red-200'\r\n                          }`}\r\n                        >\r\n                          Ausente\r\n                        </button>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                );\r\n              })}\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {view === 'notas' && claseSeleccionada && (\r\n          <div className=\"bg-white rounded-2xl shadow-lg p-6 md:p-8\">\r\n            <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-6\">\r\n              <h2 className=\"text-2xl md:text-3xl font-bold text-gray-800 flex items-center gap-3\">\r\n                <ClipboardList className=\"w-8 h-8 text-purple-600\" />\r\n                Notas - {claseSeleccionada.nombre}\r\n              </h2>\r\n              <div className=\"flex gap-4 flex-wrap\">\r\n                <div className=\"bg-purple-100 px-4 md:px-6 py-3 rounded-lg\">\r\n                  <span className=\"text-xs md:text-sm text-purple-600 font-semibold\">Promedio:</span>\r\n                  <span className=\"ml-2 text-xl md:text-2xl font-bold text-purple-800\">{promedioGeneral()}/5</span>\r\n                </div>\r\n                <OpcionesExportacion\r\n                  datos={JSON.stringify({\r\n                    clase: claseSeleccionada.nombre,\r\n                    profesor: claseSeleccionada.profesor,\r\n                    institucion: claseSeleccionada.institucion,\r\n                    fecha: new Date().toLocaleDateString('es-PA'),\r\n                    promedioGeneral: promedioGeneral(),\r\n                    estudiantes: estudiantes.map(e => ({\r\n                      nombre: e.nombre,\r\n                      notasDiarias: e.notasDiarias,\r\n                      apreciacion: e.apreciacion,\r\n                      examen: e.examen,\r\n                      promedioFinal: calcularPromedioFinal(e)\r\n                    }))\r\n                  })}\r\n                  nombreArchivo={`Notas_${claseSeleccionada.nombre.replace(/\\s+/g, '_')}`}\r\n                />\r\n              </div>\r\n            </div>\r\n            \r\n            {estudiantesEnRiesgo.length > 0 && (\r\n              <div className=\"bg-red-50 border-2 border-red-200 rounded-xl p-6 mb-6\">\r\n                <div className=\"flex items-start gap-4\">\r\n                  <AlertCircle className=\"w-6 h-6 text-red-600 flex-shrink-0 mt-1\" />\r\n                  <div>\r\n                    <h3 className=\"font-bold text-red-900 mb-2\">⚠️ Estudiantes en Riesgo ({estudiantesEnRiesgo.length})</h3>\r\n                    <div className=\"flex flex-wrap gap-2\">\r\n                      {estudiantesEnRiesgo.map(e => (\r\n                        <span key={e.id} className=\"bg-red-200 text-red-800 px-3 py-1 rounded-lg text-sm font-semibold\">\r\n                          {e.nombre}: {calcularPromedioFinal(e)}/5\r\n                        </span>\r\n                      ))}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n            \r\n            {/* CUADRÍCULA DE NOTAS RÁPIDAS - CORREGIDA */}\r\n            {estudiantes.length > 0 && (\r\n              <div className=\"bg-white rounded-xl shadow-lg p-6 mb-6 border-2 border-purple-200\">\r\n                <h3 className=\"text-xl font-bold text-gray-800 mb-4 flex items-center gap-2\">\r\n                  📊 Registro Rápido de Notas - {new Date().toLocaleDateString('es-PA')}\r\n                </h3>\r\n                \r\n                <div className=\"overflow-x-auto\">\r\n                  <table className=\"w-full min-w-full\">\r\n                    <thead className=\"bg-purple-600 text-white\">\r\n                      <tr>\r\n                        <th className=\"px-4 py-3 text-left font-semibold\">Estudiante</th>\r\n                        <th className=\"px-4 py-3 text-center font-semibold\">Notas Diarias</th>\r\n                        <th className=\"px-4 py-3 text-center font-semibold\">Apreciación</th>\r\n                        <th className=\"px-4 py-3 text-center font-semibold\">Examen</th>\r\n                        <th className=\"px-4 py-3 text-center font-semibold\">Promedio</th>\r\n                        <th className=\"px-4 py-3 text-center font-semibold\">Compartir</th>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                      {estudiantes.map((estudiante) => (\r\n                        <FilaNotasRapidas\r\n                          key={estudiante.id}\r\n                          estudiante={estudiante}\r\n                          onAgregarNota={agregarNota}\r\n                          calcularPromedioFinal={calcularPromedioFinal}\r\n                          claseSeleccionada={claseSeleccionada}\r\n                          usuario={usuario}\r\n                          actualizarNota={actualizarNota}\r\n                        />\r\n                      ))}\r\n                    </tbody>\r\n                  </table>\r\n                </div>\r\n                <p className=\"text-sm text-gray-600 mt-3 text-center\">\r\n                  💡 Ingresa las notas (0-5) y presiona \"+\" para agregar. Las notas se guardan automáticamente.\r\n                </p>\r\n              </div>\r\n            )}\r\n            \r\n            {estudiantes.length === 0 && (\r\n              <div className=\"text-center py-12 text-gray-500\">\r\n                <p className=\"text-lg\">No hay estudiantes en esta clase</p>\r\n              </div>\r\n            )}\r\n            \r\n            <div className=\"space-y-6\">\r\n              {estudiantes.map(estudiante => (\r\n                <div key={estudiante.id} id={`estudiante-${estudiante.id}`} className=\"border-2 border-gray-200 rounded-xl overflow-hidden transition-all duration-300\">\r\n                  <div\r\n                    onClick={() => toggleExpansion(estudiante.id)}\r\n                    className=\"bg-gradient-to-r from-purple-100 to-blue-100 p-6 cursor-pointer hover:from-purple-200 hover:to-blue-200 transition\"\r\n                  >\r\n                    <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4\">\r\n                      <div className=\"flex items-center gap-4 flex-1\">\r\n                        <div className=\"bg-purple-600 text-white w-12 h-12 rounded-full flex items-center justify-center font-bold text-lg flex-shrink-0\">\r\n                          {estudiante.nombre.charAt(0).toUpperCase()}\r\n                        </div>\r\n                        <div className=\"flex-1\">\r\n                          <h4 className=\"text-xl font-bold text-gray-800\">{estudiante.nombre}</h4>\r\n                          <div className=\"flex flex-wrap gap-2 md:gap-4 mt-1 text-xs md:text-sm\">\r\n                            <span>Diarias: {calcularTotalSeccion(estudiante.notasDiarias)}</span>\r\n                            <span>Apreciación: {calcularTotalSeccion(estudiante.apreciacion)}</span>\r\n                            <span>Examen: {calcularTotalSeccion(estudiante.examen)}</span>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                      <div className=\"flex items-center gap-4 mt-4 md:mt-0\">\r\n                        <div className=\"text-right\">\r\n                          <p className=\"text-xs md:text-sm text-gray-600\">Promedio</p>\r\n                          <p className={`text-2xl md:text-3xl font-bold ${\r\n                            parseFloat(calcularPromedioFinal(estudiante)) >= 3.5 ? 'text-green-600' :\r\n                            parseFloat(calcularPromedioFinal(estudiante)) >= 3.0 ? 'text-yellow-600' :\r\n                            'text-red-600'\r\n                          }`}>\r\n                            {calcularPromedioFinal(estudiante)}/5\r\n                          </p>\r\n                        </div>\r\n                        {expandido[estudiante.id] ? (\r\n                          <ChevronUp className=\"w-6 h-6 text-gray-600\" />\r\n                        ) : (\r\n                          <ChevronDown className=\"w-6 h-6 text-gray-600\" />\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  \r\n                  {expandido[estudiante.id] && (\r\n                    <div className=\"p-6 space-y-6\">\r\n                      <div>\r\n                        <div className=\"flex justify-between items-center mb-4\">\r\n                          <h5 className=\"font-bold text-lg text-gray-800\">📝 Notas Diarias</h5>\r\n                          <button\r\n                            onClick={() => agregarNota(estudiante.id, 'notasDiarias')}\r\n                            className=\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition text-sm font-semibold flex items-center gap-2\"\r\n                          >\r\n                            <Plus className=\"w-4 h-4\" />\r\n                            Agregar\r\n                          </button>\r\n                        </div>\r\n                        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                          {estudiante.notasDiarias.map((nota, idx) => (\r\n                            <div key={idx} className=\"bg-gray-50 p-4 rounded-lg flex gap-3\">\r\n                              <input\r\n                                type=\"number\"\r\n                                step=\"0.1\"\r\n                                min=\"0\"\r\n                                max=\"5\"\r\n                                placeholder=\"Nota\"\r\n                                value={nota.valor || ''}\r\n                                onChange={(e) => actualizarNota(estudiante.id, 'notasDiarias', idx, 'valor', e.target.value)}\r\n                                className=\"flex-1 px-3 py-2 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-blue-500\"\r\n                              />\r\n                              <input\r\n                                type=\"date\"\r\n                                value={nota.fecha || ''}\r\n                                onChange={(e) => actualizarNota(estudiante.id, 'notasDiarias', idx, 'fecha', e.target.value)}\r\n                                className=\"px-3 py-2 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-blue-500\"\r\n                              />\r\n                              <button\r\n                                onClick={() => eliminarNota(estudiante.id, 'notasDiarias', idx)}\r\n                                className=\"bg-red-500 text-white p-2 rounded-lg hover:bg-red-600 transition\"\r\n                              >\r\n                                <Trash2 className=\"w-4 h-4\" />\r\n                              </button>\r\n                            </div>\r\n                          ))}\r\n                        </div>\r\n                        <div className=\"mt-2 text-right\">\r\n                          <span className=\"text-sm text-gray-600\">Promedio: </span>\r\n                          <span className=\"font-bold text-lg text-blue-600\">{calcularTotalSeccion(estudiante.notasDiarias)}/5</span>\r\n                        </div>\r\n                      </div>\r\n                      \r\n                      <div>\r\n                        <div className=\"flex justify-between items-center mb-4\">\r\n                          <h5 className=\"font-bold text-lg text-gray-800\">⭐ Apreciación</h5>\r\n                          <button\r\n                            onClick={() => agregarNota(estudiante.id, 'apreciacion')}\r\n                            className=\"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition text-sm font-semibold flex items-center gap-2\"\r\n                          >\r\n                            <Plus className=\"w-4 h-4\" />\r\n                            Agregar\r\n                          </button>\r\n                        </div>\r\n                        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                          {estudiante.apreciacion.map((nota, idx) => (\r\n                            <div key={idx} className=\"bg-gray-50 p-4 rounded-lg flex gap-3\">\r\n                              <input\r\n                                type=\"number\"\r\n                                step=\"0.1\"\r\n                                min=\"0\"\r\n                                max=\"5\"\r\n                                placeholder=\"Nota\"\r\n                                value={nota.valor || ''}\r\n                                onChange={(e) => actualizarNota(estudiante.id, 'apreciacion', idx, 'valor', e.target.value)}\r\n                                className=\"flex-1 px-3 py-2 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-green-500\"\r\n                              />\r\n                              <input\r\n                                type=\"date\"\r\n                                value={nota.fecha || ''}\r\n                                onChange={(e) => actualizarNota(estudiante.id, 'apreciacion', idx, 'fecha', e.target.value)}\r\n                                className=\"px-3 py-2 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-green-500\"\r\n                              />\r\n                              <button\r\n                                onClick={() => eliminarNota(estudiante.id, 'apreciacion', idx)}\r\n                                className=\"bg-red-500 text-white p-2 rounded-lg hover:bg-red-600 transition\"\r\n                              >\r\n                                <Trash2 className=\"w-4 h-4\" />\r\n                              </button>\r\n                            </div>\r\n                          ))}\r\n                        </div>\r\n                        <div className=\"mt-2 text-right\">\r\n                          <span className=\"text-sm text-gray-600\">Promedio: </span>\r\n                          <span className=\"font-bold text-lg text-green-600\">{calcularTotalSeccion(estudiante.apreciacion)}/5</span>\r\n                        </div>\r\n                      </div>\r\n                      \r\n                      <div>\r\n                        <div className=\"flex justify-between items-center mb-4\">\r\n                          <h5 className=\"font-bold text-lg text-gray-800\">📋 Examen</h5>\r\n                          <button\r\n                            onClick={() => agregarNota(estudiante.id, 'examen')}\r\n                            className=\"bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition text-sm font-semibold flex items-center gap-2\"\r\n                          >\r\n                            <Plus className=\"w-4 h-4\" />\r\n                            Agregar\r\n                          </button>\r\n                        </div>\r\n                        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                          {estudiante.examen.map((nota, idx) => (\r\n                            <div key={idx} className=\"bg-gray-50 p-4 rounded-lg flex gap-3\">\r\n                              <input\r\n                                type=\"number\"\r\n                                step=\"0.1\"\r\n                                min=\"0\"\r\n                                max=\"5\"\r\n                                placeholder=\"Nota\"\r\n                                value={nota.valor || ''}\r\n                                onChange={(e) => actualizarNota(estudiante.id, 'examen', idx, 'valor', e.target.value)}\r\n                                className=\"flex-1 px-3 py-2 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-purple-500\"\r\n                              />\r\n                              <input\r\n                                type=\"date\"\r\n                                value={nota.fecha || ''}\r\n                                onChange={(e) => actualizarNota(estudiante.id, 'examen', idx, 'fecha', e.target.value)}\r\n                                className=\"px-3 py-2 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-purple-500\"\r\n                              />\r\n                              <button\r\n                                onClick={() => eliminarNota(estudiante.id, 'examen', idx)}\r\n                                className=\"bg-red-500 text-white p-2 rounded-lg hover:bg-red-600 transition\"\r\n                              >\r\n                                <Trash2 className=\"w-4 h-4\" />\r\n                              </button>\r\n                            </div>\r\n                          ))}\r\n                        </div>\r\n                        <div className=\"mt-2 text-right\">\r\n                          <span className=\"text-sm text-gray-600\">Promedio: </span>\r\n                          <span className=\"font-bold text-lg text-purple-600\">{calcularTotalSeccion(estudiante.examen)}/5</span>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* NUEVA VISTA: CUADRO DE PORCENTAJES */}\r\n        {view === 'porcentajes' && claseSeleccionada && (\r\n          <CuadroPorcentajes />\r\n        )}\r\n\r\n        {/* VISTA DE PROGRESO MEJORADA */}\r\n        {view === 'progreso' && claseSeleccionada && (\r\n          <div className=\"bg-white rounded-2xl shadow-lg p-6 md:p-8\">\r\n            <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-8\">\r\n              <h2 className=\"text-2xl md:text-3xl font-bold text-gray-800 flex items-center gap-3\">\r\n                <TrendingUp className=\"w-8 h-8 text-purple-600\" />\r\n                Tablero de Progreso - {claseSeleccionada.nombre}\r\n              </h2>\r\n              <OpcionesExportacion\r\n                datos={JSON.stringify({\r\n                  clase: claseSeleccionada.nombre,\r\n                  profesor: claseSeleccionada.profesor,\r\n                  institucion: claseSeleccionada.institucion,\r\n                  fecha: new Date().toLocaleDateString('es-PA'),\r\n                  promedioGeneral: promedioGeneral(),\r\n                  totalEstudiantes: estudiantes.length,\r\n                  estudiantesEnRiesgo: estudiantesEnRiesgo.length,\r\n                  ranking: obtenerRankingEstudiantes(),\r\n                  distribucion: calcularDistribucionNotas()\r\n                })}\r\n                nombreArchivo={`Tablero_Progreso_${claseSeleccionada.nombre.replace(/\\s+/g, '_')}`}\r\n                onExportar={exportarProgreso}\r\n              />\r\n            </div>\r\n\r\n            {/* ESTADÍSTICAS GENERALES */}\r\n            <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8\">\r\n              <div className=\"bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-xl p-6 text-center\">\r\n                <BarChart3 className=\"w-8 h-8 mx-auto mb-2\" />\r\n                <p className=\"text-sm opacity-90\">Promedio General</p>\r\n                <p className=\"text-3xl font-bold\">{promedioGeneral()}/5</p>\r\n              </div>\r\n              \r\n              <div className=\"bg-gradient-to-r from-green-500 to-green-600 text-white rounded-xl p-6 text-center\">\r\n                <Target className=\"w-8 h-8 mx-auto mb-2\" />\r\n                <p className=\"text-sm opacity-90\">Total Estudiantes</p>\r\n                <p className=\"text-3xl font-bold\">{estudiantes.length}</p>\r\n              </div>\r\n              \r\n              <div className=\"bg-gradient-to-r from-yellow-500 to-yellow-600 text-white rounded-xl p-6 text-center\">\r\n                <AlertTriangle className=\"w-8 h-8 mx-auto mb-2\" />\r\n                <p className=\"text-sm opacity-90\">En Riesgo</p>\r\n                <p className=\"text-3xl font-bold\">{estudiantesEnRiesgo.length}</p>\r\n              </div>\r\n              \r\n              <div className=\"bg-gradient-to-r from-purple-500 to-purple-600 text-white rounded-xl p-6 text-center\">\r\n                <Award className=\"w-8 h-8 mx-auto mb-2\" />\r\n                <p className=\"text-sm opacity-90\">Mejor Promedio</p>\r\n                <p className=\"text-3xl font-bold\">\r\n                  {estudiantes.length > 0 ? Math.max(...estudiantes.map(e => parseFloat(calcularPromedioFinal(e)))).toFixed(1) : 0}/5\r\n                </p>\r\n              </div>\r\n            </div>\r\n\r\n            {/* GRÁFICO DE DISTRIBUCIÓN Y RANKING */}\r\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8\">\r\n              <div className=\"bg-gray-50 rounded-xl p-6\">\r\n                <h3 className=\"text-xl font-bold text-gray-800 mb-4 flex items-center gap-2\">\r\n                  <BarChart3 className=\"w-6 h-6 text-purple-600\" />\r\n                  Distribución de Rendimiento\r\n                </h3>\r\n                <DistribucionNotas \r\n                  estudiantes={estudiantes} \r\n                  calcularPromedioFinal={calcularPromedioFinal} \r\n                />\r\n              </div>\r\n              \r\n              <div className=\"bg-gray-50 rounded-xl p-6\">\r\n                <h3 className=\"text-xl font-bold text-gray-800 mb-4 flex items-center gap-2\">\r\n                  <Award className=\"w-6 h-6 text-purple-600\" />\r\n                  Ranking de Estudiantes\r\n                </h3>\r\n                <div className=\"space-y-3\">\r\n                  {obtenerRankingEstudiantes().map((estudiante, index) => (\r\n                    <div key={estudiante.id} className=\"flex items-center justify-between bg-white p-4 rounded-lg border-2 border-gray-200\">\r\n                      <div className=\"flex items-center gap-3\">\r\n                        <div className={`w-8 h-8 rounded-full flex items-center justify-center font-bold text-white ${\r\n                          index === 0 ? 'bg-yellow-500' :\r\n                          index === 1 ? 'bg-gray-400' :\r\n                          index === 2 ? 'bg-orange-500' : 'bg-purple-500'\r\n                        }`}>\r\n                          {index + 1}\r\n                        </div>\r\n                        <div>\r\n                          <p className=\"font-semibold text-gray-800\">{estudiante.nombre}</p>\r\n                          <p className=\"text-sm text-gray-600\">\r\n                            {estudiante.notasDiarias.length + estudiante.apreciacion.length + estudiante.examen.length} notas\r\n                          </p>\r\n                        </div>\r\n                      </div>\r\n                      <div className=\"text-right\">\r\n                        <p className={`text-xl font-bold ${\r\n                          estudiante.promedio >= 4.5 ? 'text-green-600' :\r\n                          estudiante.promedio >= 3.5 ? 'text-blue-600' :\r\n                          estudiante.promedio >= 3.0 ? 'text-yellow-600' : 'text-red-600'\r\n                        }`}>\r\n                          {estudiante.promedio.toFixed(1)}/5\r\n                        </p>\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n                  {obtenerRankingEstudiantes().length === 0 && (\r\n                    <div className=\"text-center py-8 text-gray-500\">\r\n                      <p>No hay datos suficientes para ranking</p>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* ALERTAS DE BAJO RENDIMIENTO */}\r\n            {estudiantesEnRiesgo.length > 0 && (\r\n              <div className=\"bg-red-50 border-2 border-red-200 rounded-xl p-6 mb-8\">\r\n                <h3 className=\"text-xl font-bold text-red-900 mb-4 flex items-center gap-2\">\r\n                  <AlertTriangle className=\"w-6 h-6 text-red-600\" />\r\n                  Alertas de Bajo Rendimiento ({estudiantesEnRiesgo.length})\r\n                </h3>\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n                  {estudiantesEnRiesgo.map(estudiante => {\r\n                    const asistencia = contarAsistencias(estudiante);\r\n                    return (\r\n                      <div key={estudiante.id} className=\"bg-white rounded-lg p-4 border-2 border-red-300\">\r\n                        <div className=\"flex items-center gap-3 mb-3\">\r\n                          <div className=\"bg-red-600 text-white w-10 h-10 rounded-full flex items-center justify-center font-bold\">\r\n                            {estudiante.nombre.charAt(0).toUpperCase()}\r\n                          </div>\r\n                          <div>\r\n                            <p className=\"font-bold text-red-800\">{estudiante.nombre}</p>\r\n                            <p className=\"text-sm text-red-600\">Promedio: {calcularPromedioFinal(estudiante)}/5</p>\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"text-sm text-gray-600\">\r\n                          <p>Asistencia: {asistencia.presente}P {asistencia.tardanza}T {asistencia.ausente}A</p>\r\n                          <p>Total notas: {estudiante.notasDiarias.length + estudiante.apreciacion.length + estudiante.examen.length}</p>\r\n                        </div>\r\n                      </div>\r\n                    );\r\n                  })}\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {/* MÉTRICAS CONSOLIDADAS POR ESTUDIANTE */}\r\n            <div className=\"bg-gray-50 rounded-xl p-6\">\r\n              <h3 className=\"text-xl font-bold text-gray-800 mb-4 flex items-center gap-2\">\r\n                <Users className=\"w-6 h-6 text-purple-600\" />\r\n                Métricas por Estudiante\r\n              </h3>\r\n              <div className=\"overflow-x-auto\">\r\n                <table className=\"w-full bg-white rounded-lg overflow-hidden\">\r\n                  <thead className=\"bg-purple-600 text-white\">\r\n                    <tr>\r\n                      <th className=\"px-4 py-3 text-left\">Estudiante</th>\r\n                      <th className=\"px-4 py-3 text-center\">Promedio</th>\r\n                      <th className=\"px-4 py-3 text-center\">Notas Diarias</th>\r\n                      <th className=\"px-4 py-3 text-center\">Apreciación</th>\r\n                      <th className=\"px-4 py-3 text-center\">Examen</th>\r\n                      <th className=\"px-4 py-3 text-center\">Asistencia</th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    {estudiantes.map(estudiante => {\r\n                      const asistencia = contarAsistencias(estudiante);\r\n                      const totalAsistencias = asistencia.presente + asistencia.tardanza + asistencia.ausente;\r\n                      const porcentajeAsistencia = totalAsistencias > 0 ? Math.round((asistencia.presente / totalAsistencias) * 100) : 0;\r\n                      \r\n                      return (\r\n                        <tr key={estudiante.id} className=\"border-b border-gray-200 hover:bg-gray-50\">\r\n                          <td className=\"px-4 py-3 font-semibold\">{estudiante.nombre}</td>\r\n                          <td className=\"px-4 py-3 text-center\">\r\n                            <span className={`font-bold ${\r\n                              parseFloat(calcularPromedioFinal(estudiante)) >= 4.5 ? 'text-green-600' :\r\n                              parseFloat(calcularPromedioFinal(estudiante)) >= 3.5 ? 'text-blue-600' :\r\n                              parseFloat(calcularPromedioFinal(estudiante)) >= 3.0 ? 'text-yellow-600' : 'text-red-600'\r\n                            }`}>\r\n                              {calcularPromedioFinal(estudiante)}/5\r\n                            </span>\r\n                          </td>\r\n                          <td className=\"px-4 py-3 text-center text-sm\">\r\n                            {calcularTotalSeccion(estudiante.notasDiarias)} ({estudiante.notasDiarias.length})\r\n                          </td>\r\n                          <td className=\"px-4 py-3 text-center text-sm\">\r\n                            {calcularTotalSeccion(estudiante.apreciacion)} ({estudiante.apreciacion.length})\r\n                          </td>\r\n                          <td className=\"px-4 py-3 text-center text-sm\">\r\n                            {calcularTotalSeccion(estudiante.examen)} ({estudiante.examen.length})\r\n                          </td>\r\n                          <td className=\"px-4 py-3 text-center\">\r\n                            <span className={`font-semibold ${\r\n                              porcentajeAsistencia >= 90 ? 'text-green-600' :\r\n                              porcentajeAsistencia >= 80 ? 'text-yellow-600' : 'text-red-600'\r\n                            }`}>\r\n                              {porcentajeAsistencia}%\r\n                            </span>\r\n                          </td>\r\n                        </tr>\r\n                      );\r\n                    })}\r\n                  </tbody>\r\n                </table>\r\n              </div>\r\n              {estudiantes.length === 0 && (\r\n                <div className=\"text-center py-8 text-gray-500\">\r\n                  <p>No hay estudiantes en esta clase</p>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {view === 'planificacion' && (\r\n          <div className=\"bg-white rounded-2xl shadow-lg p-6 md:p-8\">\r\n            <h2 className=\"text-2xl md:text-3xl font-bold text-gray-800 mb-6 flex items-center gap-3\">\r\n              <Sparkles className=\"w-8 h-8 text-purple-600\" />\r\n              Generador de Planes Trimestrales con IA\r\n            </h2>\r\n            \r\n            {!planGenerado ? (\r\n              <div className=\"space-y-6\">\r\n                <div className=\"bg-gradient-to-br from-purple-50 to-pink-50 border-2 border-purple-200 rounded-xl p-6 mb-6\">\r\n                  <div className=\"flex items-start gap-4\">\r\n                    <Sparkles className=\"w-8 h-8 text-purple-600 flex-shrink-0 mt-1\" />\r\n                    <div>\r\n                      <h3 className=\"font-bold text-purple-900 text-lg mb-2\">✨ Planes Trimestrales con IA</h3>\r\n                      <p className=\"text-purple-800 text-sm\">\r\n                        Genera planes trimestrales completos alineados con el currículo del MEDUCA de Panamá. \r\n                        Nuestra IA crea contenido detallado con contenidos, competencias, metodologías y evaluaciones \r\n                        específicas para cada trimestre.\r\n                      </p>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                \r\n                <div className=\"bg-gradient-to-r from-purple-100 to-pink-100 rounded-xl p-6\">\r\n                  <h3 className=\"text-xl font-bold text-gray-800 mb-4\">Información del Plan Trimestral</h3>\r\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                    <input\r\n                      type=\"text\"\r\n                      placeholder=\"Nombre del Profesor\"\r\n                      value={nombreProfesor}\r\n                      onChange={(e) => setNombreProfesor(e.target.value)}\r\n                      className=\"px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-purple-500\"\r\n                    />\r\n                    <input\r\n                      type=\"text\"\r\n                      placeholder=\"Institución Educativa\"\r\n                      value={institucion}\r\n                      onChange={(e) => setInstitucion(e.target.value)}\r\n                      className=\"px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-purple-500\"\r\n                    />\r\n                    <input\r\n                      type=\"text\"\r\n                      placeholder=\"Grado (ej: 5to)\"\r\n                      value={gradoPlan}\r\n                      onChange={(e) => setGradoPlan(e.target.value)}\r\n                      className=\"px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-purple-500\"\r\n                    />\r\n                    <input\r\n                      type=\"text\"\r\n                      placeholder=\"Materia (ej: Matemáticas)\"\r\n                      value={materia}\r\n                      onChange={(e) => setMateria(e.target.value)}\r\n                      className=\"px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-purple-500\"\r\n                    />\r\n                    <select\r\n                      value={trimestre}\r\n                      onChange={(e) => setTrimestre(e.target.value)}\r\n                      className=\"px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-purple-500\"\r\n                    >\r\n                      <option value=\"Primer Trimestre\">Primer Trimestre</option>\r\n                      <option value=\"Segundo Trimestre\">Segundo Trimestre</option>\r\n                      <option value=\"Tercer Trimestre\">Tercer Trimestre</option>\r\n                    </select>\r\n                    <div className=\"md:col-span-2\">\r\n                      <p className=\"text-sm text-gray-600 mb-2\">\r\n                        💡 Selecciona el trimestre para el cual deseas generar el plan de estudios completo.\r\n                      </p>\r\n                    </div>\r\n                  </div>\r\n                  \r\n                  <button\r\n                    onClick={generarPlanConOpenAI}\r\n                    disabled={generandoPlan || !nombreProfesor || !institucion || !gradoPlan || !materia || !trimestre}\r\n                    className={`w-full mt-6 py-4 rounded-lg font-bold text-lg flex items-center justify-center gap-3 transition ${\r\n                      generandoPlan || !nombreProfesor || !institucion || !gradoPlan || !materia || !trimestre\r\n                        ? 'bg-gray-400 cursor-not-allowed'\r\n                        : 'bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white shadow-lg hover:shadow-xl'\r\n                    }`}\r\n                  >\r\n                    {generandoPlan ? (\r\n                      <>\r\n                        <div className=\"animate-spin rounded-full h-6 w-6 border-b-2 border-white\"></div>\r\n                        Generando Plan Trimestral...\r\n                      </>\r\n                    ) : (\r\n                      <>\r\n                        <Sparkles className=\"w-6 h-6\" />\r\n                        Generar Plan Trimestral con IA\r\n                      </>\r\n                    )}\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            ) : (\r\n              <div className=\"space-y-6\">\r\n                <div className=\"flex flex-col md:flex-row justify-between items-start gap-4 mb-6\">\r\n                  <div>\r\n                    <h3 className=\"text-2xl font-bold text-gray-800\">Plan {planGenerado.trimestre}</h3>\r\n                    <p className=\"text-gray-600 mt-1\">\r\n                      {planGenerado.asignatura || planGenerado.materia || materia} - {planGenerado.grado || gradoPlan} | {planGenerado.institucion || institucion}\r\n                    </p>\r\n                    <p className=\"text-sm text-gray-500 mt-1\">Profesor: {planGenerado.docente || planGenerado.profesor || nombreProfesor}</p>\r\n                    <p className=\"text-sm text-gray-500\">Trimestre: {planGenerado.trimestre} | Fecha: {planGenerado.fecha}</p>\r\n                    {planGenerado.duracionSemanas && (\r\n                      <p className=\"text-sm text-gray-500\">Duración: {planGenerado.duracionSemanas} semanas</p>\r\n                    )}\r\n                  </div>\r\n                  <div className=\"flex gap-3 flex-wrap\">\r\n                    <OpcionesExportacion\r\n                      datos={JSON.stringify(planGenerado)}\r\n                      nombreArchivo={`Plan_Trimestral_${planGenerado.asignatura || materia}_${planGenerado.trimestre.replace(/\\s+/g, '_')}`}\r\n                    />\r\n                    <button\r\n                      onClick={() => setPlanGenerado(null)}\r\n                      className=\"bg-gray-600 text-white px-6 py-3 rounded-lg hover:bg-gray-700 transition font-bold\"\r\n                    >\r\n                      Nuevo Plan\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n                \r\n                {/* SECCIÓN ACTUALIZADA CON DESARROLLO DE CLASES */}\r\n                {planGenerado.contenidos && Array.isArray(planGenerado.contenidos) && planGenerado.contenidos.length > 0 && (\r\n                  <div className=\"bg-blue-50 rounded-xl p-6\">\r\n                    <h4 className=\"text-xl font-bold text-blue-900 mb-4 flex items-center gap-2\">\r\n                      📚 Contenidos del {planGenerado.trimestre}\r\n                    </h4>\r\n                    <ul className=\"space-y-2\">\r\n                      {planGenerado.contenidos.map((cont, i) => (\r\n                        <li key={i} className=\"flex gap-3\">\r\n                          <span className=\"text-blue-600 font-bold\">{i + 1}.</span>\r\n                          <span className=\"text-gray-800\">{cont}</span>\r\n                        </li>\r\n                      ))}\r\n                    </ul>\r\n                  </div>\r\n                )}\r\n                \r\n                {/* DESARROLLO DEL CONTENIDO PARA CLASES */}\r\n                {planGenerado.desarrolloClases && Object.keys(planGenerado.desarrolloClases).length > 0 && (\r\n                  <div className=\"bg-gradient-to-r from-teal-50 to-cyan-50 rounded-xl p-6 border-2 border-teal-200\">\r\n                    <h4 className=\"text-xl font-bold text-teal-900 mb-4 flex items-center gap-2\">\r\n                      🎯 Desarrollo del Contenido para Clases\r\n                    </h4>\r\n                    <div className=\"space-y-6\">\r\n                      {Object.entries(planGenerado.desarrolloClases).map(([contenidoKey, desarrollo]) => (\r\n                        <div key={contenidoKey} className=\"bg-white rounded-lg p-4 border border-teal-100\">\r\n                          <h5 className=\"font-bold text-lg text-teal-800 mb-3\">📝 {contenidoKey}</h5>\r\n                          \r\n                          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-3\">\r\n                            <div>\r\n                              <span className=\"font-semibold text-gray-700\">Duración:</span>\r\n                              <span className=\"ml-2 text-teal-600\">{desarrollo.duracion || '3 sesiones de 45 minutos'}</span>\r\n                            </div>\r\n                          </div>\r\n\r\n                          {desarrollo.objetivos && desarrollo.objetivos.length > 0 && (\r\n                            <div className=\"mb-3\">\r\n                              <h6 className=\"font-semibold text-gray-700 mb-2\">Objetivos de Aprendizaje:</h6>\r\n                              <ul className=\"space-y-1\">\r\n                                {desarrollo.objetivos.map((objetivo, idx) => (\r\n                                  <li key={idx} className=\"flex gap-2\">\r\n                                    <span className=\"text-teal-500\">•</span>\r\n                                    <span className=\"text-gray-700\">{objetivo}</span>\r\n                                  </li>\r\n                                ))}\r\n                              </ul>\r\n                            </div>\r\n                          )}\r\n\r\n                          {desarrollo.materiales && desarrollo.materiales.length > 0 && (\r\n                            <div className=\"mb-3\">\r\n                              <h6 className=\"font-semibold text-gray-700 mb-2\">Materiales necesarios:</h6>\r\n                              <ul className=\"space-y-1\">\r\n                                {desarrollo.materiales.map((material, idx) => (\r\n                                  <li key={idx} className=\"flex gap-2\">\r\n                                    <span className=\"text-teal-500\">•</span>\r\n                                    <span className=\"text-gray-700\">{material}</span>\r\n                                  </li>\r\n                                ))}\r\n                              </ul>\r\n                            </div>\r\n                          )}\r\n\r\n                          {desarrollo.fases && desarrollo.fases.length > 0 && (\r\n                            <div>\r\n                              <h6 className=\"font-semibold text-gray-700 mb-2\">Fases de la actividad:</h6>\r\n                              <div className=\"space-y-3\">\r\n                                {desarrollo.fases.map((fase, index) => (\r\n                                  <div key={index} className=\"bg-gray-50 rounded-lg p-3\">\r\n                                    <h7 className=\"font-semibold text-gray-800 mb-2\">\r\n                                      SESIÓN {index + 1} - {fase.titulo || 'Desarrollo'}\r\n                                    </h7>\r\n                                    <div className=\"space-y-2\">\r\n                                      {fase.actividades && fase.actividades.map((actividad, actIdx) => (\r\n                                        <div key={actIdx} className=\"flex gap-2 text-sm\">\r\n                                          <span className=\"font-medium text-teal-600 whitespace-nowrap\">\r\n                                            {actividad.tiempo}:\r\n                                          </span>\r\n                                          <span className=\"text-gray-700\">{actividad.descripcion}</span>\r\n                                        </div>\r\n                                      ))}\r\n                                    </div>\r\n                                  </div>\r\n                                ))}\r\n                              </div>\r\n                            </div>\r\n                          )}\r\n                        </div>\r\n                      ))}\r\n                    </div>\r\n                  </div>\r\n                )}\r\n                \r\n                {planGenerado.competencias && Array.isArray(planGenerado.competencias) && planGenerado.competencias.length > 0 && (\r\n                  <div className=\"bg-purple-50 rounded-xl p-6\">\r\n                    <h4 className=\"text-xl font-bold text-purple-900 mb-4 flex items-center gap-2\">\r\n                      💪 Competencias a Desarrollar\r\n                    </h4>\r\n                    <ul className=\"space-y-2\">\r\n                      {planGenerado.competencias.map((comp, i) => (\r\n                        <li key={i} className=\"flex gap-3\">\r\n                          <span className=\"text-purple-600\">{i + 1}.</span>\r\n                          <span className=\"text-gray-800\">{comp}</span>\r\n                        </li>\r\n                      ))}\r\n                    </ul>\r\n                  </div>\r\n                )}\r\n                \r\n                {planGenerado.indicadoresLogro && Array.isArray(planGenerado.indicadoresLogro) && planGenerado.indicadoresLogro.length > 0 && (\r\n                  <div className=\"bg-teal-50 rounded-xl p-6\">\r\n                    <h4 className=\"text-xl font-bold text-teal-900 mb-4 flex items-center gap-2\">\r\n                      ✅ Indicadores de Logro\r\n                    </h4>\r\n                    <ul className=\"space-y-2\">\r\n                      {planGenerado.indicadoresLogro.map((ind, i) => (\r\n                        <li key={i} className=\"flex gap-3\">\r\n                          <span className=\"text-teal-600\">•</span>\r\n                          <span className=\"text-gray-800\">{ind}</span>\r\n                        </li>\r\n                      ))}\r\n                    </ul>\r\n                  </div>\r\n                )}\r\n                \r\n                {planGenerado.metodologia && (\r\n                  <div className=\"bg-green-50 rounded-xl p-6\">\r\n                    <h4 className=\"text-xl font-bold text-green-900 mb-4 flex items-center gap-2\">\r\n                      📖 Estrategias Metodológicas\r\n                    </h4>\r\n                    <p className=\"text-gray-800\">{planGenerado.metodologia}</p>\r\n                  </div>\r\n                )}\r\n                \r\n                {planGenerado.recursos && Array.isArray(planGenerado.recursos) && planGenerado.recursos.length > 0 && (\r\n                  <div className=\"bg-indigo-50 rounded-xl p-6\">\r\n                    <h4 className=\"text-xl font-bold text-indigo-900 mb-4 flex items-center gap-2\">\r\n                      🛠️ Recursos Educativos\r\n                    </h4>\r\n                    <ul className=\"grid grid-cols-1 md:grid-cols-2 gap-2\">\r\n                      {planGenerado.recursos.forEach((rec, i) => (\r\n                        <li key={i} className=\"flex gap-2 items-center\">\r\n                          <span className=\"text-indigo-600\">•</span>\r\n                          <span className=\"text-gray-800\">{rec}</span>\r\n                        </li>\r\n                      ))}\r\n                    </ul>\r\n                  </div>\r\n                )}\r\n\r\n                {planGenerado.evaluacion && Array.isArray(planGenerado.evaluacion) && planGenerado.evaluacion.length > 0 && (\r\n                  <div className=\"bg-red-50 rounded-xl p-6\">\r\n                    <h4 className=\"text-xl font-bold text-red-900 mb-4 flex items-center gap-2\">\r\n                      📊 Instrumentos de Evaluación\r\n                    </h4>\r\n                    <ul className=\"space-y-2\">\r\n                      {planGenerado.evaluacion.map((evalItem, i) => (\r\n                        <li key={i} className=\"flex gap-3\">\r\n                          <span className=\"text-red-600\">•</span>\r\n                          <span className=\"text-gray-800\">{evalItem}</span>\r\n                        </li>\r\n                      ))}\r\n                    </ul>\r\n                  </div>\r\n                )}\r\n\r\n                {planGenerado.adaptaciones && Array.isArray(planGenerado.adaptaciones) && planGenerado.adaptaciones.length > 0 && (\r\n                  <div className=\"bg-orange-50 rounded-xl p-6\">\r\n                    <h4 className=\"text-xl font-bold text-orange-900 mb-4 flex items-center gap-2\">\r\n                      ♿ Adaptaciones Curriculares\r\n                    </h4>\r\n                    <ul className=\"space-y-2\">\r\n                      {planGenerado.adaptaciones.map((adap, i) => (\r\n                        <li key={i} className=\"flex gap-3\">\r\n                          <span className=\"text-orange-600\">•</span>\r\n                          <span className=\"text-gray-800\">{adap}</span>\r\n                        </li>\r\n                      ))}\r\n                    </ul>\r\n                  </div>\r\n                )}\r\n                \r\n                {planGenerado.observaciones && (\r\n                  <div className=\"bg-gray-100 rounded-xl p-6\">\r\n                    <h4 className=\"text-xl font-bold text-gray-900 mb-4 flex items-center gap-2\">\r\n                      📝 Observaciones\r\n                    </h4>\r\n                    <p className=\"text-gray-800\">{planGenerado.observaciones}</p>\r\n                  </div>\r\n                )}\r\n\r\n                <div className=\"bg-gradient-to-r from-purple-100 to-pink-100 rounded-xl p-6 text-center\">\r\n                  <p className=\"text-purple-800 font-semibold\">\r\n                    ✅ Plan trimestral generado exitosamente con IA\r\n                  </p>\r\n                  <p className=\"text-sm text-purple-600 mt-1\">\r\n                    Puedes descargar este plan en formato de texto para guardarlo o imprimirlo.\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        )}\r\n      </main>\r\n\r\n      <footer className=\"bg-gray-800 text-white py-6 mt-12\">\r\n        <div className=\"container mx-auto px-4 text-center\">\r\n          <p className=\"text-sm\">\r\n            © 2025 Bringo Edu - Asistente Inteligente para Profesores\r\n          </p>\r\n          <p className=\"text-xs text-gray-400 mt-2\">\r\n            Desarrollado por GermanApp | Potenciado por IA\r\n          </p>\r\n        </div>\r\n      </footer>\r\n    </div>\r\n  );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}